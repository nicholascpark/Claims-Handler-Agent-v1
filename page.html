
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<meta content="Build reliable, stateful AI systems, without giving up control" name="description"/>
<link href="https://langchain-ai.github.io/langgraph/how-tos/human_in_the_loop/add-human-in-the-loop/" rel="canonical"/>
<link href="../../../concepts/human_in_the_loop/" rel="prev"/>
<link href="../../../cloud/how-tos/add-human-in-the-loop/" rel="next"/>
<link href="../../../static/favicon.png" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.6.15" name="generator"/>
<title>Add human intervention</title>
<link href="../../../assets/stylesheets/main.342714a4.min.css" rel="stylesheet"/>
<link href="../../../assets/stylesheets/palette.06af60db.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Public+Sans:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Public Sans";--md-code-font:"Roboto Mono"}</style>
<link href="../../../assets/_mkdocstrings.css" rel="stylesheet"/>
<link href="../../../stylesheets/version_admonitions.css" rel="stylesheet"/>
<link href="../../../stylesheets/logos.css" rel="stylesheet"/>
<link href="../../../stylesheets/sticky_navigation.css" rel="stylesheet"/>
<link href="../../../stylesheets/agent_graph_widget.css" rel="stylesheet"/>
<script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-T35S4S46');</script>
<!-- End Google Tag Manager -->
<meta content="165B7E7C89E49946" name="algolia-site-verification">
<script>
    // Simple copy page functionality - uses original markdown source
    function copyPageAsMarkdown() {
        const markdownScript = document.getElementById('page-markdown-content');
        if (!markdownScript) {
            alert('Markdown content not available for this page');
            return;
        }
        
        try {
            let rawContent = markdownScript.textContent;
            
            // Safe HTML entity decoding function
            function decodeHtmlEntities(text) {
                const parser = new DOMParser();
                const doc = parser.parseFromString(text, 'text/html');
                return doc.documentElement.textContent || '';
            }
            
            // Always decode HTML entities since the browser might encode them
            rawContent = decodeHtmlEntities(rawContent);
            
            
            const data = JSON.parse(rawContent);
            const content = `Source: ${window.location.href}\n\n${data.markdown}`;
            
            navigator.clipboard.writeText(content).then(() => {
                // Simple notification
                const notification = document.createElement('div');
                notification.textContent = 'Page content copied to clipboard';
                notification.style.cssText = 'position:fixed;top:20px;right:20px;background:#4CAF50;color:white;padding:10px 16px;border-radius:4px;z-index:9999;box-shadow:0 2px 10px rgba(0,0,0,0.2);';
                document.body.appendChild(notification);
                setTimeout(() => notification.remove(), 3000);
            }).catch(() => {
                alert('Failed to copy content');
            });
        } catch (e) {
            console.error('Failed to parse page content:', e);
            alert('Failed to parse page content: ' + e.message);
        }
    }

    // Add dropdown button to header when page loads
    document.addEventListener('DOMContentLoaded', function() {
        const headerSource = document.querySelector('.md-header__source');
        if (headerSource) {
            // Create dropdown container
            const dropdownContainer = document.createElement('div');
            dropdownContainer.style.cssText = 'position:relative;display:inline-block;margin-left:8px;';
            
            // Create main button
            const button = document.createElement('button');
            button.innerHTML = 'Copy page <span style="margin-left:8px;font-size:12px;color:#9ca3af;">▾</span>';
            button.style.cssText = 'background:transparent;border:1px solid #d1d5db;padding:6px 12px;border-radius:4px;cursor:pointer;font-size:14px;color:#374151;transition:all 0.2s ease;white-space:nowrap;display:flex;align-items:center;';
            
            // Create dropdown menu
            const dropdown = document.createElement('div');
            dropdown.className = 'copy-page-dropdown';
            dropdown.style.cssText = 'position:absolute;top:100%;left:0;background:white;border:1px solid #e5e7eb;border-radius:6px;box-shadow:0 4px 12px rgba(0,0,0,0.15);z-index:1000;min-width:180px;display:none;padding:4px 0;';
            
            // Create dropdown options
            const option1 = document.createElement('div');
            option1.textContent = 'Copy as Markdown for LLMs';
            option1.className = 'copy-page-option';
            option1.style.cssText = 'padding:8px 16px;cursor:pointer;font-size:14px;color:#374151;margin:2px 0;';
            option1.onmouseover = function() { 
                this.style.background = document.documentElement.getAttribute('data-md-color-scheme') === 'slate' ? '#4a5568' : '#f8fafc'; 
            };
            option1.onmouseout = function() { this.style.background = 'transparent'; };
            option1.onclick = function() {
                // Check if we're on a reference page
                if (window.location.pathname.includes('/reference/')) {
                    alert('Copy Page not yet available in API reference pages.');
                } else {
                    copyPageAsMarkdown();
                }
                dropdown.style.display = 'none';
            };
            
            const option2 = document.createElement('div');
            option2.textContent = "View LangGraph's llms.txt";
            option2.className = 'copy-page-option';
            option2.style.cssText = 'padding:8px 16px;cursor:pointer;font-size:14px;color:#374151;margin:2px 0;';
            option2.onmouseover = function() { 
                this.style.background = document.documentElement.getAttribute('data-md-color-scheme') === 'slate' ? '#4a5568' : '#f8fafc'; 
            };
            option2.onmouseout = function() { this.style.background = 'transparent'; };
            option2.onclick = function() {
                window.open('/langgraph/llms-txt-overview/', '_blank');
                dropdown.style.display = 'none';
            };
            
            // Add options to dropdown
            dropdown.appendChild(option1);
            dropdown.appendChild(option2);
            
            // Button hover effects
            button.onmouseover = function() { 
                this.style.background = '#f3f4f6'; 
                this.style.borderColor = '#9ca3af'; 
            };
            button.onmouseout = function() { 
                this.style.background = 'transparent'; 
                this.style.borderColor = '#d1d5db'; 
            };
            
            // Toggle dropdown
            button.onclick = function(e) {
                e.stopPropagation();
                dropdown.style.display = dropdown.style.display === 'none' ? 'block' : 'none';
            };
            
            // Close dropdown when clicking outside
            document.addEventListener('click', function() {
                dropdown.style.display = 'none';
            });
            
            // Assemble dropdown
            dropdownContainer.appendChild(button);
            dropdownContainer.appendChild(dropdown);
            headerSource.parentNode.insertBefore(dropdownContainer, headerSource.nextSibling);
        }
    });
  </script>
<style>
    @import url("https://fonts.googleapis.com/css2?family=Public+Sans&display=swap");
    :root {
      --md-primary-fg-color: #333333;
      --md-accent-fg-color: #1E88E5;
      --md-default-bg-color: #FFFFFF;
      --md-default-fg-color: #333333;
      --md-text-font-family: "Public Sans", sans-serif;
    }

    body {
      font-family: var(--md-text-font-family);
      background-color: var(--md-default-bg-color);
      color: var(--md-default-fg-color);
    }

    .md-main {
      background-color: #FFFFFF;
    }

    .md-footer {
      background-color: #F5F5F5;
      color: #666666;
    }

    .md-footer-meta {
      background-color: #4d4d4d;
    }

    .md-typeset a {
      color: #1E88E5;
    }

    .md-typeset a:hover {
      color: #1565C0;
    }

    .md-nav__link--active,
    .md-nav__link:active {
      color: #1E88E5;
    }

    .md-search__input {
      background-color: #F5F5F5;
      color: #333333;
    }

    .md-search__input:hover,
    .md-search__input:focus {
      background-color: #EEEEEE;
    }
    /* Table of contents styles */
    .md-nav--secondary .md-nav__item--active > .md-nav__link {
      font-weight: bold;
      color: var(--md-primary-fg-color);
    }

    .md-nav--secondary .md-nav__item--nested > .md-nav__link {
      font-weight: normal;
      color: var(--md-default-fg-color);
    }

    .md-nav--secondary .md-nav__item--nested > .md-nav__link::before {
      content: "";
      display: inline-block;
      width: 6px;
      height: 6px;
      background-color: var(--md-default-fg-color);
      border-radius: 50%;
      margin-right: 0.5rem;
    }

    [data-md-color-scheme="slate"] {
      --md-default-bg-color: #1E1E1E;
      --md-default-fg-color: #FFFFFF;
      --md-accent-fg-color: #64B5F6;
    }

    [data-md-color-scheme="slate"] .md-main {
      background-color: #1E1E1E;
    }

    [data-md-color-scheme="slate"] .navbar {
      background-color: #1E1E1E;
      color: #FFFFFF;
      box-shadow: none;
    }

    [data-md-color-scheme="slate"] .md-footer {
      background-color: #1E1E1E;
      color: #BDBDBD;
    }

    [data-md-color-scheme="slate"] .md-header {
      background-color: #1E1E1E;
      color: #BDBDBD;
    }

    [data-md-color-scheme="slate"] .md-tabs {
      background-color: #1E1E1E;
      color: #BDBDBD;
    }

    [data-md-color-scheme="slate"] .md-search__input {
      background-color: #F5F5F5;
      color: #333333;
    }

    [data-md-color-scheme="slate"] .md-search__icon {
      color: #333333;
    }

    [data-md-color-scheme="slate"] .md-search__input::placeholder {
      color: #333333;
    }

    [data-md-color-scheme="slate"] .md-footer-meta {
      background-color: #4d4d4d;
    }

    [data-md-color-scheme="slate"] .md-typeset a {
      color: #64B5F6;
    }

    [data-md-color-scheme="slate"] .md-typeset a:hover {
      color: #90CAF9;
    }

    .notebook-links {
      display: flex;
      justify-content: flex-end;
      margin-bottom: 1rem;
    }
    .notebook-links .md-content__button {
      margin-left: 0.5rem;
    }

    [data-md-color-scheme=default] .logo-dark {
      display: none !important;
    }

    [data-md-color-scheme=slate] .logo-light {
      display: none !important;
    }

    .jupyter-wrapper .jp-CodeCell .jp-Cell-inputWrapper .jp-InputPrompt.jp-InputArea-prompt {
      display: none !important;
    }

    .jupyter-wrapper .jp-Notebook .jp-Cell .jp-OutputPrompt {
      display: none !important;
    }

    .md-banner {
      background-color: #CFC9FA;
      color: #000000;
    }

    .md-banner a {
      color: #000000;
      text-decoration: underline;
    }

    .md-banner a:hover {
      color: #000000;
    }

    .md-header__title {
      visibility: hidden;
    }

    /* Dark mode banner styling */
    [data-md-color-scheme="slate"] .md-banner {
      background-color: #CFC9FA; /* Same light purple for both modes */
      color: #000000;
    }

    [data-md-color-scheme="slate"] .md-banner a {
      color: #000000;
    }

    [data-md-color-scheme="slate"] .md-banner a:hover {
      color: #000000;
    }

    /* Copy page dropdown dark mode support */
    [data-md-color-scheme="slate"] .copy-page-dropdown {
      background: #1f2937 !important;
      border-color: #374151 !important;
      box-shadow: 0 4px 12px rgba(0,0,0,0.5) !important;
    }

    [data-md-color-scheme="slate"] .copy-page-option {
      color: #e5e7eb !important;
    }

  </style>
<script id="page-markdown-content" type="application/json">{"markdown": "# Enable human intervention\n\nTo review, edit, and approve tool calls in an agent or workflow, use interrupts to pause a graph and wait for human input. Interrupts use LangGraph's [persistence](../../concepts/persistence.md) layer, which saves the graph state, to indefinitely pause graph execution until you resume.\n\n!!! info\n\n    For more information about human-in-the-loop workflows, see the [Human-in-the-Loop](../../concepts/human_in_the_loop.md) conceptual guide.\n\n## Pause using `interrupt`\n\n[Dynamic interrupts](../../concepts/human_in_the_loop.md#key-capabilities) (also known as dynamic breakpoints) are triggered based on the current state of the graph. You can set dynamic interrupts by calling [`interrupt` function][langgraph.types.interrupt] in the appropriate place. The graph will pause, which allows for human intervention, and then resumes the graph with their input. It's useful for tasks like approvals, edits, or gathering additional context.\n\n!!! note\n\n    As of v1.0, `interrupt` is the recommended way to pause a graph. `NodeInterrupt` is deprecated and will be removed in v2.0.\n\nTo use `interrupt` in your graph, you need to:\n\n1. [**Specify a checkpointer**](../../concepts/persistence.md#checkpoints) to save the graph state after each step.\n2. **Call `interrupt()`** in the appropriate place. See the [Common Patterns](#common-patterns) section for examples.\n3. **Run the graph** with a [**thread ID**](../../concepts/persistence.md#threads) until the `interrupt` is hit.\n4. **Resume execution** using `invoke`/`ainvoke`/`stream`/`astream` (see [**The `Command` primitive**](#resume-using-the-command-primitive)).\n\n<sup><i>API Reference: <a href=\"https://langchain-ai.github.io/langgraph/reference/types/#langgraph.types.interrupt\">interrupt\u003c/a> | <a href=\"https://langchain-ai.github.io/langgraph/reference/types/#langgraph.types.Command\">Command\u003c/a>\u003c/i>\u003c/sup>\n\n```python hl_lines=\"1 4 28\"\nfrom langgraph.types import interrupt, Command\n\ndef human_node(state: State):\n    value = interrupt( # (1)!\n        {\n            \"text_to_revise\": state[\"some_text\"] # (2)!\n        }\n    )\n    return {\n        \"some_text\": value # (3)!\n    }\n\n\ngraph = graph_builder.compile(checkpointer=checkpointer) # (4)!\n\n# Run the graph until the interrupt is hit.\nconfig = {\"configurable\": {\"thread_id\": \"some_id\"}}\nresult = graph.invoke({\"some_text\": \"original text\"}, config=config) # (5)!\nprint(result['__interrupt__']) # (6)!\n# > [\n# >    Interrupt(\n# >       value={'text_to_revise': 'original text'}, \n# >       resumable=True,\n# >       ns=['human_node:6ce9e64f-edef-fe5d-f7dc-511fa9526960']\n# >    )\n# > ] \n\nprint(graph.invoke(Command(resume=\"Edited text\"), config=config)) # (7)!\n# > {'some_text': 'Edited text'}\n```\n\n1. `interrupt(...)` pauses execution at `human_node`, surfacing the given payload to a human.\n2. Any JSON serializable value can be passed to the `interrupt` function. Here, a dict containing the text to revise.\n3. Once resumed, the return value of `interrupt(...)` is the human-provided input, which is used to update the state.\n4. A checkpointer is required to persist graph state. In production, this should be durable (e.g., backed by a database).\n5. The graph is invoked with some initial state.\n6. When the graph hits the interrupt, it returns an `Interrupt` object with the payload and metadata.\n7. The graph is resumed with a `Command(resume=...)`, injecting the human's input and continuing execution.\n\n??? example \"Extended example: using `interrupt`\"\n\n    ```python hl_lines=\"7 13 47\"\n    from typing import TypedDict\n    import uuid\n\n    from langgraph.checkpoint.memory import InMemorySaver\n    from langgraph.constants import START\n    from langgraph.graph import StateGraph\n    from langgraph.types import interrupt, Command\n\n    class State(TypedDict):\n        some_text: str\n\n    def human_node(state: State):\n        value = interrupt( # (1)!\n            {\n                \"text_to_revise\": state[\"some_text\"] # (2)!\n            }\n        )\n        return {\n            \"some_text\": value # (3)!\n        }\n\n\n    # Build the graph\n    graph_builder = StateGraph(State)\n    graph_builder.add_node(\"human_node\", human_node)\n    graph_builder.add_edge(START, \"human_node\")\n\n    checkpointer = InMemorySaver() # (4)!\n\n    graph = graph_builder.compile(checkpointer=checkpointer)\n\n    # Pass a thread ID to the graph to run it.\n    config = {\"configurable\": {\"thread_id\": uuid.uuid4()}}\n\n    # Run the graph until the interrupt is hit.\n    result = graph.invoke({\"some_text\": \"original text\"}, config=config) # (5)!\n\n    print(result['__interrupt__']) # (6)!\n    # > [\n    # >    Interrupt(\n    # >       value={'text_to_revise': 'original text'}, \n    # >       resumable=True,\n    # >       ns=['human_node:6ce9e64f-edef-fe5d-f7dc-511fa9526960']\n    # >    )\n    # > ] \n\n    print(graph.invoke(Command(resume=\"Edited text\"), config=config)) # (7)!\n    # > {'some_text': 'Edited text'}\n    ```\n\n    1. `interrupt(...)` pauses execution at `human_node`, surfacing the given payload to a human.\n    2. Any JSON serializable value can be passed to the `interrupt` function. Here, a dict containing the text to revise.\n    3. Once resumed, the return value of `interrupt(...)` is the human-provided input, which is used to update the state.\n    4. A checkpointer is required to persist graph state. In production, this should be durable (e.g., backed by a database).\n    5. The graph is invoked with some initial state.\n    6. When the graph hits the interrupt, it returns an `Interrupt` object with the payload and metadata.\n    7. The graph is resumed with a `Command(resume=...)`, injecting the human's input and continuing execution.\n\n\n!!! tip \"New in 0.4.0\"\n\n      `__interrupt__` is a special key that will be returned when running the graph if the graph is interrupted. Support for `__interrupt__` in `invoke` and `ainvoke` has been added in version 0.4.0. If you're on an older version, you will only see `__interrupt__` in the result if you use `stream` or `astream`. You can also use `graph.get_state(thread_id)` to get the interrupt value.\n\n!!! warning\n\n      Interrupts resemble Python's input() function in terms of developer experience, but they do not automatically resume execution from the interruption point. Instead, they rerun the entire node where the interrupt was used. For this reason, interrupts are typically best placed at the start of a node or in a dedicated node.\n\n## Resume using the `Command` primitive\n\nWhen the `interrupt` function is used within a graph, execution pauses at that point and awaits user input.\n\nTo resume execution, use the [`Command`][langgraph.types.Command] primitive, which can be supplied via the `invoke`, `ainvoke`, `stream`, or `astream` methods. The graph resumes execution from the beginning of the node where `interrupt(...)` was initially called. This time, the `interrupt` function will return the value provided in `Command(resume=value)` rather than pausing again. All code from the beginning of the node to the `interrupt` will be re-executed.\n\n```python\n# Resume graph execution by providing the user's input.\ngraph.invoke(Command(resume={\"age\": \"25\"}), thread_config)\n```\n\n### Resume multiple interrupts with one invocation\n\nIf you have multiple interrupts in the task queue, you can use `Command.resume` with a dictionary mapping of interrupt ids to resume with a single `invoke` / `stream` call.\n\nFor example, once your graph has been interrupted (multiple times, theoretically) and is stalled:\n\n```python\nresume_map = {\n    i.interrupt_id: f\"human input for prompt {i.value}\"\n    for i in parent.get_state(thread_config).interrupts\n}\n\nparent_graph.invoke(Command(resume=resume_map), config=thread_config)\n```\n\n## Common patterns\n\nBelow we show different design patterns that can be implemented using `interrupt` and `Command`.\n\n### Approve or reject\n\n<figure markdown=\"1\">\n![image](../../concepts/img/human_in_the_loop/approve-or-reject.png){: style=\"max-height:400px\"}\n<figcaption>Depending on the human's approval or rejection, the graph can proceed with the action or take an alternative path.\u003c/figcaption>\n\u003c/figure>\n\nPause the graph before a critical step, such as an API call, to review and approve the action. If the action is rejected, you can prevent the graph from executing the step, and potentially take an alternative action.\n\n<sup><i>API Reference: <a href=\"https://langchain-ai.github.io/langgraph/reference/types/#langgraph.types.interrupt\">interrupt\u003c/a> | <a href=\"https://langchain-ai.github.io/langgraph/reference/types/#langgraph.types.Command\">Command\u003c/a>\u003c/i>\u003c/sup>\n\n```python\nfrom typing import Literal\nfrom langgraph.types import interrupt, Command\n\ndef human_approval(state: State) -> Command[Literal[\"some_node\", \"another_node\"]]:\n    is_approved = interrupt(\n        {\n            \"question\": \"Is this correct?\",\n            # Surface the output that should be\n            # reviewed and approved by the human.\n            \"llm_output\": state[\"llm_output\"]\n        }\n    )\n\n    if is_approved:\n        return Command(goto=\"some_node\")\n    else:\n        return Command(goto=\"another_node\")\n\n# Add the node to the graph in an appropriate location\n# and connect it to the relevant nodes.\ngraph_builder.add_node(\"human_approval\", human_approval)\ngraph = graph_builder.compile(checkpointer=checkpointer)\n\n# After running the graph and hitting the interrupt, the graph will pause.\n# Resume it with either an approval or rejection.\nthread_config = {\"configurable\": {\"thread_id\": \"some_id\"}}\ngraph.invoke(Command(resume=True), config=thread_config)\n```\n\n??? example \"Extended example: approve or reject with interrupt\"\n\n    ```python\n    from typing import Literal, TypedDict\n    import uuid\n\n    from langgraph.constants import START, END\n    from langgraph.graph import StateGraph\n    from langgraph.types import interrupt, Command\n    from langgraph.checkpoint.memory import MemorySaver\n\n    # Define the shared graph state\n    class State(TypedDict):\n        llm_output: str\n        decision: str\n\n    # Simulate an LLM output node\n    def generate_llm_output(state: State) -> State:\n        return {\"llm_output\": \"This is the generated output.\"}\n\n    # Human approval node\n    def human_approval(state: State) -> Command[Literal[\"approved_path\", \"rejected_path\"]]:\n        decision = interrupt({\n            \"question\": \"Do you approve the following output?\",\n            \"llm_output\": state[\"llm_output\"]\n        })\n\n        if decision == \"approve\":\n            return Command(goto=\"approved_path\", update={\"decision\": \"approved\"})\n        else:\n            return Command(goto=\"rejected_path\", update={\"decision\": \"rejected\"})\n\n    # Next steps after approval\n    def approved_node(state: State) -> State:\n        print(\"✅ Approved path taken.\")\n        return state\n\n    # Alternative path after rejection\n    def rejected_node(state: State) -> State:\n        print(\"❌ Rejected path taken.\")\n        return state\n\n    # Build the graph\n    builder = StateGraph(State)\n    builder.add_node(\"generate_llm_output\", generate_llm_output)\n    builder.add_node(\"human_approval\", human_approval)\n    builder.add_node(\"approved_path\", approved_node)\n    builder.add_node(\"rejected_path\", rejected_node)\n\n    builder.set_entry_point(\"generate_llm_output\")\n    builder.add_edge(\"generate_llm_output\", \"human_approval\")\n    builder.add_edge(\"approved_path\", END)\n    builder.add_edge(\"rejected_path\", END)\n\n    checkpointer = MemorySaver()\n    graph = builder.compile(checkpointer=checkpointer)\n\n    # Run until interrupt\n    config = {\"configurable\": {\"thread_id\": uuid.uuid4()}}\n    result = graph.invoke({}, config=config)\n    print(result[\"__interrupt__\"])\n    # Output:\n    # Interrupt(value={'question': 'Do you approve the following output?', 'llm_output': 'This is the generated output.'}, ...)\n\n    # Simulate resuming with human input\n    # To test rejection, replace resume=\"approve\" with resume=\"reject\"\n    final_result = graph.invoke(Command(resume=\"approve\"), config=config)\n    print(final_result)\n    ```\n\n### Review and edit state\n\n<figure markdown=\"1\">\n![image](../../concepts/img/human_in_the_loop/edit-graph-state-simple.png){: style=\"max-height:400px\"}\n<figcaption>A human can review and edit the state of the graph. This is useful for correcting mistakes or updating the state with additional information.\n\u003c/figcaption>\n\u003c/figure>\n\n<sup><i>API Reference: <a href=\"https://langchain-ai.github.io/langgraph/reference/types/#langgraph.types.interrupt\">interrupt\u003c/a>\u003c/i>\u003c/sup>\n\n```python\nfrom langgraph.types import interrupt\n\ndef human_editing(state: State):\n    ...\n    result = interrupt(\n        # Interrupt information to surface to the client.\n        # Can be any JSON serializable value.\n        {\n            \"task\": \"Review the output from the LLM and make any necessary edits.\",\n            \"llm_generated_summary\": state[\"llm_generated_summary\"]\n        }\n    )\n\n    # Update the state with the edited text\n    return {\n        \"llm_generated_summary\": result[\"edited_text\"] \n    }\n\n# Add the node to the graph in an appropriate location\n# and connect it to the relevant nodes.\ngraph_builder.add_node(\"human_editing\", human_editing)\ngraph = graph_builder.compile(checkpointer=checkpointer)\n\n...\n\n# After running the graph and hitting the interrupt, the graph will pause.\n# Resume it with the edited text.\nthread_config = {\"configurable\": {\"thread_id\": \"some_id\"}}\ngraph.invoke(\n    Command(resume={\"edited_text\": \"The edited text\"}), \n    config=thread_config\n)\n```\n\n??? example \"Extended example: edit state with interrupt\"\n\n    ```python\n    from typing import TypedDict\n    import uuid\n\n    from langgraph.constants import START, END\n    from langgraph.graph import StateGraph\n    from langgraph.types import interrupt, Command\n    from langgraph.checkpoint.memory import MemorySaver\n\n    # Define the graph state\n    class State(TypedDict):\n        summary: str\n\n    # Simulate an LLM summary generation\n    def generate_summary(state: State) -> State:\n        return {\n            \"summary\": \"The cat sat on the mat and looked at the stars.\"\n        }\n\n    # Human editing node\n    def human_review_edit(state: State) -> State:\n        result = interrupt({\n            \"task\": \"Please review and edit the generated summary if necessary.\",\n            \"generated_summary\": state[\"summary\"]\n        })\n        return {\n            \"summary\": result[\"edited_summary\"]\n        }\n\n    # Simulate downstream use of the edited summary\n    def downstream_use(state: State) -> State:\n        print(f\"✅ Using edited summary: {state['summary']}\")\n        return state\n\n    # Build the graph\n    builder = StateGraph(State)\n    builder.add_node(\"generate_summary\", generate_summary)\n    builder.add_node(\"human_review_edit\", human_review_edit)\n    builder.add_node(\"downstream_use\", downstream_use)\n\n    builder.set_entry_point(\"generate_summary\")\n    builder.add_edge(\"generate_summary\", \"human_review_edit\")\n    builder.add_edge(\"human_review_edit\", \"downstream_use\")\n    builder.add_edge(\"downstream_use\", END)\n\n    # Set up in-memory checkpointing for interrupt support\n    checkpointer = MemorySaver()\n    graph = builder.compile(checkpointer=checkpointer)\n\n    # Invoke the graph until it hits the interrupt\n    config = {\"configurable\": {\"thread_id\": uuid.uuid4()}}\n    result = graph.invoke({}, config=config)\n\n    # Output interrupt payload\n    print(result[\"__interrupt__\"])\n    # Example output:\n    # Interrupt(\n    #   value={\n    #     'task': 'Please review and edit the generated summary if necessary.',\n    #     'generated_summary': 'The cat sat on the mat and looked at the stars.'\n    #   },\n    #   resumable=True,\n    #   ...\n    # )\n\n    # Resume the graph with human-edited input\n    edited_summary = \"The cat lay on the rug, gazing peacefully at the night sky.\"\n    resumed_result = graph.invoke(\n        Command(resume={\"edited_summary\": edited_summary}),\n        config=config\n    )\n    print(resumed_result)\n    ```\n\n### Review tool calls\n\n<figure markdown=\"1\">\n![image](../../concepts/img/human_in_the_loop/tool-call-review.png){: style=\"max-height:400px\"}\n<figcaption>A human can review and edit the output from the LLM before proceeding. This is particularly\ncritical in applications where the tool calls requested by the LLM may be sensitive or require human oversight.\n\u003c/figcaption>\n\u003c/figure>\n\nTo add a human approval step to a tool:\n\n1. Use `interrupt()` in the tool to pause execution.\n2. Resume with a `Command(resume=...)` to continue based on human input.\n\n<sup><i>API Reference: <a href=\"https://langchain-ai.github.io/langgraph/reference/checkpoints/#langgraph.checkpoint.memory.InMemorySaver\">InMemorySaver\u003c/a> | <a href=\"https://langchain-ai.github.io/langgraph/reference/types/#langgraph.types.interrupt\">interrupt\u003c/a> | <a href=\"https://langchain-ai.github.io/langgraph/reference/prebuilt/#langgraph.prebuilt.chat_agent_executor.create_react_agent\">create_react_agent\u003c/a>\u003c/i>\u003c/sup>\n\n```python hl_lines=\"8 20 25\"\nfrom langgraph.checkpoint.memory import InMemorySaver\nfrom langgraph.types import interrupt\nfrom langgraph.prebuilt import create_react_agent\n\n# An example of a sensitive tool that requires human review / approval\ndef book_hotel(hotel_name: str):\n    \"\"\"Book a hotel\"\"\"\n    response = interrupt(  # (1)!\n        f\"Trying to call `book_hotel` with args {{'hotel_name': {hotel_name}}}. \"\n        \"Please approve or suggest edits.\"\n    )\n    if response[\"type\"] == \"accept\":\n        pass\n    elif response[\"type\"] == \"edit\":\n        hotel_name = response[\"args\"][\"hotel_name\"]\n    else:\n        raise ValueError(f\"Unknown response type: {response['type']}\")\n    return f\"Successfully booked a stay at {hotel_name}.\"\n\ncheckpointer = InMemorySaver() # (2)!\n\nagent = create_react_agent(\n    model=\"anthropic:claude-3-5-sonnet-latest\",\n    tools=[book_hotel],\n    checkpointer=checkpointer, # (3)!\n)\n```\n\n1. The [`interrupt` function][langgraph.types.interrupt] pauses the agent graph at a specific node. In this case, we call `interrupt()` at the beginning of the tool function, which pauses the graph at the node that executes the tool. The information inside `interrupt()` (e.g., tool calls) can be presented to a human, and the graph can be resumed with the user input (tool call approval, edit or feedback).\n2. The `InMemorySaver` is used to store the agent state at every step in the tool calling loop. This enables [short-term memory](../memory/add-memory.md#add-short-term-memory) and [human-in-the-loop](../../concepts/human_in_the_loop.md) capabilities. In this example, we use `InMemorySaver` to store the agent state in memory. In a production application, the agent state will be stored in a database.\n3. Initialize the agent with the `checkpointer`.\n\nRun the agent with the `stream()` method, passing the `config` object to specify the thread ID. This allows the agent to resume the same conversation on future invocations.\n\n```python hl_lines=\"3 9\"\nconfig = {\n   \"configurable\": {\n      \"thread_id\": \"1\"\n   }\n}\n\nfor chunk in agent.stream(\n    {\"messages\": [{\"role\": \"user\", \"content\": \"book a stay at McKittrick hotel\"}]},\n    config\n):\n    print(chunk)\n    print(\"\\n\")\n```\n\n> You should see that the agent runs until it reaches the `interrupt()` call, at which point it pauses and waits for human input.\n\nResume the agent with a `Command(resume=...)` to continue based on human input.\n\n<sup><i>API Reference: <a href=\"https://langchain-ai.github.io/langgraph/reference/types/#langgraph.types.Command\">Command\u003c/a>\u003c/i>\u003c/sup>\n\n```python hl_lines=\"4\"\nfrom langgraph.types import Command\n\nfor chunk in agent.stream(\n    Command(resume={\"type\": \"accept\"}),  # (1)!\n    # Command(resume={\"type\": \"edit\", \"args\": {\"hotel_name\": \"McKittrick Hotel\"}}),\n    config\n):\n    print(chunk)\n    print(\"\\n\")\n```\n\n1. The [`interrupt` function][langgraph.types.interrupt] is used in conjunction with the [`Command`][langgraph.types.Command] object to resume the graph with a value provided by the human.\n\n### Add interrupts to any tool\n\nYou can create a wrapper to add interrupts to *any* tool. The example below provides a reference implementation compatible with [Agent Inbox UI](https://github.com/langchain-ai/agent-inbox) and [Agent Chat UI](https://github.com/langchain-ai/agent-chat-ui).\n\n```python title=\"Wrapper that adds human-in-the-loop to any tool\" hl_lines=\"37\"\nfrom typing import Callable\nfrom langchain_core.tools import BaseTool, tool as create_tool\nfrom langchain_core.runnables import RunnableConfig\nfrom langgraph.types import interrupt \nfrom langgraph.prebuilt.interrupt import HumanInterruptConfig, HumanInterrupt\n\ndef add_human_in_the_loop(\n    tool: Callable | BaseTool,\n    *,\n    interrupt_config: HumanInterruptConfig = None,\n) -> BaseTool:\n    \"\"\"Wrap a tool to support human-in-the-loop review.\"\"\" \n    if not isinstance(tool, BaseTool):\n        tool = create_tool(tool)\n\n    if interrupt_config is None:\n        interrupt_config = {\n            \"allow_accept\": True,\n            \"allow_edit\": True,\n            \"allow_respond\": True,\n        }\n\n    @create_tool(  # (1)!\n        tool.name,\n        description=tool.description,\n        args_schema=tool.args_schema\n    )\n    def call_tool_with_interrupt(config: RunnableConfig, **tool_input):\n        request: HumanInterrupt = {\n            \"action_request\": {\n                \"action\": tool.name,\n                \"args\": tool_input\n            },\n            \"config\": interrupt_config,\n            \"description\": \"Please review the tool call\"\n        }\n        response = interrupt([request])[0]  # (2)!\n        # approve the tool call\n        if response[\"type\"] == \"accept\":\n            tool_response = tool.invoke(tool_input, config)\n        # update tool call args\n        elif response[\"type\"] == \"edit\":\n            tool_input = response[\"args\"][\"args\"]\n            tool_response = tool.invoke(tool_input, config)\n        # respond to the LLM with user feedback\n        elif response[\"type\"] == \"response\":\n            user_feedback = response[\"args\"]\n            tool_response = user_feedback\n        else:\n            raise ValueError(f\"Unsupported interrupt response type: {response['type']}\")\n\n        return tool_response\n\n    return call_tool_with_interrupt\n```\n\n1. This wrapper creates a new tool that calls `interrupt()` **before** executing the wrapped tool.\n2. `interrupt()` is using special input and output format that's expected by [Agent Inbox UI](https://github.com/langchain-ai/agent-inbox):\n    - a list of [`HumanInterrupt`][langgraph.prebuilt.interrupt.HumanInterrupt] objects is sent to `AgentInbox` render interrupt information to the end user\n    - resume value is provided by `AgentInbox` as a list (i.e., `Command(resume=[...])`)\n\nYou can use the `add_human_in_the_loop` wrapper to add `interrupt()` to any tool without having to add it *inside* the tool:\n\n<sup><i>API Reference: <a href=\"https://langchain-ai.github.io/langgraph/reference/checkpoints/#langgraph.checkpoint.memory.InMemorySaver\">InMemorySaver\u003c/a> | <a href=\"https://langchain-ai.github.io/langgraph/reference/prebuilt/#langgraph.prebuilt.chat_agent_executor.create_react_agent\">create_react_agent\u003c/a>\u003c/i>\u003c/sup>\n\n```python hl_lines=\"4 14 16 24\"\nfrom langgraph.checkpoint.memory import InMemorySaver\nfrom langgraph.prebuilt import create_react_agent\n\ncheckpointer = InMemorySaver()\n\ndef book_hotel(hotel_name: str):\n   \"\"\"Book a hotel\"\"\"\n   return f\"Successfully booked a stay at {hotel_name}.\"\n\n\nagent = create_react_agent(\n    model=\"anthropic:claude-3-5-sonnet-latest\",\n    tools=[\n        add_human_in_the_loop(book_hotel), # (1)!\n    ],\n    checkpointer=checkpointer,\n)\n\nconfig = {\"configurable\": {\"thread_id\": \"1\"}}\n\n# Run the agent\nfor chunk in agent.stream(\n    {\"messages\": [{\"role\": \"user\", \"content\": \"book a stay at McKittrick hotel\"}]},\n    config\n):\n    print(chunk)\n    print(\"\\n\")\n```\n\n1. The `add_human_in_the_loop` wrapper is used to add `interrupt()` to the tool. This allows the agent to pause execution and wait for human input before proceeding with the tool call.\n\n> You should see that the agent runs until it reaches the `interrupt()` call, \n>  at which point it pauses and waits for human input.\n\nResume the agent with a `Command(resume=...)`  to continue based on human input.\n\n<sup><i>API Reference: <a href=\"https://langchain-ai.github.io/langgraph/reference/types/#langgraph.types.Command\">Command\u003c/a>\u003c/i>\u003c/sup>\n\n```python hl_lines=\"4\"\nfrom langgraph.types import Command \n\nfor chunk in agent.stream(\n    Command(resume=[{\"type\": \"accept\"}]),\n    # Command(resume=[{\"type\": \"edit\", \"args\": {\"args\": {\"hotel_name\": \"McKittrick Hotel\"}}}]),\n    config\n):\n    print(chunk)\n    print(\"\\n\")\n```\n\n### Validate human input\n\nIf you need to validate the input provided by the human within the graph itself (rather than on the client side), you can achieve this by using multiple interrupt calls within a single node.\n\n<sup><i>API Reference: <a href=\"https://langchain-ai.github.io/langgraph/reference/types/#langgraph.types.interrupt\">interrupt\u003c/a>\u003c/i>\u003c/sup>\n\n```python\nfrom langgraph.types import interrupt\n\ndef human_node(state: State):\n    \"\"\"Human node with validation.\"\"\"\n    question = \"What is your age?\"\n\n    while True:\n        answer = interrupt(question)\n\n        # Validate answer, if the answer isn't valid ask for input again.\n        if not isinstance(answer, int) or answer < 0:\n            question = f\"'{answer} is not a valid age. What is your age?\"\n            answer = None\n            continue\n        else:\n            # If the answer is valid, we can proceed.\n            break\n            \n    print(f\"The human in the loop is {answer} years old.\")\n    return {\n        \"age\": answer\n    }\n```\n\n??? example \"Extended example: validating user input\"\n\n    ```python\n    from typing import TypedDict\n    import uuid\n\n    from langgraph.constants import START, END\n    from langgraph.graph import StateGraph\n    from langgraph.types import interrupt, Command\n    from langgraph.checkpoint.memory import MemorySaver\n\n    # Define graph state\n    class State(TypedDict):\n        age: int\n\n    # Node that asks for human input and validates it\n    def get_valid_age(state: State) -> State:\n        prompt = \"Please enter your age (must be a non-negative integer).\"\n\n        while True:\n            user_input = interrupt(prompt)\n\n            # Validate the input\n            try:\n                age = int(user_input)\n                if age < 0:\n                    raise ValueError(\"Age must be non-negative.\")\n                break  # Valid input received\n            except (ValueError, TypeError):\n                prompt = f\"'{user_input}' is not valid. Please enter a non-negative integer for age.\"\n\n        return {\"age\": age}\n\n    # Node that uses the valid input\n    def report_age(state: State) -> State:\n        print(f\"✅ Human is {state['age']} years old.\")\n        return state\n\n    # Build the graph\n    builder = StateGraph(State)\n    builder.add_node(\"get_valid_age\", get_valid_age)\n    builder.add_node(\"report_age\", report_age)\n\n    builder.set_entry_point(\"get_valid_age\")\n    builder.add_edge(\"get_valid_age\", \"report_age\")\n    builder.add_edge(\"report_age\", END)\n\n    # Create the graph with a memory checkpointer\n    checkpointer = MemorySaver()\n    graph = builder.compile(checkpointer=checkpointer)\n\n    # Run the graph until the first interrupt\n    config = {\"configurable\": {\"thread_id\": uuid.uuid4()}}\n    result = graph.invoke({}, config=config)\n    print(result[\"__interrupt__\"])  # First prompt: \"Please enter your age...\"\n\n    # Simulate an invalid input (e.g., string instead of integer)\n    result = graph.invoke(Command(resume=\"not a number\"), config=config)\n    print(result[\"__interrupt__\"])  # Follow-up prompt with validation message\n\n    # Simulate a second invalid input (e.g., negative number)\n    result = graph.invoke(Command(resume=\"-10\"), config=config)\n    print(result[\"__interrupt__\"])  # Another retry\n\n    # Provide valid input\n    final_result = graph.invoke(Command(resume=\"25\"), config=config)\n    print(final_result)  # Should include the valid age\n    ```\n\n## Debug with interrupts\n\nTo debug and test a graph, use [static interrupts](../../concepts/human_in_the_loop.md#key-capabilities) (also known as static breakpoints) to step through the graph execution one node at a time or to pause the graph execution at specific nodes. Static interrupts are triggered at defined points either before or after a node executes. You can set static interrupts by specifying `interrupt_before` and `interrupt_after` at compile time or run time.\n\n!!! warning\n\n    Static interrupts are **not** recommended for human-in-the-loop workflows. Use [dynamic interrupts](#pause-using-interrupt) instead.\n\n=== \"Compile time\"\n\n    ```python hl_lines=\"1 2 3\"\n    graph = graph_builder.compile( # (1)!\n        interrupt_before=[\"node_a\"], # (2)!\n        interrupt_after=[\"node_b\", \"node_c\"], # (3)!\n        checkpointer=checkpointer, # (4)!\n    )\n\n    config = {\n        \"configurable\": {\n            \"thread_id\": \"some_thread\"\n        }\n    }\n\n    # Run the graph until the breakpoint\n    graph.invoke(inputs, config=thread_config) # (5)!\n\n    # Resume the graph\n    graph.invoke(None, config=thread_config) # (6)!\n    ```\n\n    1. The breakpoints are set during `compile` time.\n    2. `interrupt_before` specifies the nodes where execution should pause before the node is executed.\n    3. `interrupt_after` specifies the nodes where execution should pause after the node is executed.\n    4. A checkpointer is required to enable breakpoints.\n    5. The graph is run until the first breakpoint is hit.\n    6. The graph is resumed by passing in `None` for the input. This will run the graph until the next breakpoint is hit.\n\n=== \"Run time\"\n\n    ```python hl_lines=\"1 3 4\"\n    graph.invoke( # (1)!\n        inputs, \n        interrupt_before=[\"node_a\"], # (2)!\n        interrupt_after=[\"node_b\", \"node_c\"] # (3)!\n        config={\n            \"configurable\": {\"thread_id\": \"some_thread\"}\n        }, \n    )\n\n    config = {\n        \"configurable\": {\n            \"thread_id\": \"some_thread\"\n        }\n    }\n\n    # Run the graph until the breakpoint\n    graph.invoke(inputs, config=config) # (4)!\n\n    # Resume the graph\n    graph.invoke(None, config=config) # (5)!\n    ```\n\n    1. `graph.invoke` is called with the `interrupt_before` and `interrupt_after` parameters. This is a run-time configuration and can be changed for every invocation.\n    2. `interrupt_before` specifies the nodes where execution should pause before the node is executed.\n    3. `interrupt_after` specifies the nodes where execution should pause after the node is executed.\n    4. The graph is run until the first breakpoint is hit.\n    5. The graph is resumed by passing in `None` for the input. This will run the graph until the next breakpoint is hit.\n\n    !!! note\n\n        You cannot set static breakpoints at runtime for **sub-graphs**.\n        If you have a sub-graph, you must set the breakpoints at compilation time.\n\n??? example \"Setting static breakpoints\"\n\n    ```python\n    from IPython.display import Image, display\n    from typing_extensions import TypedDict\n    \n    from langgraph.checkpoint.memory import InMemorySaver \n    from langgraph.graph import StateGraph, START, END\n    \n    \n    class State(TypedDict):\n        input: str\n    \n    \n    def step_1(state):\n        print(\"---Step 1---\")\n        pass\n    \n    \n    def step_2(state):\n        print(\"---Step 2---\")\n        pass\n    \n    \n    def step_3(state):\n        print(\"---Step 3---\")\n        pass\n    \n    \n    builder = StateGraph(State)\n    builder.add_node(\"step_1\", step_1)\n    builder.add_node(\"step_2\", step_2)\n    builder.add_node(\"step_3\", step_3)\n    builder.add_edge(START, \"step_1\")\n    builder.add_edge(\"step_1\", \"step_2\")\n    builder.add_edge(\"step_2\", \"step_3\")\n    builder.add_edge(\"step_3\", END)\n    \n    # Set up a checkpointer \n    checkpointer = InMemorySaver() # (1)!\n    \n    graph = builder.compile(\n        checkpointer=checkpointer, # (2)!\n        interrupt_before=[\"step_3\"] # (3)!\n    )\n    \n    # View\n    display(Image(graph.get_graph().draw_mermaid_png()))\n    \n    \n    # Input\n    initial_input = {\"input\": \"hello world\"}\n    \n    # Thread\n    thread = {\"configurable\": {\"thread_id\": \"1\"}}\n    \n    # Run the graph until the first interruption\n    for event in graph.stream(initial_input, thread, stream_mode=\"values\"):\n        print(event)\n        \n    # This will run until the breakpoint\n    # You can get the state of the graph at this point\n    print(graph.get_state(config))\n    \n    # You can continue the graph execution by passing in `None` for the input\n    for event in graph.stream(None, thread, stream_mode=\"values\"):\n        print(event)\n    ```\n\n### Use static interrupts in LangGraph Studio\n\nYou can use [LangGraph Studio](../../concepts/langgraph_studio.md) to debug your graph. You can set static breakpoints in the UI and then run the graph. You can also use the UI to inspect the graph state at any point in the execution.\n\n![image](../../concepts/img/human_in_the_loop/static-interrupt.png){: style=\"max-height:400px\"}\n\nLangGraph Studio is free with [locally deployed applications](../../tutorials/langgraph-platform/local-server.md) using `langgraph dev`. \n\n## Considerations\n\nWhen using human-in-the-loop, there are some considerations to keep in mind.\n\n### Using with code with side-effects\n\nPlace code with side effects, such as API calls, after the `interrupt` or in a separate node to avoid duplication, as these are re-triggered every time the node is resumed.\n\n=== \"Side effects after interrupt\"\n\n    ```python\n    from langgraph.types import interrupt\n\n    def human_node(state: State):\n        \"\"\"Human node with validation.\"\"\"\n        \n        answer = interrupt(question)\n        \n        api_call(answer) # OK as it's after the interrupt\n    ```\n\n=== \"Side effects in a separate node\"\n\n    ```python\n    from langgraph.types import interrupt\n\n    def human_node(state: State):\n        \"\"\"Human node with validation.\"\"\"\n        \n        answer = interrupt(question)\n        \n        return {\n            \"answer\": answer\n        }\n\n    def api_call_node(state: State):\n        api_call(...) # OK as it's in a separate node\n    ```\n\n### Using with subgraphs called as functions\n\nWhen invoking a subgraph as a function, the parent graph will resume execution from the **beginning of the node** where the subgraph was invoked where the `interrupt` was triggered. Similarly, the **subgraph** will resume from the **beginning of the node** where the `interrupt()` function was called.\n\n```python\ndef node_in_parent_graph(state: State):\n    some_code()  # <-- This will re-execute when the subgraph is resumed.\n    # Invoke a subgraph as a function.\n    # The subgraph contains an `interrupt` call.\n    subgraph_result = subgraph.invoke(some_input)\n    ...\n```\n\n??? example \"Extended example: parent and subgraph execution flow\"\n\n    Say we have a parent graph with 3 nodes:\n\n    **Parent Graph**: `node_1` → `node_2` (subgraph call) → `node_3`\n\n    And the subgraph has 3 nodes, where the second node contains an `interrupt`:\n\n    **Subgraph**: `sub_node_1` → `sub_node_2` (`interrupt`) → `sub_node_3`\n\n    When resuming the graph, the execution will proceed as follows:\n\n    1. **Skip `node_1`** in the parent graph (already executed, graph state was saved in snapshot).\n    2. **Re-execute `node_2`** in the parent graph from the start.\n    3. **Skip `sub_node_1`** in the subgraph (already executed, graph state was saved in snapshot).\n    4. **Re-execute `sub_node_2`** in the subgraph from the beginning.\n    5. Continue with `sub_node_3` and subsequent nodes.\n\n    Here is abbreviated example code that you can use to understand how subgraphs work with interrupts.\n    It counts the number of times each node is entered and prints the count.\n\n    ```python\n    import uuid\n    from typing import TypedDict\n\n    from langgraph.graph import StateGraph\n    from langgraph.constants import START\n    from langgraph.types import interrupt, Command\n    from langgraph.checkpoint.memory import MemorySaver\n\n\n    class State(TypedDict):\n        \"\"\"The graph state.\"\"\"\n        state_counter: int\n\n\n    counter_node_in_subgraph = 0\n\n    def node_in_subgraph(state: State):\n        \"\"\"A node in the sub-graph.\"\"\"\n        global counter_node_in_subgraph\n        counter_node_in_subgraph += 1  # This code will **NOT** run again!\n        print(f\"Entered `node_in_subgraph` a total of {counter_node_in_subgraph} times\")\n\n    counter_human_node = 0\n\n    def human_node(state: State):\n        global counter_human_node\n        counter_human_node += 1 # This code will run again!\n        print(f\"Entered human_node in sub-graph a total of {counter_human_node} times\")\n        answer = interrupt(\"what is your name?\")\n        print(f\"Got an answer of {answer}\")\n\n\n    checkpointer = MemorySaver()\n\n    subgraph_builder = StateGraph(State)\n    subgraph_builder.add_node(\"some_node\", node_in_subgraph)\n    subgraph_builder.add_node(\"human_node\", human_node)\n    subgraph_builder.add_edge(START, \"some_node\")\n    subgraph_builder.add_edge(\"some_node\", \"human_node\")\n    subgraph = subgraph_builder.compile(checkpointer=checkpointer)\n\n\n    counter_parent_node = 0\n\n    def parent_node(state: State):\n        \"\"\"This parent node will invoke the subgraph.\"\"\"\n        global counter_parent_node\n\n        counter_parent_node += 1 # This code will run again on resuming!\n        print(f\"Entered `parent_node` a total of {counter_parent_node} times\")\n\n        # Please note that we're intentionally incrementing the state counter\n        # in the graph state as well to demonstrate that the subgraph update\n        # of the same key will not conflict with the parent graph (until\n        subgraph_state = subgraph.invoke(state)\n        return subgraph_state\n\n\n    builder = StateGraph(State)\n    builder.add_node(\"parent_node\", parent_node)\n    builder.add_edge(START, \"parent_node\")\n\n    # A checkpointer must be enabled for interrupts to work!\n    checkpointer = MemorySaver()\n    graph = builder.compile(checkpointer=checkpointer)\n\n    config = {\n        \"configurable\": {\n          \"thread_id\": uuid.uuid4(),\n        }\n    }\n\n    for chunk in graph.stream({\"state_counter\": 1}, config):\n        print(chunk)\n\n    print('--- Resuming ---')\n\n    for chunk in graph.stream(Command(resume=\"35\"), config):\n        print(chunk)\n    ```\n\n    This will print out\n\n    ```pycon\n    Entered `parent_node` a total of 1 times\n    Entered `node_in_subgraph` a total of 1 times\n    Entered human_node in sub-graph a total of 1 times\n    {'__interrupt__': (Interrupt(value='what is your name?', resumable=True, ns=['parent_node:4c3a0248-21f0-1287-eacf-3002bc304db4', 'human_node:2fe86d52-6f70-2a3f-6b2f-b1eededd6348'], when='during'),)}\n    --- Resuming ---\n    Entered `parent_node` a total of 2 times\n    Entered human_node in sub-graph a total of 2 times\n    Got an answer of 35\n    {'parent_node': {'state_counter': 1}}\n    ```\n\n### Using multiple interrupts\n\nUsing multiple interrupts within a **single** node can be helpful for patterns like [validating human input](#validate-human-input). However, using multiple interrupts in the same node can lead to unexpected behavior if not handled carefully.\n\nWhen a node contains multiple interrupt calls, LangGraph keeps a list of resume values specific to the task executing the node. Whenever execution resumes, it starts at the beginning of the node. For each interrupt encountered, LangGraph checks if a matching value exists in the task's resume list. Matching is **strictly index-based**, so the order of interrupt calls within the node is critical.\n\nTo avoid issues, refrain from dynamically changing the node's structure between executions. This includes adding, removing, or reordering interrupt calls, as such changes can result in mismatched indices. These problems often arise from unconventional patterns, such as mutating state via `Command(resume=..., update=SOME_STATE_MUTATION)` or relying on global variables to modify the node’s structure dynamically.\n\n??? example \"Extended example: incorrect code that introduces non-determinism\"\n\n    ```python\n    import uuid\n    from typing import TypedDict, Optional\n\n    from langgraph.graph import StateGraph\n    from langgraph.constants import START \n    from langgraph.types import interrupt, Command\n    from langgraph.checkpoint.memory import MemorySaver\n\n\n    class State(TypedDict):\n        \"\"\"The graph state.\"\"\"\n\n        age: Optional[str]\n        name: Optional[str]\n\n\n    def human_node(state: State):\n        if not state.get('name'):\n            name = interrupt(\"what is your name?\")\n        else:\n            name = \"N/A\"\n\n        if not state.get('age'):\n            age = interrupt(\"what is your age?\")\n        else:\n            age = \"N/A\"\n            \n        print(f\"Name: {name}. Age: {age}\")\n        \n        return {\n            \"age\": age,\n            \"name\": name,\n        }\n\n\n    builder = StateGraph(State)\n    builder.add_node(\"human_node\", human_node)\n    builder.add_edge(START, \"human_node\")\n\n    # A checkpointer must be enabled for interrupts to work!\n    checkpointer = MemorySaver()\n    graph = builder.compile(checkpointer=checkpointer)\n\n    config = {\n        \"configurable\": {\n            \"thread_id\": uuid.uuid4(),\n        }\n    }\n\n    for chunk in graph.stream({\"age\": None, \"name\": None}, config):\n        print(chunk)\n\n    for chunk in graph.stream(Command(resume=\"John\", update={\"name\": \"foo\"}), config):\n        print(chunk)\n    ```\n\n    ```pycon\n    {'__interrupt__': (Interrupt(value='what is your name?', resumable=True, ns=['human_node:3a007ef9-c30d-c357-1ec1-86a1a70d8fba'], when='during'),)}\n    Name: N/A. Age: John\n    {'human_node': {'age': 'John', 'name': 'N/A'}}\n    ```\n", "title": "Add human intervention", "url": "how-tos/human_in_the_loop/add-human-in-the-loop/"}</script></meta></head>
<body data-md-color-accent="gray" data-md-color-primary="white" data-md-color-scheme="default" dir="ltr">
<!-- Google Tag Manager (noscript) -->
<noscript><iframe height="0" src="https://www.googletagmanager.com/ns.html?id=GTM-T35S4S46" style="display:none;visibility:hidden" width="0"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#enable-human-intervention">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
<aside class="md-banner">
<div class="md-banner__inner md-grid md-typeset">
<button aria-label="Don't show this again" class="md-banner__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
            
            
Our <a href="https://academy.langchain.com/courses/ambient-agents/?utm_medium=internal&amp;utm_source=docs&amp;utm_campaign=q2-2025_ambient-agents_co" target="_blank">Building Ambient Agents with LangGraph</a> course is now available on LangChain Academy!

          </div>
<script>var el=document.querySelector("[data-md-component=announce]");if(el){var content=el.querySelector(".md-typeset");__md_hash(content.innerHTML)===__md_get("__announce")&&(el.hidden=!0)}</script>
</aside>
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="LangGraph" class="md-header__button md-logo" data-md-component="logo" href="../../.." title="LangGraph">
<img alt="logo" class="logo-light" src="../../../static/wordmark_dark.svg"/>
<img alt="logo" class="logo-dark" src="../../../static/wordmark_light.svg"/>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            LangGraph
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Add human intervention
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="gray" data-md-color-media="" data-md-color-primary="white" data-md-color-scheme="default" id="__palette_0" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="white" data-md-color-media="" data-md-color-primary="grey" data-md-color-scheme="slate" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_0" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"></path></svg>
</label>
</form>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<a aria-label="Share" class="md-search__icon md-icon" data-clipboard="" data-clipboard-text="" data-md-component="search-share" href="javascript:void(0)" tabindex="-1" title="Share">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"></path></svg>
</a>
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
<div class="md-search__suggest" data-md-component="search-suggest"></div>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/langchain-ai/langgraph" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<nav aria-label="Tabs" class="md-tabs" data-md-component="tabs">
<div class="md-grid">
<ul class="md-tabs__list">
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../..">
          
  
  
    
  
  Get started

        </a>
</li>
<li class="md-tabs__item md-tabs__item--active">
<a class="md-tabs__link" href="../../../guides/">
          
  
  
    
  
  Guides

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../reference/">
          
  
  
    
  
  Reference

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../examples/">
          
  
  
    
  
  Examples

        </a>
</li>
<li class="md-tabs__item">
<a class="md-tabs__link" href="../../../additional-resources/">
          
  
  
    
  
  Additional resources

        </a>
</li>
</ul>
</div>
</nav>
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--lifted" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="LangGraph" class="md-nav__button md-logo" data-md-component="logo" href="../../.." title="LangGraph">
<img alt="logo" class="logo-light" src="../../../static/wordmark_dark.svg"/>
<img alt="logo" class="logo-dark" src="../../../static/wordmark_light.svg"/>
</a>
    LangGraph
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/langchain-ai/langgraph" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../..">
<span class="md-ellipsis">
    Get started
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_2" type="checkbox"/>
<div class="md-nav__link md-nav__container">
<a class="md-nav__link" href="../../../guides/">
<span class="md-ellipsis">
    Guides
    
  </span>
</a>
<label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
<span class="md-nav__icon md-icon"></span>
</label>
</div>
<nav aria-expanded="true" aria-labelledby="__nav_2_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_2">
<span class="md-nav__icon md-icon"></span>
            Guides
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="">
<span class="md-ellipsis">
    Agent development
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_2">
<span class="md-nav__icon md-icon"></span>
            Agent development
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../agents/overview/">
<span class="md-ellipsis">
    Overview
    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../agents/run_agents/">
<span class="md-ellipsis">
    Run an agent
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="">
<span class="md-ellipsis">
    LangGraph APIs
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_3">
<span class="md-nav__icon md-icon"></span>
            LangGraph APIs
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../../concepts/low_level/">
<span class="md-ellipsis">
    Graph API
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../../concepts/functional_api/">
<span class="md-ellipsis">
    Functional API
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/pregel/">
<span class="md-ellipsis">
    Runtime
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_2_4" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="">
<span class="md-ellipsis">
    Core capabilities
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_2_4_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_4">
<span class="md-nav__icon md-icon"></span>
            Core capabilities
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../../concepts/streaming/">
<span class="md-ellipsis">
    Streaming
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../../concepts/persistence/">
<span class="md-ellipsis">
    Persistence
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../../concepts/durable_execution/">
<span class="md-ellipsis">
    Durable execution
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../../concepts/memory/">
<span class="md-ellipsis">
    Memory
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../../agents/context/">
<span class="md-ellipsis">
    Context
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../../agents/models/">
<span class="md-ellipsis">
    Models
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../../concepts/tools/">
<span class="md-ellipsis">
    Tools
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_2_4_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_4_8" id="__nav_2_4_8_label" tabindex="0">
<span class="md-ellipsis">
    Human-in-the-loop
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_2_4_8_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_2_4_8">
<span class="md-nav__icon md-icon"></span>
            Human-in-the-loop
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../../concepts/human_in_the_loop/">
<span class="md-ellipsis">
    Overview
    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    Add human intervention
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    Add human intervention
    
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#pause-using-interrupt">
<span class="md-ellipsis">
      Pause using interrupt
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#resume-using-the-command-primitive">
<span class="md-ellipsis">
      Resume using the Command primitive
    </span>
</a>
<nav aria-label="Resume using the Command primitive" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#resume-multiple-interrupts-with-one-invocation">
<span class="md-ellipsis">
      Resume multiple interrupts with one invocation
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#common-patterns">
<span class="md-ellipsis">
      Common patterns
    </span>
</a>
<nav aria-label="Common patterns" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#approve-or-reject">
<span class="md-ellipsis">
      Approve or reject
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#review-and-edit-state">
<span class="md-ellipsis">
      Review and edit state
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#review-tool-calls">
<span class="md-ellipsis">
      Review tool calls
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#add-interrupts-to-any-tool">
<span class="md-ellipsis">
      Add interrupts to any tool
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#validate-human-input">
<span class="md-ellipsis">
      Validate human input
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#debug-with-interrupts">
<span class="md-ellipsis">
      Debug with interrupts
    </span>
</a>
<nav aria-label="Debug with interrupts" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#use-static-interrupts-in-langgraph-studio">
<span class="md-ellipsis">
      Use static interrupts in LangGraph Studio
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#considerations">
<span class="md-ellipsis">
      Considerations
    </span>
</a>
<nav aria-label="Considerations" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#using-with-code-with-side-effects">
<span class="md-ellipsis">
      Using with code with side-effects
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#using-with-subgraphs-called-as-functions">
<span class="md-ellipsis">
      Using with subgraphs called as functions
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#using-multiple-interrupts">
<span class="md-ellipsis">
      Using multiple interrupts
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../../cloud/how-tos/add-human-in-the-loop/">
<span class="md-ellipsis">
    Use Server API
    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../../concepts/time-travel/">
<span class="md-ellipsis">
    Time travel
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../../concepts/subgraphs/">
<span class="md-ellipsis">
    Subgraphs
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../../concepts/multi_agent/">
<span class="md-ellipsis">
    Multi-agent
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../../concepts/mcp/">
<span class="md-ellipsis">
    MCP
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../../concepts/tracing/">
<span class="md-ellipsis">
    Tracing
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--section md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_2_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="">
<span class="md-ellipsis">
    Platform-only capabilities
    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_2_5_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_2_5">
<span class="md-nav__icon md-icon"></span>
            Platform-only capabilities
          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../../concepts/langgraph_platform/">
<span class="md-ellipsis">
    LangGraph Platform
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../../concepts/auth/">
<span class="md-ellipsis">
    Authentication &amp; access control
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../../concepts/assistants/">
<span class="md-ellipsis">
    Assistants
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../../concepts/double_texting/">
<span class="md-ellipsis">
    Double-texting
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../../cloud/concepts/webhooks/">
<span class="md-ellipsis">
    Webhooks
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../../cloud/concepts/cron_jobs/">
<span class="md-ellipsis">
    Cron jobs
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../http/custom_lifespan/">
<span class="md-ellipsis">
    Server customization
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../../cloud/concepts/data_storage_and_privacy/">
<span class="md-ellipsis">
    Data management
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../../concepts/deployment_options/">
<span class="md-ellipsis">
    Deployment
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../../reference/">
<span class="md-ellipsis">
    Reference
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../../examples/">
<span class="md-ellipsis">
    Examples
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
<li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
<a class="md-nav__link" href="../../../additional-resources/">
<span class="md-ellipsis">
    Additional resources
    
  </span>
<span class="md-nav__icon md-icon"></span>
</a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#pause-using-interrupt">
<span class="md-ellipsis">
      Pause using interrupt
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#resume-using-the-command-primitive">
<span class="md-ellipsis">
      Resume using the Command primitive
    </span>
</a>
<nav aria-label="Resume using the Command primitive" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#resume-multiple-interrupts-with-one-invocation">
<span class="md-ellipsis">
      Resume multiple interrupts with one invocation
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#common-patterns">
<span class="md-ellipsis">
      Common patterns
    </span>
</a>
<nav aria-label="Common patterns" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#approve-or-reject">
<span class="md-ellipsis">
      Approve or reject
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#review-and-edit-state">
<span class="md-ellipsis">
      Review and edit state
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#review-tool-calls">
<span class="md-ellipsis">
      Review tool calls
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#add-interrupts-to-any-tool">
<span class="md-ellipsis">
      Add interrupts to any tool
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#validate-human-input">
<span class="md-ellipsis">
      Validate human input
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#debug-with-interrupts">
<span class="md-ellipsis">
      Debug with interrupts
    </span>
</a>
<nav aria-label="Debug with interrupts" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#use-static-interrupts-in-langgraph-studio">
<span class="md-ellipsis">
      Use static interrupts in LangGraph Studio
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#considerations">
<span class="md-ellipsis">
      Considerations
    </span>
</a>
<nav aria-label="Considerations" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#using-with-code-with-side-effects">
<span class="md-ellipsis">
      Using with code with side-effects
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#using-with-subgraphs-called-as-functions">
<span class="md-ellipsis">
      Using with subgraphs called as functions
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#using-multiple-interrupts">
<span class="md-ellipsis">
      Using multiple interrupts
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<div class="notebook-links">
</div>
<nav class="md-tags" hidden="">
<span class="md-tag">hil</span>
<span class="md-tag">human-in-the-loop</span>
<span class="md-tag">interrupt</span>
</nav>
<a class="md-content__button md-icon" href="https://github.com/langchain-ai/langgraph/edit/main/docs/docs/how-tos/human_in_the_loop/add-human-in-the-loop.md" rel="edit" title="Edit this page">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4zm10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"></path></svg>
</a>
<h1 id="enable-human-intervention">Enable human intervention<a class="headerlink" href="#enable-human-intervention" title="Permanent link">¶</a></h1>
<p>To review, edit, and approve tool calls in an agent or workflow, use interrupts to pause a graph and wait for human input. Interrupts use LangGraph's <a href="../../../concepts/persistence/">persistence</a> layer, which saves the graph state, to indefinitely pause graph execution until you resume.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>For more information about human-in-the-loop workflows, see the <a href="../../../concepts/human_in_the_loop/">Human-in-the-Loop</a> conceptual guide.</p>
</div>
<h2 id="pause-using-interrupt">Pause using <code>interrupt</code><a class="headerlink" href="#pause-using-interrupt" title="Permanent link">¶</a></h2>
<p><a href="../../../concepts/human_in_the_loop/#key-capabilities">Dynamic interrupts</a> (also known as dynamic breakpoints) are triggered based on the current state of the graph. You can set dynamic interrupts by calling <a class="autorefs autorefs-internal" href="../../../reference/types/#langgraph.types.interrupt" title='&lt;code class="doc-symbol doc-symbol-heading doc-symbol-function"&gt;&lt;/code&gt;            &lt;span class="doc doc-object-name doc-function-name"&gt;interrupt&lt;/span&gt;'><code>interrupt</code> function</a> in the appropriate place. The graph will pause, which allows for human intervention, and then resumes the graph with their input. It's useful for tasks like approvals, edits, or gathering additional context.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As of v1.0, <code>interrupt</code> is the recommended way to pause a graph. <code>NodeInterrupt</code> is deprecated and will be removed in v2.0.</p>
</div>
<p>To use <code>interrupt</code> in your graph, you need to:</p>
<ol>
<li><a href="../../../concepts/persistence/#checkpoints"><strong>Specify a checkpointer</strong></a> to save the graph state after each step.</li>
<li><strong>Call <code>interrupt()</code></strong> in the appropriate place. See the <a href="#common-patterns">Common Patterns</a> section for examples.</li>
<li><strong>Run the graph</strong> with a <a href="../../../concepts/persistence/#threads"><strong>thread ID</strong></a> until the <code>interrupt</code> is hit.</li>
<li><strong>Resume execution</strong> using <code>invoke</code>/<code>ainvoke</code>/<code>stream</code>/<code>astream</code> (see <a href="#resume-using-the-command-primitive"><strong>The <code>Command</code> primitive</strong></a>).</li>
</ol>
<p><sup><i>API Reference: <a href="https://langchain-ai.github.io/langgraph/reference/types/#langgraph.types.interrupt">interrupt</a> | <a href="https://langchain-ai.github.io/langgraph/reference/types/#langgraph.types.Command">Command</a></i></sup></p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-0-1"><a href="#__codelineno-0-1" id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="hll"><span class="kn">from</span><span class="w"> </span><span class="nn">langgraph.types</span><span class="w"> </span><span class="kn">import</span> <span class="n">interrupt</span><span class="p">,</span> <span class="n">Command</span>
</span></span><span id="__span-0-2"><a href="#__codelineno-0-2" id="__codelineno-0-2" name="__codelineno-0-2"></a>
</span><span id="__span-0-3"><a href="#__codelineno-0-3" id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="k">def</span><span class="w"> </span><span class="nf">human_node</span><span class="p">(</span><span class="n">state</span><span class="p">:</span> <span class="n">State</span><span class="p">):</span>
</span><span id="__span-0-4"><a href="#__codelineno-0-4" id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="hll">    <span class="n">value</span> <span class="o">=</span> <span class="n">interrupt</span><span class="p">(</span> <span class="c1"># (1)!</span>
</span></span><span id="__span-0-5"><a href="#__codelineno-0-5" id="__codelineno-0-5" name="__codelineno-0-5"></a>        <span class="p">{</span>
</span><span id="__span-0-6"><a href="#__codelineno-0-6" id="__codelineno-0-6" name="__codelineno-0-6"></a>            <span class="s2">"text_to_revise"</span><span class="p">:</span> <span class="n">state</span><span class="p">[</span><span class="s2">"some_text"</span><span class="p">]</span> <span class="c1"># (2)!</span>
</span><span id="__span-0-7"><a href="#__codelineno-0-7" id="__codelineno-0-7" name="__codelineno-0-7"></a>        <span class="p">}</span>
</span><span id="__span-0-8"><a href="#__codelineno-0-8" id="__codelineno-0-8" name="__codelineno-0-8"></a>    <span class="p">)</span>
</span><span id="__span-0-9"><a href="#__codelineno-0-9" id="__codelineno-0-9" name="__codelineno-0-9"></a>    <span class="k">return</span> <span class="p">{</span>
</span><span id="__span-0-10"><a href="#__codelineno-0-10" id="__codelineno-0-10" name="__codelineno-0-10"></a>        <span class="s2">"some_text"</span><span class="p">:</span> <span class="n">value</span> <span class="c1"># (3)!</span>
</span><span id="__span-0-11"><a href="#__codelineno-0-11" id="__codelineno-0-11" name="__codelineno-0-11"></a>    <span class="p">}</span>
</span><span id="__span-0-12"><a href="#__codelineno-0-12" id="__codelineno-0-12" name="__codelineno-0-12"></a>
</span><span id="__span-0-13"><a href="#__codelineno-0-13" id="__codelineno-0-13" name="__codelineno-0-13"></a>
</span><span id="__span-0-14"><a href="#__codelineno-0-14" id="__codelineno-0-14" name="__codelineno-0-14"></a><span class="n">graph</span> <span class="o">=</span> <span class="n">graph_builder</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">checkpointer</span><span class="o">=</span><span class="n">checkpointer</span><span class="p">)</span> <span class="c1"># (4)!</span>
</span><span id="__span-0-15"><a href="#__codelineno-0-15" id="__codelineno-0-15" name="__codelineno-0-15"></a>
</span><span id="__span-0-16"><a href="#__codelineno-0-16" id="__codelineno-0-16" name="__codelineno-0-16"></a><span class="c1"># Run the graph until the interrupt is hit.</span>
</span><span id="__span-0-17"><a href="#__codelineno-0-17" id="__codelineno-0-17" name="__codelineno-0-17"></a><span class="n">config</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"configurable"</span><span class="p">:</span> <span class="p">{</span><span class="s2">"thread_id"</span><span class="p">:</span> <span class="s2">"some_id"</span><span class="p">}}</span>
</span><span id="__span-0-18"><a href="#__codelineno-0-18" id="__codelineno-0-18" name="__codelineno-0-18"></a><span class="n">result</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">invoke</span><span class="p">({</span><span class="s2">"some_text"</span><span class="p">:</span> <span class="s2">"original text"</span><span class="p">},</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">)</span> <span class="c1"># (5)!</span>
</span><span id="__span-0-19"><a href="#__codelineno-0-19" id="__codelineno-0-19" name="__codelineno-0-19"></a><span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s1">'__interrupt__'</span><span class="p">])</span> <span class="c1"># (6)!</span>
</span><span id="__span-0-20"><a href="#__codelineno-0-20" id="__codelineno-0-20" name="__codelineno-0-20"></a><span class="c1"># &gt; [</span>
</span><span id="__span-0-21"><a href="#__codelineno-0-21" id="__codelineno-0-21" name="__codelineno-0-21"></a><span class="c1"># &gt;    Interrupt(</span>
</span><span id="__span-0-22"><a href="#__codelineno-0-22" id="__codelineno-0-22" name="__codelineno-0-22"></a><span class="c1"># &gt;       value={'text_to_revise': 'original text'}, </span>
</span><span id="__span-0-23"><a href="#__codelineno-0-23" id="__codelineno-0-23" name="__codelineno-0-23"></a><span class="c1"># &gt;       resumable=True,</span>
</span><span id="__span-0-24"><a href="#__codelineno-0-24" id="__codelineno-0-24" name="__codelineno-0-24"></a><span class="c1"># &gt;       ns=['human_node:6ce9e64f-edef-fe5d-f7dc-511fa9526960']</span>
</span><span id="__span-0-25"><a href="#__codelineno-0-25" id="__codelineno-0-25" name="__codelineno-0-25"></a><span class="c1"># &gt;    )</span>
</span><span id="__span-0-26"><a href="#__codelineno-0-26" id="__codelineno-0-26" name="__codelineno-0-26"></a><span class="c1"># &gt; ] </span>
</span><span id="__span-0-27"><a href="#__codelineno-0-27" id="__codelineno-0-27" name="__codelineno-0-27"></a>
</span><span id="__span-0-28"><a href="#__codelineno-0-28" id="__codelineno-0-28" name="__codelineno-0-28"></a><span class="hll"><span class="nb">print</span><span class="p">(</span><span class="n">graph</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">Command</span><span class="p">(</span><span class="n">resume</span><span class="o">=</span><span class="s2">"Edited text"</span><span class="p">),</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">))</span> <span class="c1"># (7)!</span>
</span></span><span id="__span-0-29"><a href="#__codelineno-0-29" id="__codelineno-0-29" name="__codelineno-0-29"></a><span class="c1"># &gt; {'some_text': 'Edited text'}</span>
</span></code></pre></div>
<ol>
<li><code>interrupt(...)</code> pauses execution at <code>human_node</code>, surfacing the given payload to a human.</li>
<li>Any JSON serializable value can be passed to the <code>interrupt</code> function. Here, a dict containing the text to revise.</li>
<li>Once resumed, the return value of <code>interrupt(...)</code> is the human-provided input, which is used to update the state.</li>
<li>A checkpointer is required to persist graph state. In production, this should be durable (e.g., backed by a database).</li>
<li>The graph is invoked with some initial state.</li>
<li>When the graph hits the interrupt, it returns an <code>Interrupt</code> object with the payload and metadata.</li>
<li>The graph is resumed with a <code>Command(resume=...)</code>, injecting the human's input and continuing execution.</li>
</ol>
<details class="example">
<summary>Extended example: using <code>interrupt</code></summary>
<div class="language-python highlight"><pre><span></span><code><span id="__span-1-1"><a href="#__codelineno-1-1" id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">TypedDict</span>
</span><span id="__span-1-2"><a href="#__codelineno-1-2" id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">uuid</span>
</span><span id="__span-1-3"><a href="#__codelineno-1-3" id="__codelineno-1-3" name="__codelineno-1-3"></a>
</span><span id="__span-1-4"><a href="#__codelineno-1-4" id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="kn">from</span><span class="w"> </span><span class="nn">langgraph.checkpoint.memory</span><span class="w"> </span><span class="kn">import</span> <span class="n">InMemorySaver</span>
</span><span id="__span-1-5"><a href="#__codelineno-1-5" id="__codelineno-1-5" name="__codelineno-1-5"></a><span class="kn">from</span><span class="w"> </span><span class="nn">langgraph.constants</span><span class="w"> </span><span class="kn">import</span> <span class="n">START</span>
</span><span id="__span-1-6"><a href="#__codelineno-1-6" id="__codelineno-1-6" name="__codelineno-1-6"></a><span class="kn">from</span><span class="w"> </span><span class="nn">langgraph.graph</span><span class="w"> </span><span class="kn">import</span> <span class="n">StateGraph</span>
</span><span id="__span-1-7"><a href="#__codelineno-1-7" id="__codelineno-1-7" name="__codelineno-1-7"></a><span class="hll"><span class="kn">from</span><span class="w"> </span><span class="nn">langgraph.types</span><span class="w"> </span><span class="kn">import</span> <span class="n">interrupt</span><span class="p">,</span> <span class="n">Command</span>
</span></span><span id="__span-1-8"><a href="#__codelineno-1-8" id="__codelineno-1-8" name="__codelineno-1-8"></a>
</span><span id="__span-1-9"><a href="#__codelineno-1-9" id="__codelineno-1-9" name="__codelineno-1-9"></a><span class="k">class</span><span class="w"> </span><span class="nc">State</span><span class="p">(</span><span class="n">TypedDict</span><span class="p">):</span>
</span><span id="__span-1-10"><a href="#__codelineno-1-10" id="__codelineno-1-10" name="__codelineno-1-10"></a>    <span class="n">some_text</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="__span-1-11"><a href="#__codelineno-1-11" id="__codelineno-1-11" name="__codelineno-1-11"></a>
</span><span id="__span-1-12"><a href="#__codelineno-1-12" id="__codelineno-1-12" name="__codelineno-1-12"></a><span class="k">def</span><span class="w"> </span><span class="nf">human_node</span><span class="p">(</span><span class="n">state</span><span class="p">:</span> <span class="n">State</span><span class="p">):</span>
</span><span id="__span-1-13"><a href="#__codelineno-1-13" id="__codelineno-1-13" name="__codelineno-1-13"></a><span class="hll">    <span class="n">value</span> <span class="o">=</span> <span class="n">interrupt</span><span class="p">(</span> <span class="c1"># (1)!</span>
</span></span><span id="__span-1-14"><a href="#__codelineno-1-14" id="__codelineno-1-14" name="__codelineno-1-14"></a>        <span class="p">{</span>
</span><span id="__span-1-15"><a href="#__codelineno-1-15" id="__codelineno-1-15" name="__codelineno-1-15"></a>            <span class="s2">"text_to_revise"</span><span class="p">:</span> <span class="n">state</span><span class="p">[</span><span class="s2">"some_text"</span><span class="p">]</span> <span class="c1"># (2)!</span>
</span><span id="__span-1-16"><a href="#__codelineno-1-16" id="__codelineno-1-16" name="__codelineno-1-16"></a>        <span class="p">}</span>
</span><span id="__span-1-17"><a href="#__codelineno-1-17" id="__codelineno-1-17" name="__codelineno-1-17"></a>    <span class="p">)</span>
</span><span id="__span-1-18"><a href="#__codelineno-1-18" id="__codelineno-1-18" name="__codelineno-1-18"></a>    <span class="k">return</span> <span class="p">{</span>
</span><span id="__span-1-19"><a href="#__codelineno-1-19" id="__codelineno-1-19" name="__codelineno-1-19"></a>        <span class="s2">"some_text"</span><span class="p">:</span> <span class="n">value</span> <span class="c1"># (3)!</span>
</span><span id="__span-1-20"><a href="#__codelineno-1-20" id="__codelineno-1-20" name="__codelineno-1-20"></a>    <span class="p">}</span>
</span><span id="__span-1-21"><a href="#__codelineno-1-21" id="__codelineno-1-21" name="__codelineno-1-21"></a>
</span><span id="__span-1-22"><a href="#__codelineno-1-22" id="__codelineno-1-22" name="__codelineno-1-22"></a>
</span><span id="__span-1-23"><a href="#__codelineno-1-23" id="__codelineno-1-23" name="__codelineno-1-23"></a><span class="c1"># Build the graph</span>
</span><span id="__span-1-24"><a href="#__codelineno-1-24" id="__codelineno-1-24" name="__codelineno-1-24"></a><span class="n">graph_builder</span> <span class="o">=</span> <span class="n">StateGraph</span><span class="p">(</span><span class="n">State</span><span class="p">)</span>
</span><span id="__span-1-25"><a href="#__codelineno-1-25" id="__codelineno-1-25" name="__codelineno-1-25"></a><span class="n">graph_builder</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">"human_node"</span><span class="p">,</span> <span class="n">human_node</span><span class="p">)</span>
</span><span id="__span-1-26"><a href="#__codelineno-1-26" id="__codelineno-1-26" name="__codelineno-1-26"></a><span class="n">graph_builder</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">START</span><span class="p">,</span> <span class="s2">"human_node"</span><span class="p">)</span>
</span><span id="__span-1-27"><a href="#__codelineno-1-27" id="__codelineno-1-27" name="__codelineno-1-27"></a>
</span><span id="__span-1-28"><a href="#__codelineno-1-28" id="__codelineno-1-28" name="__codelineno-1-28"></a><span class="n">checkpointer</span> <span class="o">=</span> <span class="n">InMemorySaver</span><span class="p">()</span> <span class="c1"># (4)!</span>
</span><span id="__span-1-29"><a href="#__codelineno-1-29" id="__codelineno-1-29" name="__codelineno-1-29"></a>
</span><span id="__span-1-30"><a href="#__codelineno-1-30" id="__codelineno-1-30" name="__codelineno-1-30"></a><span class="n">graph</span> <span class="o">=</span> <span class="n">graph_builder</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">checkpointer</span><span class="o">=</span><span class="n">checkpointer</span><span class="p">)</span>
</span><span id="__span-1-31"><a href="#__codelineno-1-31" id="__codelineno-1-31" name="__codelineno-1-31"></a>
</span><span id="__span-1-32"><a href="#__codelineno-1-32" id="__codelineno-1-32" name="__codelineno-1-32"></a><span class="c1"># Pass a thread ID to the graph to run it.</span>
</span><span id="__span-1-33"><a href="#__codelineno-1-33" id="__codelineno-1-33" name="__codelineno-1-33"></a><span class="n">config</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"configurable"</span><span class="p">:</span> <span class="p">{</span><span class="s2">"thread_id"</span><span class="p">:</span> <span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">()}}</span>
</span><span id="__span-1-34"><a href="#__codelineno-1-34" id="__codelineno-1-34" name="__codelineno-1-34"></a>
</span><span id="__span-1-35"><a href="#__codelineno-1-35" id="__codelineno-1-35" name="__codelineno-1-35"></a><span class="c1"># Run the graph until the interrupt is hit.</span>
</span><span id="__span-1-36"><a href="#__codelineno-1-36" id="__codelineno-1-36" name="__codelineno-1-36"></a><span class="n">result</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">invoke</span><span class="p">({</span><span class="s2">"some_text"</span><span class="p">:</span> <span class="s2">"original text"</span><span class="p">},</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">)</span> <span class="c1"># (5)!</span>
</span><span id="__span-1-37"><a href="#__codelineno-1-37" id="__codelineno-1-37" name="__codelineno-1-37"></a>
</span><span id="__span-1-38"><a href="#__codelineno-1-38" id="__codelineno-1-38" name="__codelineno-1-38"></a><span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s1">'__interrupt__'</span><span class="p">])</span> <span class="c1"># (6)!</span>
</span><span id="__span-1-39"><a href="#__codelineno-1-39" id="__codelineno-1-39" name="__codelineno-1-39"></a><span class="c1"># &gt; [</span>
</span><span id="__span-1-40"><a href="#__codelineno-1-40" id="__codelineno-1-40" name="__codelineno-1-40"></a><span class="c1"># &gt;    Interrupt(</span>
</span><span id="__span-1-41"><a href="#__codelineno-1-41" id="__codelineno-1-41" name="__codelineno-1-41"></a><span class="c1"># &gt;       value={'text_to_revise': 'original text'}, </span>
</span><span id="__span-1-42"><a href="#__codelineno-1-42" id="__codelineno-1-42" name="__codelineno-1-42"></a><span class="c1"># &gt;       resumable=True,</span>
</span><span id="__span-1-43"><a href="#__codelineno-1-43" id="__codelineno-1-43" name="__codelineno-1-43"></a><span class="c1"># &gt;       ns=['human_node:6ce9e64f-edef-fe5d-f7dc-511fa9526960']</span>
</span><span id="__span-1-44"><a href="#__codelineno-1-44" id="__codelineno-1-44" name="__codelineno-1-44"></a><span class="c1"># &gt;    )</span>
</span><span id="__span-1-45"><a href="#__codelineno-1-45" id="__codelineno-1-45" name="__codelineno-1-45"></a><span class="c1"># &gt; ] </span>
</span><span id="__span-1-46"><a href="#__codelineno-1-46" id="__codelineno-1-46" name="__codelineno-1-46"></a>
</span><span id="__span-1-47"><a href="#__codelineno-1-47" id="__codelineno-1-47" name="__codelineno-1-47"></a><span class="hll"><span class="nb">print</span><span class="p">(</span><span class="n">graph</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">Command</span><span class="p">(</span><span class="n">resume</span><span class="o">=</span><span class="s2">"Edited text"</span><span class="p">),</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">))</span> <span class="c1"># (7)!</span>
</span></span><span id="__span-1-48"><a href="#__codelineno-1-48" id="__codelineno-1-48" name="__codelineno-1-48"></a><span class="c1"># &gt; {'some_text': 'Edited text'}</span>
</span></code></pre></div>
<ol>
<li><code>interrupt(...)</code> pauses execution at <code>human_node</code>, surfacing the given payload to a human.</li>
<li>Any JSON serializable value can be passed to the <code>interrupt</code> function. Here, a dict containing the text to revise.</li>
<li>Once resumed, the return value of <code>interrupt(...)</code> is the human-provided input, which is used to update the state.</li>
<li>A checkpointer is required to persist graph state. In production, this should be durable (e.g., backed by a database).</li>
<li>The graph is invoked with some initial state.</li>
<li>When the graph hits the interrupt, it returns an <code>Interrupt</code> object with the payload and metadata.</li>
<li>The graph is resumed with a <code>Command(resume=...)</code>, injecting the human's input and continuing execution.</li>
</ol>
</details>
<div class="admonition tip">
<p class="admonition-title">New in 0.4.0</p>
<p><code>__interrupt__</code> is a special key that will be returned when running the graph if the graph is interrupted. Support for <code>__interrupt__</code> in <code>invoke</code> and <code>ainvoke</code> has been added in version 0.4.0. If you're on an older version, you will only see <code>__interrupt__</code> in the result if you use <code>stream</code> or <code>astream</code>. You can also use <code>graph.get_state(thread_id)</code> to get the interrupt value.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Interrupts resemble Python's input() function in terms of developer experience, but they do not automatically resume execution from the interruption point. Instead, they rerun the entire node where the interrupt was used. For this reason, interrupts are typically best placed at the start of a node or in a dedicated node.</p>
</div>
<h2 id="resume-using-the-command-primitive">Resume using the <code>Command</code> primitive<a class="headerlink" href="#resume-using-the-command-primitive" title="Permanent link">¶</a></h2>
<p>When the <code>interrupt</code> function is used within a graph, execution pauses at that point and awaits user input.</p>
<p>To resume execution, use the <a class="autorefs autorefs-internal" href="../../../reference/types/#langgraph.types.Command" title='&lt;code class="doc-symbol doc-symbol-heading doc-symbol-class"&gt;&lt;/code&gt;            &lt;span class="doc doc-object-name doc-class-name"&gt;Command&lt;/span&gt;


  &lt;span class="doc doc-labels"&gt;
      &lt;small class="doc doc-label doc-label-dataclass"&gt;&lt;code&gt;dataclass&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt;'><code>Command</code></a> primitive, which can be supplied via the <code>invoke</code>, <code>ainvoke</code>, <code>stream</code>, or <code>astream</code> methods. The graph resumes execution from the beginning of the node where <code>interrupt(...)</code> was initially called. This time, the <code>interrupt</code> function will return the value provided in <code>Command(resume=value)</code> rather than pausing again. All code from the beginning of the node to the <code>interrupt</code> will be re-executed.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-2-1"><a href="#__codelineno-2-1" id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="c1"># Resume graph execution by providing the user's input.</span>
</span><span id="__span-2-2"><a href="#__codelineno-2-2" id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="n">graph</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">Command</span><span class="p">(</span><span class="n">resume</span><span class="o">=</span><span class="p">{</span><span class="s2">"age"</span><span class="p">:</span> <span class="s2">"25"</span><span class="p">}),</span> <span class="n">thread_config</span><span class="p">)</span>
</span></code></pre></div>
<h3 id="resume-multiple-interrupts-with-one-invocation">Resume multiple interrupts with one invocation<a class="headerlink" href="#resume-multiple-interrupts-with-one-invocation" title="Permanent link">¶</a></h3>
<p>If you have multiple interrupts in the task queue, you can use <code>Command.resume</code> with a dictionary mapping of interrupt ids to resume with a single <code>invoke</code> / <code>stream</code> call.</p>
<p>For example, once your graph has been interrupted (multiple times, theoretically) and is stalled:</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-3-1"><a href="#__codelineno-3-1" id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="n">resume_map</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-3-2"><a href="#__codelineno-3-2" id="__codelineno-3-2" name="__codelineno-3-2"></a>    <span class="n">i</span><span class="o">.</span><span class="n">interrupt_id</span><span class="p">:</span> <span class="sa">f</span><span class="s2">"human input for prompt </span><span class="si">{</span><span class="n">i</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s2">"</span>
</span><span id="__span-3-3"><a href="#__codelineno-3-3" id="__codelineno-3-3" name="__codelineno-3-3"></a>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">parent</span><span class="o">.</span><span class="n">get_state</span><span class="p">(</span><span class="n">thread_config</span><span class="p">)</span><span class="o">.</span><span class="n">interrupts</span>
</span><span id="__span-3-4"><a href="#__codelineno-3-4" id="__codelineno-3-4" name="__codelineno-3-4"></a><span class="p">}</span>
</span><span id="__span-3-5"><a href="#__codelineno-3-5" id="__codelineno-3-5" name="__codelineno-3-5"></a>
</span><span id="__span-3-6"><a href="#__codelineno-3-6" id="__codelineno-3-6" name="__codelineno-3-6"></a><span class="n">parent_graph</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">Command</span><span class="p">(</span><span class="n">resume</span><span class="o">=</span><span class="n">resume_map</span><span class="p">),</span> <span class="n">config</span><span class="o">=</span><span class="n">thread_config</span><span class="p">)</span>
</span></code></pre></div>
<h2 id="common-patterns">Common patterns<a class="headerlink" href="#common-patterns" title="Permanent link">¶</a></h2>
<p>Below we show different design patterns that can be implemented using <code>interrupt</code> and <code>Command</code>.</p>
<h3 id="approve-or-reject">Approve or reject<a class="headerlink" href="#approve-or-reject" title="Permanent link">¶</a></h3>
<figure>
<p><img alt="image" src="../../../concepts/img/human_in_the_loop/approve-or-reject.png" style="max-height:400px"/></p>
<figcaption>Depending on the human's approval or rejection, the graph can proceed with the action or take an alternative path.</figcaption>
</figure>
<p>Pause the graph before a critical step, such as an API call, to review and approve the action. If the action is rejected, you can prevent the graph from executing the step, and potentially take an alternative action.</p>
<p><sup><i>API Reference: <a href="https://langchain-ai.github.io/langgraph/reference/types/#langgraph.types.interrupt">interrupt</a> | <a href="https://langchain-ai.github.io/langgraph/reference/types/#langgraph.types.Command">Command</a></i></sup></p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-4-1"><a href="#__codelineno-4-1" id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Literal</span>
</span><span id="__span-4-2"><a href="#__codelineno-4-2" id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">langgraph.types</span><span class="w"> </span><span class="kn">import</span> <span class="n">interrupt</span><span class="p">,</span> <span class="n">Command</span>
</span><span id="__span-4-3"><a href="#__codelineno-4-3" id="__codelineno-4-3" name="__codelineno-4-3"></a>
</span><span id="__span-4-4"><a href="#__codelineno-4-4" id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="k">def</span><span class="w"> </span><span class="nf">human_approval</span><span class="p">(</span><span class="n">state</span><span class="p">:</span> <span class="n">State</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Command</span><span class="p">[</span><span class="n">Literal</span><span class="p">[</span><span class="s2">"some_node"</span><span class="p">,</span> <span class="s2">"another_node"</span><span class="p">]]:</span>
</span><span id="__span-4-5"><a href="#__codelineno-4-5" id="__codelineno-4-5" name="__codelineno-4-5"></a>    <span class="n">is_approved</span> <span class="o">=</span> <span class="n">interrupt</span><span class="p">(</span>
</span><span id="__span-4-6"><a href="#__codelineno-4-6" id="__codelineno-4-6" name="__codelineno-4-6"></a>        <span class="p">{</span>
</span><span id="__span-4-7"><a href="#__codelineno-4-7" id="__codelineno-4-7" name="__codelineno-4-7"></a>            <span class="s2">"question"</span><span class="p">:</span> <span class="s2">"Is this correct?"</span><span class="p">,</span>
</span><span id="__span-4-8"><a href="#__codelineno-4-8" id="__codelineno-4-8" name="__codelineno-4-8"></a>            <span class="c1"># Surface the output that should be</span>
</span><span id="__span-4-9"><a href="#__codelineno-4-9" id="__codelineno-4-9" name="__codelineno-4-9"></a>            <span class="c1"># reviewed and approved by the human.</span>
</span><span id="__span-4-10"><a href="#__codelineno-4-10" id="__codelineno-4-10" name="__codelineno-4-10"></a>            <span class="s2">"llm_output"</span><span class="p">:</span> <span class="n">state</span><span class="p">[</span><span class="s2">"llm_output"</span><span class="p">]</span>
</span><span id="__span-4-11"><a href="#__codelineno-4-11" id="__codelineno-4-11" name="__codelineno-4-11"></a>        <span class="p">}</span>
</span><span id="__span-4-12"><a href="#__codelineno-4-12" id="__codelineno-4-12" name="__codelineno-4-12"></a>    <span class="p">)</span>
</span><span id="__span-4-13"><a href="#__codelineno-4-13" id="__codelineno-4-13" name="__codelineno-4-13"></a>
</span><span id="__span-4-14"><a href="#__codelineno-4-14" id="__codelineno-4-14" name="__codelineno-4-14"></a>    <span class="k">if</span> <span class="n">is_approved</span><span class="p">:</span>
</span><span id="__span-4-15"><a href="#__codelineno-4-15" id="__codelineno-4-15" name="__codelineno-4-15"></a>        <span class="k">return</span> <span class="n">Command</span><span class="p">(</span><span class="n">goto</span><span class="o">=</span><span class="s2">"some_node"</span><span class="p">)</span>
</span><span id="__span-4-16"><a href="#__codelineno-4-16" id="__codelineno-4-16" name="__codelineno-4-16"></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="__span-4-17"><a href="#__codelineno-4-17" id="__codelineno-4-17" name="__codelineno-4-17"></a>        <span class="k">return</span> <span class="n">Command</span><span class="p">(</span><span class="n">goto</span><span class="o">=</span><span class="s2">"another_node"</span><span class="p">)</span>
</span><span id="__span-4-18"><a href="#__codelineno-4-18" id="__codelineno-4-18" name="__codelineno-4-18"></a>
</span><span id="__span-4-19"><a href="#__codelineno-4-19" id="__codelineno-4-19" name="__codelineno-4-19"></a><span class="c1"># Add the node to the graph in an appropriate location</span>
</span><span id="__span-4-20"><a href="#__codelineno-4-20" id="__codelineno-4-20" name="__codelineno-4-20"></a><span class="c1"># and connect it to the relevant nodes.</span>
</span><span id="__span-4-21"><a href="#__codelineno-4-21" id="__codelineno-4-21" name="__codelineno-4-21"></a><span class="n">graph_builder</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">"human_approval"</span><span class="p">,</span> <span class="n">human_approval</span><span class="p">)</span>
</span><span id="__span-4-22"><a href="#__codelineno-4-22" id="__codelineno-4-22" name="__codelineno-4-22"></a><span class="n">graph</span> <span class="o">=</span> <span class="n">graph_builder</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">checkpointer</span><span class="o">=</span><span class="n">checkpointer</span><span class="p">)</span>
</span><span id="__span-4-23"><a href="#__codelineno-4-23" id="__codelineno-4-23" name="__codelineno-4-23"></a>
</span><span id="__span-4-24"><a href="#__codelineno-4-24" id="__codelineno-4-24" name="__codelineno-4-24"></a><span class="c1"># After running the graph and hitting the interrupt, the graph will pause.</span>
</span><span id="__span-4-25"><a href="#__codelineno-4-25" id="__codelineno-4-25" name="__codelineno-4-25"></a><span class="c1"># Resume it with either an approval or rejection.</span>
</span><span id="__span-4-26"><a href="#__codelineno-4-26" id="__codelineno-4-26" name="__codelineno-4-26"></a><span class="n">thread_config</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"configurable"</span><span class="p">:</span> <span class="p">{</span><span class="s2">"thread_id"</span><span class="p">:</span> <span class="s2">"some_id"</span><span class="p">}}</span>
</span><span id="__span-4-27"><a href="#__codelineno-4-27" id="__codelineno-4-27" name="__codelineno-4-27"></a><span class="n">graph</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">Command</span><span class="p">(</span><span class="n">resume</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span> <span class="n">config</span><span class="o">=</span><span class="n">thread_config</span><span class="p">)</span>
</span></code></pre></div>
<details class="example">
<summary>Extended example: approve or reject with interrupt</summary>
<div class="language-python highlight"><pre><span></span><code><span id="__span-5-1"><a href="#__codelineno-5-1" id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Literal</span><span class="p">,</span> <span class="n">TypedDict</span>
</span><span id="__span-5-2"><a href="#__codelineno-5-2" id="__codelineno-5-2" name="__codelineno-5-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">uuid</span>
</span><span id="__span-5-3"><a href="#__codelineno-5-3" id="__codelineno-5-3" name="__codelineno-5-3"></a>
</span><span id="__span-5-4"><a href="#__codelineno-5-4" id="__codelineno-5-4" name="__codelineno-5-4"></a><span class="kn">from</span><span class="w"> </span><span class="nn">langgraph.constants</span><span class="w"> </span><span class="kn">import</span> <span class="n">START</span><span class="p">,</span> <span class="n">END</span>
</span><span id="__span-5-5"><a href="#__codelineno-5-5" id="__codelineno-5-5" name="__codelineno-5-5"></a><span class="kn">from</span><span class="w"> </span><span class="nn">langgraph.graph</span><span class="w"> </span><span class="kn">import</span> <span class="n">StateGraph</span>
</span><span id="__span-5-6"><a href="#__codelineno-5-6" id="__codelineno-5-6" name="__codelineno-5-6"></a><span class="kn">from</span><span class="w"> </span><span class="nn">langgraph.types</span><span class="w"> </span><span class="kn">import</span> <span class="n">interrupt</span><span class="p">,</span> <span class="n">Command</span>
</span><span id="__span-5-7"><a href="#__codelineno-5-7" id="__codelineno-5-7" name="__codelineno-5-7"></a><span class="kn">from</span><span class="w"> </span><span class="nn">langgraph.checkpoint.memory</span><span class="w"> </span><span class="kn">import</span> <span class="n">MemorySaver</span>
</span><span id="__span-5-8"><a href="#__codelineno-5-8" id="__codelineno-5-8" name="__codelineno-5-8"></a>
</span><span id="__span-5-9"><a href="#__codelineno-5-9" id="__codelineno-5-9" name="__codelineno-5-9"></a><span class="c1"># Define the shared graph state</span>
</span><span id="__span-5-10"><a href="#__codelineno-5-10" id="__codelineno-5-10" name="__codelineno-5-10"></a><span class="k">class</span><span class="w"> </span><span class="nc">State</span><span class="p">(</span><span class="n">TypedDict</span><span class="p">):</span>
</span><span id="__span-5-11"><a href="#__codelineno-5-11" id="__codelineno-5-11" name="__codelineno-5-11"></a>    <span class="n">llm_output</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="__span-5-12"><a href="#__codelineno-5-12" id="__codelineno-5-12" name="__codelineno-5-12"></a>    <span class="n">decision</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="__span-5-13"><a href="#__codelineno-5-13" id="__codelineno-5-13" name="__codelineno-5-13"></a>
</span><span id="__span-5-14"><a href="#__codelineno-5-14" id="__codelineno-5-14" name="__codelineno-5-14"></a><span class="c1"># Simulate an LLM output node</span>
</span><span id="__span-5-15"><a href="#__codelineno-5-15" id="__codelineno-5-15" name="__codelineno-5-15"></a><span class="k">def</span><span class="w"> </span><span class="nf">generate_llm_output</span><span class="p">(</span><span class="n">state</span><span class="p">:</span> <span class="n">State</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">State</span><span class="p">:</span>
</span><span id="__span-5-16"><a href="#__codelineno-5-16" id="__codelineno-5-16" name="__codelineno-5-16"></a>    <span class="k">return</span> <span class="p">{</span><span class="s2">"llm_output"</span><span class="p">:</span> <span class="s2">"This is the generated output."</span><span class="p">}</span>
</span><span id="__span-5-17"><a href="#__codelineno-5-17" id="__codelineno-5-17" name="__codelineno-5-17"></a>
</span><span id="__span-5-18"><a href="#__codelineno-5-18" id="__codelineno-5-18" name="__codelineno-5-18"></a><span class="c1"># Human approval node</span>
</span><span id="__span-5-19"><a href="#__codelineno-5-19" id="__codelineno-5-19" name="__codelineno-5-19"></a><span class="k">def</span><span class="w"> </span><span class="nf">human_approval</span><span class="p">(</span><span class="n">state</span><span class="p">:</span> <span class="n">State</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Command</span><span class="p">[</span><span class="n">Literal</span><span class="p">[</span><span class="s2">"approved_path"</span><span class="p">,</span> <span class="s2">"rejected_path"</span><span class="p">]]:</span>
</span><span id="__span-5-20"><a href="#__codelineno-5-20" id="__codelineno-5-20" name="__codelineno-5-20"></a>    <span class="n">decision</span> <span class="o">=</span> <span class="n">interrupt</span><span class="p">({</span>
</span><span id="__span-5-21"><a href="#__codelineno-5-21" id="__codelineno-5-21" name="__codelineno-5-21"></a>        <span class="s2">"question"</span><span class="p">:</span> <span class="s2">"Do you approve the following output?"</span><span class="p">,</span>
</span><span id="__span-5-22"><a href="#__codelineno-5-22" id="__codelineno-5-22" name="__codelineno-5-22"></a>        <span class="s2">"llm_output"</span><span class="p">:</span> <span class="n">state</span><span class="p">[</span><span class="s2">"llm_output"</span><span class="p">]</span>
</span><span id="__span-5-23"><a href="#__codelineno-5-23" id="__codelineno-5-23" name="__codelineno-5-23"></a>    <span class="p">})</span>
</span><span id="__span-5-24"><a href="#__codelineno-5-24" id="__codelineno-5-24" name="__codelineno-5-24"></a>
</span><span id="__span-5-25"><a href="#__codelineno-5-25" id="__codelineno-5-25" name="__codelineno-5-25"></a>    <span class="k">if</span> <span class="n">decision</span> <span class="o">==</span> <span class="s2">"approve"</span><span class="p">:</span>
</span><span id="__span-5-26"><a href="#__codelineno-5-26" id="__codelineno-5-26" name="__codelineno-5-26"></a>        <span class="k">return</span> <span class="n">Command</span><span class="p">(</span><span class="n">goto</span><span class="o">=</span><span class="s2">"approved_path"</span><span class="p">,</span> <span class="n">update</span><span class="o">=</span><span class="p">{</span><span class="s2">"decision"</span><span class="p">:</span> <span class="s2">"approved"</span><span class="p">})</span>
</span><span id="__span-5-27"><a href="#__codelineno-5-27" id="__codelineno-5-27" name="__codelineno-5-27"></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="__span-5-28"><a href="#__codelineno-5-28" id="__codelineno-5-28" name="__codelineno-5-28"></a>        <span class="k">return</span> <span class="n">Command</span><span class="p">(</span><span class="n">goto</span><span class="o">=</span><span class="s2">"rejected_path"</span><span class="p">,</span> <span class="n">update</span><span class="o">=</span><span class="p">{</span><span class="s2">"decision"</span><span class="p">:</span> <span class="s2">"rejected"</span><span class="p">})</span>
</span><span id="__span-5-29"><a href="#__codelineno-5-29" id="__codelineno-5-29" name="__codelineno-5-29"></a>
</span><span id="__span-5-30"><a href="#__codelineno-5-30" id="__codelineno-5-30" name="__codelineno-5-30"></a><span class="c1"># Next steps after approval</span>
</span><span id="__span-5-31"><a href="#__codelineno-5-31" id="__codelineno-5-31" name="__codelineno-5-31"></a><span class="k">def</span><span class="w"> </span><span class="nf">approved_node</span><span class="p">(</span><span class="n">state</span><span class="p">:</span> <span class="n">State</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">State</span><span class="p">:</span>
</span><span id="__span-5-32"><a href="#__codelineno-5-32" id="__codelineno-5-32" name="__codelineno-5-32"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">"✅ Approved path taken."</span><span class="p">)</span>
</span><span id="__span-5-33"><a href="#__codelineno-5-33" id="__codelineno-5-33" name="__codelineno-5-33"></a>    <span class="k">return</span> <span class="n">state</span>
</span><span id="__span-5-34"><a href="#__codelineno-5-34" id="__codelineno-5-34" name="__codelineno-5-34"></a>
</span><span id="__span-5-35"><a href="#__codelineno-5-35" id="__codelineno-5-35" name="__codelineno-5-35"></a><span class="c1"># Alternative path after rejection</span>
</span><span id="__span-5-36"><a href="#__codelineno-5-36" id="__codelineno-5-36" name="__codelineno-5-36"></a><span class="k">def</span><span class="w"> </span><span class="nf">rejected_node</span><span class="p">(</span><span class="n">state</span><span class="p">:</span> <span class="n">State</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">State</span><span class="p">:</span>
</span><span id="__span-5-37"><a href="#__codelineno-5-37" id="__codelineno-5-37" name="__codelineno-5-37"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">"❌ Rejected path taken."</span><span class="p">)</span>
</span><span id="__span-5-38"><a href="#__codelineno-5-38" id="__codelineno-5-38" name="__codelineno-5-38"></a>    <span class="k">return</span> <span class="n">state</span>
</span><span id="__span-5-39"><a href="#__codelineno-5-39" id="__codelineno-5-39" name="__codelineno-5-39"></a>
</span><span id="__span-5-40"><a href="#__codelineno-5-40" id="__codelineno-5-40" name="__codelineno-5-40"></a><span class="c1"># Build the graph</span>
</span><span id="__span-5-41"><a href="#__codelineno-5-41" id="__codelineno-5-41" name="__codelineno-5-41"></a><span class="n">builder</span> <span class="o">=</span> <span class="n">StateGraph</span><span class="p">(</span><span class="n">State</span><span class="p">)</span>
</span><span id="__span-5-42"><a href="#__codelineno-5-42" id="__codelineno-5-42" name="__codelineno-5-42"></a><span class="n">builder</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">"generate_llm_output"</span><span class="p">,</span> <span class="n">generate_llm_output</span><span class="p">)</span>
</span><span id="__span-5-43"><a href="#__codelineno-5-43" id="__codelineno-5-43" name="__codelineno-5-43"></a><span class="n">builder</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">"human_approval"</span><span class="p">,</span> <span class="n">human_approval</span><span class="p">)</span>
</span><span id="__span-5-44"><a href="#__codelineno-5-44" id="__codelineno-5-44" name="__codelineno-5-44"></a><span class="n">builder</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">"approved_path"</span><span class="p">,</span> <span class="n">approved_node</span><span class="p">)</span>
</span><span id="__span-5-45"><a href="#__codelineno-5-45" id="__codelineno-5-45" name="__codelineno-5-45"></a><span class="n">builder</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">"rejected_path"</span><span class="p">,</span> <span class="n">rejected_node</span><span class="p">)</span>
</span><span id="__span-5-46"><a href="#__codelineno-5-46" id="__codelineno-5-46" name="__codelineno-5-46"></a>
</span><span id="__span-5-47"><a href="#__codelineno-5-47" id="__codelineno-5-47" name="__codelineno-5-47"></a><span class="n">builder</span><span class="o">.</span><span class="n">set_entry_point</span><span class="p">(</span><span class="s2">"generate_llm_output"</span><span class="p">)</span>
</span><span id="__span-5-48"><a href="#__codelineno-5-48" id="__codelineno-5-48" name="__codelineno-5-48"></a><span class="n">builder</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="s2">"generate_llm_output"</span><span class="p">,</span> <span class="s2">"human_approval"</span><span class="p">)</span>
</span><span id="__span-5-49"><a href="#__codelineno-5-49" id="__codelineno-5-49" name="__codelineno-5-49"></a><span class="n">builder</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="s2">"approved_path"</span><span class="p">,</span> <span class="n">END</span><span class="p">)</span>
</span><span id="__span-5-50"><a href="#__codelineno-5-50" id="__codelineno-5-50" name="__codelineno-5-50"></a><span class="n">builder</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="s2">"rejected_path"</span><span class="p">,</span> <span class="n">END</span><span class="p">)</span>
</span><span id="__span-5-51"><a href="#__codelineno-5-51" id="__codelineno-5-51" name="__codelineno-5-51"></a>
</span><span id="__span-5-52"><a href="#__codelineno-5-52" id="__codelineno-5-52" name="__codelineno-5-52"></a><span class="n">checkpointer</span> <span class="o">=</span> <span class="n">MemorySaver</span><span class="p">()</span>
</span><span id="__span-5-53"><a href="#__codelineno-5-53" id="__codelineno-5-53" name="__codelineno-5-53"></a><span class="n">graph</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">checkpointer</span><span class="o">=</span><span class="n">checkpointer</span><span class="p">)</span>
</span><span id="__span-5-54"><a href="#__codelineno-5-54" id="__codelineno-5-54" name="__codelineno-5-54"></a>
</span><span id="__span-5-55"><a href="#__codelineno-5-55" id="__codelineno-5-55" name="__codelineno-5-55"></a><span class="c1"># Run until interrupt</span>
</span><span id="__span-5-56"><a href="#__codelineno-5-56" id="__codelineno-5-56" name="__codelineno-5-56"></a><span class="n">config</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"configurable"</span><span class="p">:</span> <span class="p">{</span><span class="s2">"thread_id"</span><span class="p">:</span> <span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">()}}</span>
</span><span id="__span-5-57"><a href="#__codelineno-5-57" id="__codelineno-5-57" name="__codelineno-5-57"></a><span class="n">result</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">invoke</span><span class="p">({},</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">)</span>
</span><span id="__span-5-58"><a href="#__codelineno-5-58" id="__codelineno-5-58" name="__codelineno-5-58"></a><span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s2">"__interrupt__"</span><span class="p">])</span>
</span><span id="__span-5-59"><a href="#__codelineno-5-59" id="__codelineno-5-59" name="__codelineno-5-59"></a><span class="c1"># Output:</span>
</span><span id="__span-5-60"><a href="#__codelineno-5-60" id="__codelineno-5-60" name="__codelineno-5-60"></a><span class="c1"># Interrupt(value={'question': 'Do you approve the following output?', 'llm_output': 'This is the generated output.'}, ...)</span>
</span><span id="__span-5-61"><a href="#__codelineno-5-61" id="__codelineno-5-61" name="__codelineno-5-61"></a>
</span><span id="__span-5-62"><a href="#__codelineno-5-62" id="__codelineno-5-62" name="__codelineno-5-62"></a><span class="c1"># Simulate resuming with human input</span>
</span><span id="__span-5-63"><a href="#__codelineno-5-63" id="__codelineno-5-63" name="__codelineno-5-63"></a><span class="c1"># To test rejection, replace resume="approve" with resume="reject"</span>
</span><span id="__span-5-64"><a href="#__codelineno-5-64" id="__codelineno-5-64" name="__codelineno-5-64"></a><span class="n">final_result</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">Command</span><span class="p">(</span><span class="n">resume</span><span class="o">=</span><span class="s2">"approve"</span><span class="p">),</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">)</span>
</span><span id="__span-5-65"><a href="#__codelineno-5-65" id="__codelineno-5-65" name="__codelineno-5-65"></a><span class="nb">print</span><span class="p">(</span><span class="n">final_result</span><span class="p">)</span>
</span></code></pre></div>
</details>
<h3 id="review-and-edit-state">Review and edit state<a class="headerlink" href="#review-and-edit-state" title="Permanent link">¶</a></h3>
<figure>
<p><img alt="image" src="../../../concepts/img/human_in_the_loop/edit-graph-state-simple.png" style="max-height:400px"/></p>
<figcaption>A human can review and edit the state of the graph. This is useful for correcting mistakes or updating the state with additional information.
</figcaption>
</figure>
<p><sup><i>API Reference: <a href="https://langchain-ai.github.io/langgraph/reference/types/#langgraph.types.interrupt">interrupt</a></i></sup></p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-6-1"><a href="#__codelineno-6-1" id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">langgraph.types</span><span class="w"> </span><span class="kn">import</span> <span class="n">interrupt</span>
</span><span id="__span-6-2"><a href="#__codelineno-6-2" id="__codelineno-6-2" name="__codelineno-6-2"></a>
</span><span id="__span-6-3"><a href="#__codelineno-6-3" id="__codelineno-6-3" name="__codelineno-6-3"></a><span class="k">def</span><span class="w"> </span><span class="nf">human_editing</span><span class="p">(</span><span class="n">state</span><span class="p">:</span> <span class="n">State</span><span class="p">):</span>
</span><span id="__span-6-4"><a href="#__codelineno-6-4" id="__codelineno-6-4" name="__codelineno-6-4"></a>    <span class="o">...</span>
</span><span id="__span-6-5"><a href="#__codelineno-6-5" id="__codelineno-6-5" name="__codelineno-6-5"></a>    <span class="n">result</span> <span class="o">=</span> <span class="n">interrupt</span><span class="p">(</span>
</span><span id="__span-6-6"><a href="#__codelineno-6-6" id="__codelineno-6-6" name="__codelineno-6-6"></a>        <span class="c1"># Interrupt information to surface to the client.</span>
</span><span id="__span-6-7"><a href="#__codelineno-6-7" id="__codelineno-6-7" name="__codelineno-6-7"></a>        <span class="c1"># Can be any JSON serializable value.</span>
</span><span id="__span-6-8"><a href="#__codelineno-6-8" id="__codelineno-6-8" name="__codelineno-6-8"></a>        <span class="p">{</span>
</span><span id="__span-6-9"><a href="#__codelineno-6-9" id="__codelineno-6-9" name="__codelineno-6-9"></a>            <span class="s2">"task"</span><span class="p">:</span> <span class="s2">"Review the output from the LLM and make any necessary edits."</span><span class="p">,</span>
</span><span id="__span-6-10"><a href="#__codelineno-6-10" id="__codelineno-6-10" name="__codelineno-6-10"></a>            <span class="s2">"llm_generated_summary"</span><span class="p">:</span> <span class="n">state</span><span class="p">[</span><span class="s2">"llm_generated_summary"</span><span class="p">]</span>
</span><span id="__span-6-11"><a href="#__codelineno-6-11" id="__codelineno-6-11" name="__codelineno-6-11"></a>        <span class="p">}</span>
</span><span id="__span-6-12"><a href="#__codelineno-6-12" id="__codelineno-6-12" name="__codelineno-6-12"></a>    <span class="p">)</span>
</span><span id="__span-6-13"><a href="#__codelineno-6-13" id="__codelineno-6-13" name="__codelineno-6-13"></a>
</span><span id="__span-6-14"><a href="#__codelineno-6-14" id="__codelineno-6-14" name="__codelineno-6-14"></a>    <span class="c1"># Update the state with the edited text</span>
</span><span id="__span-6-15"><a href="#__codelineno-6-15" id="__codelineno-6-15" name="__codelineno-6-15"></a>    <span class="k">return</span> <span class="p">{</span>
</span><span id="__span-6-16"><a href="#__codelineno-6-16" id="__codelineno-6-16" name="__codelineno-6-16"></a>        <span class="s2">"llm_generated_summary"</span><span class="p">:</span> <span class="n">result</span><span class="p">[</span><span class="s2">"edited_text"</span><span class="p">]</span> 
</span><span id="__span-6-17"><a href="#__codelineno-6-17" id="__codelineno-6-17" name="__codelineno-6-17"></a>    <span class="p">}</span>
</span><span id="__span-6-18"><a href="#__codelineno-6-18" id="__codelineno-6-18" name="__codelineno-6-18"></a>
</span><span id="__span-6-19"><a href="#__codelineno-6-19" id="__codelineno-6-19" name="__codelineno-6-19"></a><span class="c1"># Add the node to the graph in an appropriate location</span>
</span><span id="__span-6-20"><a href="#__codelineno-6-20" id="__codelineno-6-20" name="__codelineno-6-20"></a><span class="c1"># and connect it to the relevant nodes.</span>
</span><span id="__span-6-21"><a href="#__codelineno-6-21" id="__codelineno-6-21" name="__codelineno-6-21"></a><span class="n">graph_builder</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">"human_editing"</span><span class="p">,</span> <span class="n">human_editing</span><span class="p">)</span>
</span><span id="__span-6-22"><a href="#__codelineno-6-22" id="__codelineno-6-22" name="__codelineno-6-22"></a><span class="n">graph</span> <span class="o">=</span> <span class="n">graph_builder</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">checkpointer</span><span class="o">=</span><span class="n">checkpointer</span><span class="p">)</span>
</span><span id="__span-6-23"><a href="#__codelineno-6-23" id="__codelineno-6-23" name="__codelineno-6-23"></a>
</span><span id="__span-6-24"><a href="#__codelineno-6-24" id="__codelineno-6-24" name="__codelineno-6-24"></a><span class="o">...</span>
</span><span id="__span-6-25"><a href="#__codelineno-6-25" id="__codelineno-6-25" name="__codelineno-6-25"></a>
</span><span id="__span-6-26"><a href="#__codelineno-6-26" id="__codelineno-6-26" name="__codelineno-6-26"></a><span class="c1"># After running the graph and hitting the interrupt, the graph will pause.</span>
</span><span id="__span-6-27"><a href="#__codelineno-6-27" id="__codelineno-6-27" name="__codelineno-6-27"></a><span class="c1"># Resume it with the edited text.</span>
</span><span id="__span-6-28"><a href="#__codelineno-6-28" id="__codelineno-6-28" name="__codelineno-6-28"></a><span class="n">thread_config</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"configurable"</span><span class="p">:</span> <span class="p">{</span><span class="s2">"thread_id"</span><span class="p">:</span> <span class="s2">"some_id"</span><span class="p">}}</span>
</span><span id="__span-6-29"><a href="#__codelineno-6-29" id="__codelineno-6-29" name="__codelineno-6-29"></a><span class="n">graph</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span>
</span><span id="__span-6-30"><a href="#__codelineno-6-30" id="__codelineno-6-30" name="__codelineno-6-30"></a>    <span class="n">Command</span><span class="p">(</span><span class="n">resume</span><span class="o">=</span><span class="p">{</span><span class="s2">"edited_text"</span><span class="p">:</span> <span class="s2">"The edited text"</span><span class="p">}),</span> 
</span><span id="__span-6-31"><a href="#__codelineno-6-31" id="__codelineno-6-31" name="__codelineno-6-31"></a>    <span class="n">config</span><span class="o">=</span><span class="n">thread_config</span>
</span><span id="__span-6-32"><a href="#__codelineno-6-32" id="__codelineno-6-32" name="__codelineno-6-32"></a><span class="p">)</span>
</span></code></pre></div>
<details class="example">
<summary>Extended example: edit state with interrupt</summary>
<div class="language-python highlight"><pre><span></span><code><span id="__span-7-1"><a href="#__codelineno-7-1" id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">TypedDict</span>
</span><span id="__span-7-2"><a href="#__codelineno-7-2" id="__codelineno-7-2" name="__codelineno-7-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">uuid</span>
</span><span id="__span-7-3"><a href="#__codelineno-7-3" id="__codelineno-7-3" name="__codelineno-7-3"></a>
</span><span id="__span-7-4"><a href="#__codelineno-7-4" id="__codelineno-7-4" name="__codelineno-7-4"></a><span class="kn">from</span><span class="w"> </span><span class="nn">langgraph.constants</span><span class="w"> </span><span class="kn">import</span> <span class="n">START</span><span class="p">,</span> <span class="n">END</span>
</span><span id="__span-7-5"><a href="#__codelineno-7-5" id="__codelineno-7-5" name="__codelineno-7-5"></a><span class="kn">from</span><span class="w"> </span><span class="nn">langgraph.graph</span><span class="w"> </span><span class="kn">import</span> <span class="n">StateGraph</span>
</span><span id="__span-7-6"><a href="#__codelineno-7-6" id="__codelineno-7-6" name="__codelineno-7-6"></a><span class="kn">from</span><span class="w"> </span><span class="nn">langgraph.types</span><span class="w"> </span><span class="kn">import</span> <span class="n">interrupt</span><span class="p">,</span> <span class="n">Command</span>
</span><span id="__span-7-7"><a href="#__codelineno-7-7" id="__codelineno-7-7" name="__codelineno-7-7"></a><span class="kn">from</span><span class="w"> </span><span class="nn">langgraph.checkpoint.memory</span><span class="w"> </span><span class="kn">import</span> <span class="n">MemorySaver</span>
</span><span id="__span-7-8"><a href="#__codelineno-7-8" id="__codelineno-7-8" name="__codelineno-7-8"></a>
</span><span id="__span-7-9"><a href="#__codelineno-7-9" id="__codelineno-7-9" name="__codelineno-7-9"></a><span class="c1"># Define the graph state</span>
</span><span id="__span-7-10"><a href="#__codelineno-7-10" id="__codelineno-7-10" name="__codelineno-7-10"></a><span class="k">class</span><span class="w"> </span><span class="nc">State</span><span class="p">(</span><span class="n">TypedDict</span><span class="p">):</span>
</span><span id="__span-7-11"><a href="#__codelineno-7-11" id="__codelineno-7-11" name="__codelineno-7-11"></a>    <span class="n">summary</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="__span-7-12"><a href="#__codelineno-7-12" id="__codelineno-7-12" name="__codelineno-7-12"></a>
</span><span id="__span-7-13"><a href="#__codelineno-7-13" id="__codelineno-7-13" name="__codelineno-7-13"></a><span class="c1"># Simulate an LLM summary generation</span>
</span><span id="__span-7-14"><a href="#__codelineno-7-14" id="__codelineno-7-14" name="__codelineno-7-14"></a><span class="k">def</span><span class="w"> </span><span class="nf">generate_summary</span><span class="p">(</span><span class="n">state</span><span class="p">:</span> <span class="n">State</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">State</span><span class="p">:</span>
</span><span id="__span-7-15"><a href="#__codelineno-7-15" id="__codelineno-7-15" name="__codelineno-7-15"></a>    <span class="k">return</span> <span class="p">{</span>
</span><span id="__span-7-16"><a href="#__codelineno-7-16" id="__codelineno-7-16" name="__codelineno-7-16"></a>        <span class="s2">"summary"</span><span class="p">:</span> <span class="s2">"The cat sat on the mat and looked at the stars."</span>
</span><span id="__span-7-17"><a href="#__codelineno-7-17" id="__codelineno-7-17" name="__codelineno-7-17"></a>    <span class="p">}</span>
</span><span id="__span-7-18"><a href="#__codelineno-7-18" id="__codelineno-7-18" name="__codelineno-7-18"></a>
</span><span id="__span-7-19"><a href="#__codelineno-7-19" id="__codelineno-7-19" name="__codelineno-7-19"></a><span class="c1"># Human editing node</span>
</span><span id="__span-7-20"><a href="#__codelineno-7-20" id="__codelineno-7-20" name="__codelineno-7-20"></a><span class="k">def</span><span class="w"> </span><span class="nf">human_review_edit</span><span class="p">(</span><span class="n">state</span><span class="p">:</span> <span class="n">State</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">State</span><span class="p">:</span>
</span><span id="__span-7-21"><a href="#__codelineno-7-21" id="__codelineno-7-21" name="__codelineno-7-21"></a>    <span class="n">result</span> <span class="o">=</span> <span class="n">interrupt</span><span class="p">({</span>
</span><span id="__span-7-22"><a href="#__codelineno-7-22" id="__codelineno-7-22" name="__codelineno-7-22"></a>        <span class="s2">"task"</span><span class="p">:</span> <span class="s2">"Please review and edit the generated summary if necessary."</span><span class="p">,</span>
</span><span id="__span-7-23"><a href="#__codelineno-7-23" id="__codelineno-7-23" name="__codelineno-7-23"></a>        <span class="s2">"generated_summary"</span><span class="p">:</span> <span class="n">state</span><span class="p">[</span><span class="s2">"summary"</span><span class="p">]</span>
</span><span id="__span-7-24"><a href="#__codelineno-7-24" id="__codelineno-7-24" name="__codelineno-7-24"></a>    <span class="p">})</span>
</span><span id="__span-7-25"><a href="#__codelineno-7-25" id="__codelineno-7-25" name="__codelineno-7-25"></a>    <span class="k">return</span> <span class="p">{</span>
</span><span id="__span-7-26"><a href="#__codelineno-7-26" id="__codelineno-7-26" name="__codelineno-7-26"></a>        <span class="s2">"summary"</span><span class="p">:</span> <span class="n">result</span><span class="p">[</span><span class="s2">"edited_summary"</span><span class="p">]</span>
</span><span id="__span-7-27"><a href="#__codelineno-7-27" id="__codelineno-7-27" name="__codelineno-7-27"></a>    <span class="p">}</span>
</span><span id="__span-7-28"><a href="#__codelineno-7-28" id="__codelineno-7-28" name="__codelineno-7-28"></a>
</span><span id="__span-7-29"><a href="#__codelineno-7-29" id="__codelineno-7-29" name="__codelineno-7-29"></a><span class="c1"># Simulate downstream use of the edited summary</span>
</span><span id="__span-7-30"><a href="#__codelineno-7-30" id="__codelineno-7-30" name="__codelineno-7-30"></a><span class="k">def</span><span class="w"> </span><span class="nf">downstream_use</span><span class="p">(</span><span class="n">state</span><span class="p">:</span> <span class="n">State</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">State</span><span class="p">:</span>
</span><span id="__span-7-31"><a href="#__codelineno-7-31" id="__codelineno-7-31" name="__codelineno-7-31"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"✅ Using edited summary: </span><span class="si">{</span><span class="n">state</span><span class="p">[</span><span class="s1">'summary'</span><span class="p">]</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</span><span id="__span-7-32"><a href="#__codelineno-7-32" id="__codelineno-7-32" name="__codelineno-7-32"></a>    <span class="k">return</span> <span class="n">state</span>
</span><span id="__span-7-33"><a href="#__codelineno-7-33" id="__codelineno-7-33" name="__codelineno-7-33"></a>
</span><span id="__span-7-34"><a href="#__codelineno-7-34" id="__codelineno-7-34" name="__codelineno-7-34"></a><span class="c1"># Build the graph</span>
</span><span id="__span-7-35"><a href="#__codelineno-7-35" id="__codelineno-7-35" name="__codelineno-7-35"></a><span class="n">builder</span> <span class="o">=</span> <span class="n">StateGraph</span><span class="p">(</span><span class="n">State</span><span class="p">)</span>
</span><span id="__span-7-36"><a href="#__codelineno-7-36" id="__codelineno-7-36" name="__codelineno-7-36"></a><span class="n">builder</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">"generate_summary"</span><span class="p">,</span> <span class="n">generate_summary</span><span class="p">)</span>
</span><span id="__span-7-37"><a href="#__codelineno-7-37" id="__codelineno-7-37" name="__codelineno-7-37"></a><span class="n">builder</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">"human_review_edit"</span><span class="p">,</span> <span class="n">human_review_edit</span><span class="p">)</span>
</span><span id="__span-7-38"><a href="#__codelineno-7-38" id="__codelineno-7-38" name="__codelineno-7-38"></a><span class="n">builder</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">"downstream_use"</span><span class="p">,</span> <span class="n">downstream_use</span><span class="p">)</span>
</span><span id="__span-7-39"><a href="#__codelineno-7-39" id="__codelineno-7-39" name="__codelineno-7-39"></a>
</span><span id="__span-7-40"><a href="#__codelineno-7-40" id="__codelineno-7-40" name="__codelineno-7-40"></a><span class="n">builder</span><span class="o">.</span><span class="n">set_entry_point</span><span class="p">(</span><span class="s2">"generate_summary"</span><span class="p">)</span>
</span><span id="__span-7-41"><a href="#__codelineno-7-41" id="__codelineno-7-41" name="__codelineno-7-41"></a><span class="n">builder</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="s2">"generate_summary"</span><span class="p">,</span> <span class="s2">"human_review_edit"</span><span class="p">)</span>
</span><span id="__span-7-42"><a href="#__codelineno-7-42" id="__codelineno-7-42" name="__codelineno-7-42"></a><span class="n">builder</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="s2">"human_review_edit"</span><span class="p">,</span> <span class="s2">"downstream_use"</span><span class="p">)</span>
</span><span id="__span-7-43"><a href="#__codelineno-7-43" id="__codelineno-7-43" name="__codelineno-7-43"></a><span class="n">builder</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="s2">"downstream_use"</span><span class="p">,</span> <span class="n">END</span><span class="p">)</span>
</span><span id="__span-7-44"><a href="#__codelineno-7-44" id="__codelineno-7-44" name="__codelineno-7-44"></a>
</span><span id="__span-7-45"><a href="#__codelineno-7-45" id="__codelineno-7-45" name="__codelineno-7-45"></a><span class="c1"># Set up in-memory checkpointing for interrupt support</span>
</span><span id="__span-7-46"><a href="#__codelineno-7-46" id="__codelineno-7-46" name="__codelineno-7-46"></a><span class="n">checkpointer</span> <span class="o">=</span> <span class="n">MemorySaver</span><span class="p">()</span>
</span><span id="__span-7-47"><a href="#__codelineno-7-47" id="__codelineno-7-47" name="__codelineno-7-47"></a><span class="n">graph</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">checkpointer</span><span class="o">=</span><span class="n">checkpointer</span><span class="p">)</span>
</span><span id="__span-7-48"><a href="#__codelineno-7-48" id="__codelineno-7-48" name="__codelineno-7-48"></a>
</span><span id="__span-7-49"><a href="#__codelineno-7-49" id="__codelineno-7-49" name="__codelineno-7-49"></a><span class="c1"># Invoke the graph until it hits the interrupt</span>
</span><span id="__span-7-50"><a href="#__codelineno-7-50" id="__codelineno-7-50" name="__codelineno-7-50"></a><span class="n">config</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"configurable"</span><span class="p">:</span> <span class="p">{</span><span class="s2">"thread_id"</span><span class="p">:</span> <span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">()}}</span>
</span><span id="__span-7-51"><a href="#__codelineno-7-51" id="__codelineno-7-51" name="__codelineno-7-51"></a><span class="n">result</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">invoke</span><span class="p">({},</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">)</span>
</span><span id="__span-7-52"><a href="#__codelineno-7-52" id="__codelineno-7-52" name="__codelineno-7-52"></a>
</span><span id="__span-7-53"><a href="#__codelineno-7-53" id="__codelineno-7-53" name="__codelineno-7-53"></a><span class="c1"># Output interrupt payload</span>
</span><span id="__span-7-54"><a href="#__codelineno-7-54" id="__codelineno-7-54" name="__codelineno-7-54"></a><span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s2">"__interrupt__"</span><span class="p">])</span>
</span><span id="__span-7-55"><a href="#__codelineno-7-55" id="__codelineno-7-55" name="__codelineno-7-55"></a><span class="c1"># Example output:</span>
</span><span id="__span-7-56"><a href="#__codelineno-7-56" id="__codelineno-7-56" name="__codelineno-7-56"></a><span class="c1"># Interrupt(</span>
</span><span id="__span-7-57"><a href="#__codelineno-7-57" id="__codelineno-7-57" name="__codelineno-7-57"></a><span class="c1">#   value={</span>
</span><span id="__span-7-58"><a href="#__codelineno-7-58" id="__codelineno-7-58" name="__codelineno-7-58"></a><span class="c1">#     'task': 'Please review and edit the generated summary if necessary.',</span>
</span><span id="__span-7-59"><a href="#__codelineno-7-59" id="__codelineno-7-59" name="__codelineno-7-59"></a><span class="c1">#     'generated_summary': 'The cat sat on the mat and looked at the stars.'</span>
</span><span id="__span-7-60"><a href="#__codelineno-7-60" id="__codelineno-7-60" name="__codelineno-7-60"></a><span class="c1">#   },</span>
</span><span id="__span-7-61"><a href="#__codelineno-7-61" id="__codelineno-7-61" name="__codelineno-7-61"></a><span class="c1">#   resumable=True,</span>
</span><span id="__span-7-62"><a href="#__codelineno-7-62" id="__codelineno-7-62" name="__codelineno-7-62"></a><span class="c1">#   ...</span>
</span><span id="__span-7-63"><a href="#__codelineno-7-63" id="__codelineno-7-63" name="__codelineno-7-63"></a><span class="c1"># )</span>
</span><span id="__span-7-64"><a href="#__codelineno-7-64" id="__codelineno-7-64" name="__codelineno-7-64"></a>
</span><span id="__span-7-65"><a href="#__codelineno-7-65" id="__codelineno-7-65" name="__codelineno-7-65"></a><span class="c1"># Resume the graph with human-edited input</span>
</span><span id="__span-7-66"><a href="#__codelineno-7-66" id="__codelineno-7-66" name="__codelineno-7-66"></a><span class="n">edited_summary</span> <span class="o">=</span> <span class="s2">"The cat lay on the rug, gazing peacefully at the night sky."</span>
</span><span id="__span-7-67"><a href="#__codelineno-7-67" id="__codelineno-7-67" name="__codelineno-7-67"></a><span class="n">resumed_result</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span>
</span><span id="__span-7-68"><a href="#__codelineno-7-68" id="__codelineno-7-68" name="__codelineno-7-68"></a>    <span class="n">Command</span><span class="p">(</span><span class="n">resume</span><span class="o">=</span><span class="p">{</span><span class="s2">"edited_summary"</span><span class="p">:</span> <span class="n">edited_summary</span><span class="p">}),</span>
</span><span id="__span-7-69"><a href="#__codelineno-7-69" id="__codelineno-7-69" name="__codelineno-7-69"></a>    <span class="n">config</span><span class="o">=</span><span class="n">config</span>
</span><span id="__span-7-70"><a href="#__codelineno-7-70" id="__codelineno-7-70" name="__codelineno-7-70"></a><span class="p">)</span>
</span><span id="__span-7-71"><a href="#__codelineno-7-71" id="__codelineno-7-71" name="__codelineno-7-71"></a><span class="nb">print</span><span class="p">(</span><span class="n">resumed_result</span><span class="p">)</span>
</span></code></pre></div>
</details>
<h3 id="review-tool-calls">Review tool calls<a class="headerlink" href="#review-tool-calls" title="Permanent link">¶</a></h3>
<figure>
<p><img alt="image" src="../../../concepts/img/human_in_the_loop/tool-call-review.png" style="max-height:400px"/></p>
<figcaption>A human can review and edit the output from the LLM before proceeding. This is particularly
critical in applications where the tool calls requested by the LLM may be sensitive or require human oversight.
</figcaption>
</figure>
<p>To add a human approval step to a tool:</p>
<ol>
<li>Use <code>interrupt()</code> in the tool to pause execution.</li>
<li>Resume with a <code>Command(resume=...)</code> to continue based on human input.</li>
</ol>
<p><sup><i>API Reference: <a href="https://langchain-ai.github.io/langgraph/reference/checkpoints/#langgraph.checkpoint.memory.InMemorySaver">InMemorySaver</a> | <a href="https://langchain-ai.github.io/langgraph/reference/types/#langgraph.types.interrupt">interrupt</a> | <a href="https://langchain-ai.github.io/langgraph/reference/prebuilt/#langgraph.prebuilt.chat_agent_executor.create_react_agent">create_react_agent</a></i></sup></p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-8-1"><a href="#__codelineno-8-1" id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">langgraph.checkpoint.memory</span><span class="w"> </span><span class="kn">import</span> <span class="n">InMemorySaver</span>
</span><span id="__span-8-2"><a href="#__codelineno-8-2" id="__codelineno-8-2" name="__codelineno-8-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">langgraph.types</span><span class="w"> </span><span class="kn">import</span> <span class="n">interrupt</span>
</span><span id="__span-8-3"><a href="#__codelineno-8-3" id="__codelineno-8-3" name="__codelineno-8-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">langgraph.prebuilt</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_react_agent</span>
</span><span id="__span-8-4"><a href="#__codelineno-8-4" id="__codelineno-8-4" name="__codelineno-8-4"></a>
</span><span id="__span-8-5"><a href="#__codelineno-8-5" id="__codelineno-8-5" name="__codelineno-8-5"></a><span class="c1"># An example of a sensitive tool that requires human review / approval</span>
</span><span id="__span-8-6"><a href="#__codelineno-8-6" id="__codelineno-8-6" name="__codelineno-8-6"></a><span class="k">def</span><span class="w"> </span><span class="nf">book_hotel</span><span class="p">(</span><span class="n">hotel_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="__span-8-7"><a href="#__codelineno-8-7" id="__codelineno-8-7" name="__codelineno-8-7"></a><span class="w">    </span><span class="sd">"""Book a hotel"""</span>
</span><span id="__span-8-8"><a href="#__codelineno-8-8" id="__codelineno-8-8" name="__codelineno-8-8"></a><span class="hll">    <span class="n">response</span> <span class="o">=</span> <span class="n">interrupt</span><span class="p">(</span>  <span class="c1"># (1)!</span>
</span></span><span id="__span-8-9"><a href="#__codelineno-8-9" id="__codelineno-8-9" name="__codelineno-8-9"></a>        <span class="sa">f</span><span class="s2">"Trying to call `book_hotel` with args </span><span class="se">{{</span><span class="s2">'hotel_name': </span><span class="si">{</span><span class="n">hotel_name</span><span class="si">}</span><span class="se">}}</span><span class="s2">. "</span>
</span><span id="__span-8-10"><a href="#__codelineno-8-10" id="__codelineno-8-10" name="__codelineno-8-10"></a>        <span class="s2">"Please approve or suggest edits."</span>
</span><span id="__span-8-11"><a href="#__codelineno-8-11" id="__codelineno-8-11" name="__codelineno-8-11"></a>    <span class="p">)</span>
</span><span id="__span-8-12"><a href="#__codelineno-8-12" id="__codelineno-8-12" name="__codelineno-8-12"></a>    <span class="k">if</span> <span class="n">response</span><span class="p">[</span><span class="s2">"type"</span><span class="p">]</span> <span class="o">==</span> <span class="s2">"accept"</span><span class="p">:</span>
</span><span id="__span-8-13"><a href="#__codelineno-8-13" id="__codelineno-8-13" name="__codelineno-8-13"></a>        <span class="k">pass</span>
</span><span id="__span-8-14"><a href="#__codelineno-8-14" id="__codelineno-8-14" name="__codelineno-8-14"></a>    <span class="k">elif</span> <span class="n">response</span><span class="p">[</span><span class="s2">"type"</span><span class="p">]</span> <span class="o">==</span> <span class="s2">"edit"</span><span class="p">:</span>
</span><span id="__span-8-15"><a href="#__codelineno-8-15" id="__codelineno-8-15" name="__codelineno-8-15"></a>        <span class="n">hotel_name</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s2">"args"</span><span class="p">][</span><span class="s2">"hotel_name"</span><span class="p">]</span>
</span><span id="__span-8-16"><a href="#__codelineno-8-16" id="__codelineno-8-16" name="__codelineno-8-16"></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="__span-8-17"><a href="#__codelineno-8-17" id="__codelineno-8-17" name="__codelineno-8-17"></a>        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Unknown response type: </span><span class="si">{</span><span class="n">response</span><span class="p">[</span><span class="s1">'type'</span><span class="p">]</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</span><span id="__span-8-18"><a href="#__codelineno-8-18" id="__codelineno-8-18" name="__codelineno-8-18"></a>    <span class="k">return</span> <span class="sa">f</span><span class="s2">"Successfully booked a stay at </span><span class="si">{</span><span class="n">hotel_name</span><span class="si">}</span><span class="s2">."</span>
</span><span id="__span-8-19"><a href="#__codelineno-8-19" id="__codelineno-8-19" name="__codelineno-8-19"></a>
</span><span id="__span-8-20"><a href="#__codelineno-8-20" id="__codelineno-8-20" name="__codelineno-8-20"></a><span class="hll"><span class="n">checkpointer</span> <span class="o">=</span> <span class="n">InMemorySaver</span><span class="p">()</span> <span class="c1"># (2)!</span>
</span></span><span id="__span-8-21"><a href="#__codelineno-8-21" id="__codelineno-8-21" name="__codelineno-8-21"></a>
</span><span id="__span-8-22"><a href="#__codelineno-8-22" id="__codelineno-8-22" name="__codelineno-8-22"></a><span class="n">agent</span> <span class="o">=</span> <span class="n">create_react_agent</span><span class="p">(</span>
</span><span id="__span-8-23"><a href="#__codelineno-8-23" id="__codelineno-8-23" name="__codelineno-8-23"></a>    <span class="n">model</span><span class="o">=</span><span class="s2">"anthropic:claude-3-5-sonnet-latest"</span><span class="p">,</span>
</span><span id="__span-8-24"><a href="#__codelineno-8-24" id="__codelineno-8-24" name="__codelineno-8-24"></a>    <span class="n">tools</span><span class="o">=</span><span class="p">[</span><span class="n">book_hotel</span><span class="p">],</span>
</span><span id="__span-8-25"><a href="#__codelineno-8-25" id="__codelineno-8-25" name="__codelineno-8-25"></a><span class="hll">    <span class="n">checkpointer</span><span class="o">=</span><span class="n">checkpointer</span><span class="p">,</span> <span class="c1"># (3)!</span>
</span></span><span id="__span-8-26"><a href="#__codelineno-8-26" id="__codelineno-8-26" name="__codelineno-8-26"></a><span class="p">)</span>
</span></code></pre></div>
<ol>
<li>The <a class="autorefs autorefs-internal" href="../../../reference/types/#langgraph.types.interrupt" title='&lt;code class="doc-symbol doc-symbol-heading doc-symbol-function"&gt;&lt;/code&gt;            &lt;span class="doc doc-object-name doc-function-name"&gt;interrupt&lt;/span&gt;'><code>interrupt</code> function</a> pauses the agent graph at a specific node. In this case, we call <code>interrupt()</code> at the beginning of the tool function, which pauses the graph at the node that executes the tool. The information inside <code>interrupt()</code> (e.g., tool calls) can be presented to a human, and the graph can be resumed with the user input (tool call approval, edit or feedback).</li>
<li>The <code>InMemorySaver</code> is used to store the agent state at every step in the tool calling loop. This enables <a href="../../memory/add-memory/#add-short-term-memory">short-term memory</a> and <a href="../../../concepts/human_in_the_loop/">human-in-the-loop</a> capabilities. In this example, we use <code>InMemorySaver</code> to store the agent state in memory. In a production application, the agent state will be stored in a database.</li>
<li>Initialize the agent with the <code>checkpointer</code>.</li>
</ol>
<p>Run the agent with the <code>stream()</code> method, passing the <code>config</code> object to specify the thread ID. This allows the agent to resume the same conversation on future invocations.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-9-1"><a href="#__codelineno-9-1" id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="n">config</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-9-2"><a href="#__codelineno-9-2" id="__codelineno-9-2" name="__codelineno-9-2"></a>   <span class="s2">"configurable"</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-9-3"><a href="#__codelineno-9-3" id="__codelineno-9-3" name="__codelineno-9-3"></a><span class="hll">      <span class="s2">"thread_id"</span><span class="p">:</span> <span class="s2">"1"</span>
</span></span><span id="__span-9-4"><a href="#__codelineno-9-4" id="__codelineno-9-4" name="__codelineno-9-4"></a>   <span class="p">}</span>
</span><span id="__span-9-5"><a href="#__codelineno-9-5" id="__codelineno-9-5" name="__codelineno-9-5"></a><span class="p">}</span>
</span><span id="__span-9-6"><a href="#__codelineno-9-6" id="__codelineno-9-6" name="__codelineno-9-6"></a>
</span><span id="__span-9-7"><a href="#__codelineno-9-7" id="__codelineno-9-7" name="__codelineno-9-7"></a><span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">agent</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span>
</span><span id="__span-9-8"><a href="#__codelineno-9-8" id="__codelineno-9-8" name="__codelineno-9-8"></a>    <span class="p">{</span><span class="s2">"messages"</span><span class="p">:</span> <span class="p">[{</span><span class="s2">"role"</span><span class="p">:</span> <span class="s2">"user"</span><span class="p">,</span> <span class="s2">"content"</span><span class="p">:</span> <span class="s2">"book a stay at McKittrick hotel"</span><span class="p">}]},</span>
</span><span id="__span-9-9"><a href="#__codelineno-9-9" id="__codelineno-9-9" name="__codelineno-9-9"></a><span class="hll">    <span class="n">config</span>
</span></span><span id="__span-9-10"><a href="#__codelineno-9-10" id="__codelineno-9-10" name="__codelineno-9-10"></a><span class="p">):</span>
</span><span id="__span-9-11"><a href="#__codelineno-9-11" id="__codelineno-9-11" name="__codelineno-9-11"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
</span><span id="__span-9-12"><a href="#__codelineno-9-12" id="__codelineno-9-12" name="__codelineno-9-12"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
</span></code></pre></div>
<blockquote>
<p>You should see that the agent runs until it reaches the <code>interrupt()</code> call, at which point it pauses and waits for human input.</p>
</blockquote>
<p>Resume the agent with a <code>Command(resume=...)</code> to continue based on human input.</p>
<p><sup><i>API Reference: <a href="https://langchain-ai.github.io/langgraph/reference/types/#langgraph.types.Command">Command</a></i></sup></p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-10-1"><a href="#__codelineno-10-1" id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">langgraph.types</span><span class="w"> </span><span class="kn">import</span> <span class="n">Command</span>
</span><span id="__span-10-2"><a href="#__codelineno-10-2" id="__codelineno-10-2" name="__codelineno-10-2"></a>
</span><span id="__span-10-3"><a href="#__codelineno-10-3" id="__codelineno-10-3" name="__codelineno-10-3"></a><span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">agent</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span>
</span><span id="__span-10-4"><a href="#__codelineno-10-4" id="__codelineno-10-4" name="__codelineno-10-4"></a><span class="hll">    <span class="n">Command</span><span class="p">(</span><span class="n">resume</span><span class="o">=</span><span class="p">{</span><span class="s2">"type"</span><span class="p">:</span> <span class="s2">"accept"</span><span class="p">}),</span>  <span class="c1"># (1)!</span>
</span></span><span id="__span-10-5"><a href="#__codelineno-10-5" id="__codelineno-10-5" name="__codelineno-10-5"></a>    <span class="c1"># Command(resume={"type": "edit", "args": {"hotel_name": "McKittrick Hotel"}}),</span>
</span><span id="__span-10-6"><a href="#__codelineno-10-6" id="__codelineno-10-6" name="__codelineno-10-6"></a>    <span class="n">config</span>
</span><span id="__span-10-7"><a href="#__codelineno-10-7" id="__codelineno-10-7" name="__codelineno-10-7"></a><span class="p">):</span>
</span><span id="__span-10-8"><a href="#__codelineno-10-8" id="__codelineno-10-8" name="__codelineno-10-8"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
</span><span id="__span-10-9"><a href="#__codelineno-10-9" id="__codelineno-10-9" name="__codelineno-10-9"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
</span></code></pre></div>
<ol>
<li>The <a class="autorefs autorefs-internal" href="../../../reference/types/#langgraph.types.interrupt" title='&lt;code class="doc-symbol doc-symbol-heading doc-symbol-function"&gt;&lt;/code&gt;            &lt;span class="doc doc-object-name doc-function-name"&gt;interrupt&lt;/span&gt;'><code>interrupt</code> function</a> is used in conjunction with the <a class="autorefs autorefs-internal" href="../../../reference/types/#langgraph.types.Command" title='&lt;code class="doc-symbol doc-symbol-heading doc-symbol-class"&gt;&lt;/code&gt;            &lt;span class="doc doc-object-name doc-class-name"&gt;Command&lt;/span&gt;


  &lt;span class="doc doc-labels"&gt;
      &lt;small class="doc doc-label doc-label-dataclass"&gt;&lt;code&gt;dataclass&lt;/code&gt;&lt;/small&gt;
  &lt;/span&gt;'><code>Command</code></a> object to resume the graph with a value provided by the human.</li>
</ol>
<h3 id="add-interrupts-to-any-tool">Add interrupts to any tool<a class="headerlink" href="#add-interrupts-to-any-tool" title="Permanent link">¶</a></h3>
<p>You can create a wrapper to add interrupts to <em>any</em> tool. The example below provides a reference implementation compatible with <a href="https://github.com/langchain-ai/agent-inbox">Agent Inbox UI</a> and <a href="https://github.com/langchain-ai/agent-chat-ui">Agent Chat UI</a>.</p>
<div class="language-python highlight"><span class="filename">Wrapper that adds human-in-the-loop to any tool</span><pre><span></span><code><span id="__span-11-1"><a href="#__codelineno-11-1" id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Callable</span>
</span><span id="__span-11-2"><a href="#__codelineno-11-2" id="__codelineno-11-2" name="__codelineno-11-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">langchain_core.tools</span><span class="w"> </span><span class="kn">import</span> <span class="n">BaseTool</span><span class="p">,</span> <span class="n">tool</span> <span class="k">as</span> <span class="n">create_tool</span>
</span><span id="__span-11-3"><a href="#__codelineno-11-3" id="__codelineno-11-3" name="__codelineno-11-3"></a><span class="kn">from</span><span class="w"> </span><span class="nn">langchain_core.runnables</span><span class="w"> </span><span class="kn">import</span> <span class="n">RunnableConfig</span>
</span><span id="__span-11-4"><a href="#__codelineno-11-4" id="__codelineno-11-4" name="__codelineno-11-4"></a><span class="kn">from</span><span class="w"> </span><span class="nn">langgraph.types</span><span class="w"> </span><span class="kn">import</span> <span class="n">interrupt</span> 
</span><span id="__span-11-5"><a href="#__codelineno-11-5" id="__codelineno-11-5" name="__codelineno-11-5"></a><span class="kn">from</span><span class="w"> </span><span class="nn">langgraph.prebuilt.interrupt</span><span class="w"> </span><span class="kn">import</span> <span class="n">HumanInterruptConfig</span><span class="p">,</span> <span class="n">HumanInterrupt</span>
</span><span id="__span-11-6"><a href="#__codelineno-11-6" id="__codelineno-11-6" name="__codelineno-11-6"></a>
</span><span id="__span-11-7"><a href="#__codelineno-11-7" id="__codelineno-11-7" name="__codelineno-11-7"></a><span class="k">def</span><span class="w"> </span><span class="nf">add_human_in_the_loop</span><span class="p">(</span>
</span><span id="__span-11-8"><a href="#__codelineno-11-8" id="__codelineno-11-8" name="__codelineno-11-8"></a>    <span class="n">tool</span><span class="p">:</span> <span class="n">Callable</span> <span class="o">|</span> <span class="n">BaseTool</span><span class="p">,</span>
</span><span id="__span-11-9"><a href="#__codelineno-11-9" id="__codelineno-11-9" name="__codelineno-11-9"></a>    <span class="o">*</span><span class="p">,</span>
</span><span id="__span-11-10"><a href="#__codelineno-11-10" id="__codelineno-11-10" name="__codelineno-11-10"></a>    <span class="n">interrupt_config</span><span class="p">:</span> <span class="n">HumanInterruptConfig</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
</span><span id="__span-11-11"><a href="#__codelineno-11-11" id="__codelineno-11-11" name="__codelineno-11-11"></a><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">BaseTool</span><span class="p">:</span>
</span><span id="__span-11-12"><a href="#__codelineno-11-12" id="__codelineno-11-12" name="__codelineno-11-12"></a><span class="w">    </span><span class="sd">"""Wrap a tool to support human-in-the-loop review."""</span> 
</span><span id="__span-11-13"><a href="#__codelineno-11-13" id="__codelineno-11-13" name="__codelineno-11-13"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">tool</span><span class="p">,</span> <span class="n">BaseTool</span><span class="p">):</span>
</span><span id="__span-11-14"><a href="#__codelineno-11-14" id="__codelineno-11-14" name="__codelineno-11-14"></a>        <span class="n">tool</span> <span class="o">=</span> <span class="n">create_tool</span><span class="p">(</span><span class="n">tool</span><span class="p">)</span>
</span><span id="__span-11-15"><a href="#__codelineno-11-15" id="__codelineno-11-15" name="__codelineno-11-15"></a>
</span><span id="__span-11-16"><a href="#__codelineno-11-16" id="__codelineno-11-16" name="__codelineno-11-16"></a>    <span class="k">if</span> <span class="n">interrupt_config</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="__span-11-17"><a href="#__codelineno-11-17" id="__codelineno-11-17" name="__codelineno-11-17"></a>        <span class="n">interrupt_config</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-11-18"><a href="#__codelineno-11-18" id="__codelineno-11-18" name="__codelineno-11-18"></a>            <span class="s2">"allow_accept"</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="__span-11-19"><a href="#__codelineno-11-19" id="__codelineno-11-19" name="__codelineno-11-19"></a>            <span class="s2">"allow_edit"</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="__span-11-20"><a href="#__codelineno-11-20" id="__codelineno-11-20" name="__codelineno-11-20"></a>            <span class="s2">"allow_respond"</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</span><span id="__span-11-21"><a href="#__codelineno-11-21" id="__codelineno-11-21" name="__codelineno-11-21"></a>        <span class="p">}</span>
</span><span id="__span-11-22"><a href="#__codelineno-11-22" id="__codelineno-11-22" name="__codelineno-11-22"></a>
</span><span id="__span-11-23"><a href="#__codelineno-11-23" id="__codelineno-11-23" name="__codelineno-11-23"></a>    <span class="nd">@create_tool</span><span class="p">(</span>  <span class="c1"># (1)!</span>
</span><span id="__span-11-24"><a href="#__codelineno-11-24" id="__codelineno-11-24" name="__codelineno-11-24"></a>        <span class="n">tool</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="__span-11-25"><a href="#__codelineno-11-25" id="__codelineno-11-25" name="__codelineno-11-25"></a>        <span class="n">description</span><span class="o">=</span><span class="n">tool</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
</span><span id="__span-11-26"><a href="#__codelineno-11-26" id="__codelineno-11-26" name="__codelineno-11-26"></a>        <span class="n">args_schema</span><span class="o">=</span><span class="n">tool</span><span class="o">.</span><span class="n">args_schema</span>
</span><span id="__span-11-27"><a href="#__codelineno-11-27" id="__codelineno-11-27" name="__codelineno-11-27"></a>    <span class="p">)</span>
</span><span id="__span-11-28"><a href="#__codelineno-11-28" id="__codelineno-11-28" name="__codelineno-11-28"></a>    <span class="k">def</span><span class="w"> </span><span class="nf">call_tool_with_interrupt</span><span class="p">(</span><span class="n">config</span><span class="p">:</span> <span class="n">RunnableConfig</span><span class="p">,</span> <span class="o">**</span><span class="n">tool_input</span><span class="p">):</span>
</span><span id="__span-11-29"><a href="#__codelineno-11-29" id="__codelineno-11-29" name="__codelineno-11-29"></a>        <span class="n">request</span><span class="p">:</span> <span class="n">HumanInterrupt</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-11-30"><a href="#__codelineno-11-30" id="__codelineno-11-30" name="__codelineno-11-30"></a>            <span class="s2">"action_request"</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-11-31"><a href="#__codelineno-11-31" id="__codelineno-11-31" name="__codelineno-11-31"></a>                <span class="s2">"action"</span><span class="p">:</span> <span class="n">tool</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
</span><span id="__span-11-32"><a href="#__codelineno-11-32" id="__codelineno-11-32" name="__codelineno-11-32"></a>                <span class="s2">"args"</span><span class="p">:</span> <span class="n">tool_input</span>
</span><span id="__span-11-33"><a href="#__codelineno-11-33" id="__codelineno-11-33" name="__codelineno-11-33"></a>            <span class="p">},</span>
</span><span id="__span-11-34"><a href="#__codelineno-11-34" id="__codelineno-11-34" name="__codelineno-11-34"></a>            <span class="s2">"config"</span><span class="p">:</span> <span class="n">interrupt_config</span><span class="p">,</span>
</span><span id="__span-11-35"><a href="#__codelineno-11-35" id="__codelineno-11-35" name="__codelineno-11-35"></a>            <span class="s2">"description"</span><span class="p">:</span> <span class="s2">"Please review the tool call"</span>
</span><span id="__span-11-36"><a href="#__codelineno-11-36" id="__codelineno-11-36" name="__codelineno-11-36"></a>        <span class="p">}</span>
</span><span id="__span-11-37"><a href="#__codelineno-11-37" id="__codelineno-11-37" name="__codelineno-11-37"></a><span class="hll">        <span class="n">response</span> <span class="o">=</span> <span class="n">interrupt</span><span class="p">([</span><span class="n">request</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># (2)!</span>
</span></span><span id="__span-11-38"><a href="#__codelineno-11-38" id="__codelineno-11-38" name="__codelineno-11-38"></a>        <span class="c1"># approve the tool call</span>
</span><span id="__span-11-39"><a href="#__codelineno-11-39" id="__codelineno-11-39" name="__codelineno-11-39"></a>        <span class="k">if</span> <span class="n">response</span><span class="p">[</span><span class="s2">"type"</span><span class="p">]</span> <span class="o">==</span> <span class="s2">"accept"</span><span class="p">:</span>
</span><span id="__span-11-40"><a href="#__codelineno-11-40" id="__codelineno-11-40" name="__codelineno-11-40"></a>            <span class="n">tool_response</span> <span class="o">=</span> <span class="n">tool</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">tool_input</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
</span><span id="__span-11-41"><a href="#__codelineno-11-41" id="__codelineno-11-41" name="__codelineno-11-41"></a>        <span class="c1"># update tool call args</span>
</span><span id="__span-11-42"><a href="#__codelineno-11-42" id="__codelineno-11-42" name="__codelineno-11-42"></a>        <span class="k">elif</span> <span class="n">response</span><span class="p">[</span><span class="s2">"type"</span><span class="p">]</span> <span class="o">==</span> <span class="s2">"edit"</span><span class="p">:</span>
</span><span id="__span-11-43"><a href="#__codelineno-11-43" id="__codelineno-11-43" name="__codelineno-11-43"></a>            <span class="n">tool_input</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s2">"args"</span><span class="p">][</span><span class="s2">"args"</span><span class="p">]</span>
</span><span id="__span-11-44"><a href="#__codelineno-11-44" id="__codelineno-11-44" name="__codelineno-11-44"></a>            <span class="n">tool_response</span> <span class="o">=</span> <span class="n">tool</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">tool_input</span><span class="p">,</span> <span class="n">config</span><span class="p">)</span>
</span><span id="__span-11-45"><a href="#__codelineno-11-45" id="__codelineno-11-45" name="__codelineno-11-45"></a>        <span class="c1"># respond to the LLM with user feedback</span>
</span><span id="__span-11-46"><a href="#__codelineno-11-46" id="__codelineno-11-46" name="__codelineno-11-46"></a>        <span class="k">elif</span> <span class="n">response</span><span class="p">[</span><span class="s2">"type"</span><span class="p">]</span> <span class="o">==</span> <span class="s2">"response"</span><span class="p">:</span>
</span><span id="__span-11-47"><a href="#__codelineno-11-47" id="__codelineno-11-47" name="__codelineno-11-47"></a>            <span class="n">user_feedback</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s2">"args"</span><span class="p">]</span>
</span><span id="__span-11-48"><a href="#__codelineno-11-48" id="__codelineno-11-48" name="__codelineno-11-48"></a>            <span class="n">tool_response</span> <span class="o">=</span> <span class="n">user_feedback</span>
</span><span id="__span-11-49"><a href="#__codelineno-11-49" id="__codelineno-11-49" name="__codelineno-11-49"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-11-50"><a href="#__codelineno-11-50" id="__codelineno-11-50" name="__codelineno-11-50"></a>            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Unsupported interrupt response type: </span><span class="si">{</span><span class="n">response</span><span class="p">[</span><span class="s1">'type'</span><span class="p">]</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</span><span id="__span-11-51"><a href="#__codelineno-11-51" id="__codelineno-11-51" name="__codelineno-11-51"></a>
</span><span id="__span-11-52"><a href="#__codelineno-11-52" id="__codelineno-11-52" name="__codelineno-11-52"></a>        <span class="k">return</span> <span class="n">tool_response</span>
</span><span id="__span-11-53"><a href="#__codelineno-11-53" id="__codelineno-11-53" name="__codelineno-11-53"></a>
</span><span id="__span-11-54"><a href="#__codelineno-11-54" id="__codelineno-11-54" name="__codelineno-11-54"></a>    <span class="k">return</span> <span class="n">call_tool_with_interrupt</span>
</span></code></pre></div>
<ol>
<li>This wrapper creates a new tool that calls <code>interrupt()</code> <strong>before</strong> executing the wrapped tool.</li>
<li><code>interrupt()</code> is using special input and output format that's expected by <a href="https://github.com/langchain-ai/agent-inbox">Agent Inbox UI</a>:<ul>
<li>a list of <a class="autorefs autorefs-internal" href="../../../reference/agents/#langgraph.prebuilt.interrupt.HumanInterrupt" title='&lt;code class="doc-symbol doc-symbol-heading doc-symbol-class"&gt;&lt;/code&gt;            &lt;span class="doc doc-object-name doc-class-name"&gt;HumanInterrupt&lt;/span&gt;'><code>HumanInterrupt</code></a> objects is sent to <code>AgentInbox</code> render interrupt information to the end user</li>
<li>resume value is provided by <code>AgentInbox</code> as a list (i.e., <code>Command(resume=[...])</code>)</li>
</ul>
</li>
</ol>
<p>You can use the <code>add_human_in_the_loop</code> wrapper to add <code>interrupt()</code> to any tool without having to add it <em>inside</em> the tool:</p>
<p><sup><i>API Reference: <a href="https://langchain-ai.github.io/langgraph/reference/checkpoints/#langgraph.checkpoint.memory.InMemorySaver">InMemorySaver</a> | <a href="https://langchain-ai.github.io/langgraph/reference/prebuilt/#langgraph.prebuilt.chat_agent_executor.create_react_agent">create_react_agent</a></i></sup></p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-12-1"><a href="#__codelineno-12-1" id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">langgraph.checkpoint.memory</span><span class="w"> </span><span class="kn">import</span> <span class="n">InMemorySaver</span>
</span><span id="__span-12-2"><a href="#__codelineno-12-2" id="__codelineno-12-2" name="__codelineno-12-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">langgraph.prebuilt</span><span class="w"> </span><span class="kn">import</span> <span class="n">create_react_agent</span>
</span><span id="__span-12-3"><a href="#__codelineno-12-3" id="__codelineno-12-3" name="__codelineno-12-3"></a>
</span><span id="__span-12-4"><a href="#__codelineno-12-4" id="__codelineno-12-4" name="__codelineno-12-4"></a><span class="hll"><span class="n">checkpointer</span> <span class="o">=</span> <span class="n">InMemorySaver</span><span class="p">()</span>
</span></span><span id="__span-12-5"><a href="#__codelineno-12-5" id="__codelineno-12-5" name="__codelineno-12-5"></a>
</span><span id="__span-12-6"><a href="#__codelineno-12-6" id="__codelineno-12-6" name="__codelineno-12-6"></a><span class="k">def</span><span class="w"> </span><span class="nf">book_hotel</span><span class="p">(</span><span class="n">hotel_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="__span-12-7"><a href="#__codelineno-12-7" id="__codelineno-12-7" name="__codelineno-12-7"></a><span class="w">   </span><span class="sd">"""Book a hotel"""</span>
</span><span id="__span-12-8"><a href="#__codelineno-12-8" id="__codelineno-12-8" name="__codelineno-12-8"></a>   <span class="k">return</span> <span class="sa">f</span><span class="s2">"Successfully booked a stay at </span><span class="si">{</span><span class="n">hotel_name</span><span class="si">}</span><span class="s2">."</span>
</span><span id="__span-12-9"><a href="#__codelineno-12-9" id="__codelineno-12-9" name="__codelineno-12-9"></a>
</span><span id="__span-12-10"><a href="#__codelineno-12-10" id="__codelineno-12-10" name="__codelineno-12-10"></a>
</span><span id="__span-12-11"><a href="#__codelineno-12-11" id="__codelineno-12-11" name="__codelineno-12-11"></a><span class="n">agent</span> <span class="o">=</span> <span class="n">create_react_agent</span><span class="p">(</span>
</span><span id="__span-12-12"><a href="#__codelineno-12-12" id="__codelineno-12-12" name="__codelineno-12-12"></a>    <span class="n">model</span><span class="o">=</span><span class="s2">"anthropic:claude-3-5-sonnet-latest"</span><span class="p">,</span>
</span><span id="__span-12-13"><a href="#__codelineno-12-13" id="__codelineno-12-13" name="__codelineno-12-13"></a>    <span class="n">tools</span><span class="o">=</span><span class="p">[</span>
</span><span id="__span-12-14"><a href="#__codelineno-12-14" id="__codelineno-12-14" name="__codelineno-12-14"></a><span class="hll">        <span class="n">add_human_in_the_loop</span><span class="p">(</span><span class="n">book_hotel</span><span class="p">),</span> <span class="c1"># (1)!</span>
</span></span><span id="__span-12-15"><a href="#__codelineno-12-15" id="__codelineno-12-15" name="__codelineno-12-15"></a>    <span class="p">],</span>
</span><span id="__span-12-16"><a href="#__codelineno-12-16" id="__codelineno-12-16" name="__codelineno-12-16"></a><span class="hll">    <span class="n">checkpointer</span><span class="o">=</span><span class="n">checkpointer</span><span class="p">,</span>
</span></span><span id="__span-12-17"><a href="#__codelineno-12-17" id="__codelineno-12-17" name="__codelineno-12-17"></a><span class="p">)</span>
</span><span id="__span-12-18"><a href="#__codelineno-12-18" id="__codelineno-12-18" name="__codelineno-12-18"></a>
</span><span id="__span-12-19"><a href="#__codelineno-12-19" id="__codelineno-12-19" name="__codelineno-12-19"></a><span class="n">config</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"configurable"</span><span class="p">:</span> <span class="p">{</span><span class="s2">"thread_id"</span><span class="p">:</span> <span class="s2">"1"</span><span class="p">}}</span>
</span><span id="__span-12-20"><a href="#__codelineno-12-20" id="__codelineno-12-20" name="__codelineno-12-20"></a>
</span><span id="__span-12-21"><a href="#__codelineno-12-21" id="__codelineno-12-21" name="__codelineno-12-21"></a><span class="c1"># Run the agent</span>
</span><span id="__span-12-22"><a href="#__codelineno-12-22" id="__codelineno-12-22" name="__codelineno-12-22"></a><span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">agent</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span>
</span><span id="__span-12-23"><a href="#__codelineno-12-23" id="__codelineno-12-23" name="__codelineno-12-23"></a>    <span class="p">{</span><span class="s2">"messages"</span><span class="p">:</span> <span class="p">[{</span><span class="s2">"role"</span><span class="p">:</span> <span class="s2">"user"</span><span class="p">,</span> <span class="s2">"content"</span><span class="p">:</span> <span class="s2">"book a stay at McKittrick hotel"</span><span class="p">}]},</span>
</span><span id="__span-12-24"><a href="#__codelineno-12-24" id="__codelineno-12-24" name="__codelineno-12-24"></a><span class="hll">    <span class="n">config</span>
</span></span><span id="__span-12-25"><a href="#__codelineno-12-25" id="__codelineno-12-25" name="__codelineno-12-25"></a><span class="p">):</span>
</span><span id="__span-12-26"><a href="#__codelineno-12-26" id="__codelineno-12-26" name="__codelineno-12-26"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
</span><span id="__span-12-27"><a href="#__codelineno-12-27" id="__codelineno-12-27" name="__codelineno-12-27"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
</span></code></pre></div>
<ol>
<li>The <code>add_human_in_the_loop</code> wrapper is used to add <code>interrupt()</code> to the tool. This allows the agent to pause execution and wait for human input before proceeding with the tool call.</li>
</ol>
<blockquote>
<p>You should see that the agent runs until it reaches the <code>interrupt()</code> call, 
 at which point it pauses and waits for human input.</p>
</blockquote>
<p>Resume the agent with a <code>Command(resume=...)</code>  to continue based on human input.</p>
<p><sup><i>API Reference: <a href="https://langchain-ai.github.io/langgraph/reference/types/#langgraph.types.Command">Command</a></i></sup></p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-13-1"><a href="#__codelineno-13-1" id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">langgraph.types</span><span class="w"> </span><span class="kn">import</span> <span class="n">Command</span> 
</span><span id="__span-13-2"><a href="#__codelineno-13-2" id="__codelineno-13-2" name="__codelineno-13-2"></a>
</span><span id="__span-13-3"><a href="#__codelineno-13-3" id="__codelineno-13-3" name="__codelineno-13-3"></a><span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">agent</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span>
</span><span id="__span-13-4"><a href="#__codelineno-13-4" id="__codelineno-13-4" name="__codelineno-13-4"></a><span class="hll">    <span class="n">Command</span><span class="p">(</span><span class="n">resume</span><span class="o">=</span><span class="p">[{</span><span class="s2">"type"</span><span class="p">:</span> <span class="s2">"accept"</span><span class="p">}]),</span>
</span></span><span id="__span-13-5"><a href="#__codelineno-13-5" id="__codelineno-13-5" name="__codelineno-13-5"></a>    <span class="c1"># Command(resume=[{"type": "edit", "args": {"args": {"hotel_name": "McKittrick Hotel"}}}]),</span>
</span><span id="__span-13-6"><a href="#__codelineno-13-6" id="__codelineno-13-6" name="__codelineno-13-6"></a>    <span class="n">config</span>
</span><span id="__span-13-7"><a href="#__codelineno-13-7" id="__codelineno-13-7" name="__codelineno-13-7"></a><span class="p">):</span>
</span><span id="__span-13-8"><a href="#__codelineno-13-8" id="__codelineno-13-8" name="__codelineno-13-8"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
</span><span id="__span-13-9"><a href="#__codelineno-13-9" id="__codelineno-13-9" name="__codelineno-13-9"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">"</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
</span></code></pre></div>
<h3 id="validate-human-input">Validate human input<a class="headerlink" href="#validate-human-input" title="Permanent link">¶</a></h3>
<p>If you need to validate the input provided by the human within the graph itself (rather than on the client side), you can achieve this by using multiple interrupt calls within a single node.</p>
<p><sup><i>API Reference: <a href="https://langchain-ai.github.io/langgraph/reference/types/#langgraph.types.interrupt">interrupt</a></i></sup></p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-14-1"><a href="#__codelineno-14-1" id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">langgraph.types</span><span class="w"> </span><span class="kn">import</span> <span class="n">interrupt</span>
</span><span id="__span-14-2"><a href="#__codelineno-14-2" id="__codelineno-14-2" name="__codelineno-14-2"></a>
</span><span id="__span-14-3"><a href="#__codelineno-14-3" id="__codelineno-14-3" name="__codelineno-14-3"></a><span class="k">def</span><span class="w"> </span><span class="nf">human_node</span><span class="p">(</span><span class="n">state</span><span class="p">:</span> <span class="n">State</span><span class="p">):</span>
</span><span id="__span-14-4"><a href="#__codelineno-14-4" id="__codelineno-14-4" name="__codelineno-14-4"></a><span class="w">    </span><span class="sd">"""Human node with validation."""</span>
</span><span id="__span-14-5"><a href="#__codelineno-14-5" id="__codelineno-14-5" name="__codelineno-14-5"></a>    <span class="n">question</span> <span class="o">=</span> <span class="s2">"What is your age?"</span>
</span><span id="__span-14-6"><a href="#__codelineno-14-6" id="__codelineno-14-6" name="__codelineno-14-6"></a>
</span><span id="__span-14-7"><a href="#__codelineno-14-7" id="__codelineno-14-7" name="__codelineno-14-7"></a>    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="__span-14-8"><a href="#__codelineno-14-8" id="__codelineno-14-8" name="__codelineno-14-8"></a>        <span class="n">answer</span> <span class="o">=</span> <span class="n">interrupt</span><span class="p">(</span><span class="n">question</span><span class="p">)</span>
</span><span id="__span-14-9"><a href="#__codelineno-14-9" id="__codelineno-14-9" name="__codelineno-14-9"></a>
</span><span id="__span-14-10"><a href="#__codelineno-14-10" id="__codelineno-14-10" name="__codelineno-14-10"></a>        <span class="c1"># Validate answer, if the answer isn't valid ask for input again.</span>
</span><span id="__span-14-11"><a href="#__codelineno-14-11" id="__codelineno-14-11" name="__codelineno-14-11"></a>        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">answer</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span> <span class="ow">or</span> <span class="n">answer</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="__span-14-12"><a href="#__codelineno-14-12" id="__codelineno-14-12" name="__codelineno-14-12"></a>            <span class="n">question</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"'</span><span class="si">{</span><span class="n">answer</span><span class="si">}</span><span class="s2"> is not a valid age. What is your age?"</span>
</span><span id="__span-14-13"><a href="#__codelineno-14-13" id="__codelineno-14-13" name="__codelineno-14-13"></a>            <span class="n">answer</span> <span class="o">=</span> <span class="kc">None</span>
</span><span id="__span-14-14"><a href="#__codelineno-14-14" id="__codelineno-14-14" name="__codelineno-14-14"></a>            <span class="k">continue</span>
</span><span id="__span-14-15"><a href="#__codelineno-14-15" id="__codelineno-14-15" name="__codelineno-14-15"></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="__span-14-16"><a href="#__codelineno-14-16" id="__codelineno-14-16" name="__codelineno-14-16"></a>            <span class="c1"># If the answer is valid, we can proceed.</span>
</span><span id="__span-14-17"><a href="#__codelineno-14-17" id="__codelineno-14-17" name="__codelineno-14-17"></a>            <span class="k">break</span>
</span><span id="__span-14-18"><a href="#__codelineno-14-18" id="__codelineno-14-18" name="__codelineno-14-18"></a>
</span><span id="__span-14-19"><a href="#__codelineno-14-19" id="__codelineno-14-19" name="__codelineno-14-19"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"The human in the loop is </span><span class="si">{</span><span class="n">answer</span><span class="si">}</span><span class="s2"> years old."</span><span class="p">)</span>
</span><span id="__span-14-20"><a href="#__codelineno-14-20" id="__codelineno-14-20" name="__codelineno-14-20"></a>    <span class="k">return</span> <span class="p">{</span>
</span><span id="__span-14-21"><a href="#__codelineno-14-21" id="__codelineno-14-21" name="__codelineno-14-21"></a>        <span class="s2">"age"</span><span class="p">:</span> <span class="n">answer</span>
</span><span id="__span-14-22"><a href="#__codelineno-14-22" id="__codelineno-14-22" name="__codelineno-14-22"></a>    <span class="p">}</span>
</span></code></pre></div>
<details class="example">
<summary>Extended example: validating user input</summary>
<div class="language-python highlight"><pre><span></span><code><span id="__span-15-1"><a href="#__codelineno-15-1" id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">TypedDict</span>
</span><span id="__span-15-2"><a href="#__codelineno-15-2" id="__codelineno-15-2" name="__codelineno-15-2"></a><span class="kn">import</span><span class="w"> </span><span class="nn">uuid</span>
</span><span id="__span-15-3"><a href="#__codelineno-15-3" id="__codelineno-15-3" name="__codelineno-15-3"></a>
</span><span id="__span-15-4"><a href="#__codelineno-15-4" id="__codelineno-15-4" name="__codelineno-15-4"></a><span class="kn">from</span><span class="w"> </span><span class="nn">langgraph.constants</span><span class="w"> </span><span class="kn">import</span> <span class="n">START</span><span class="p">,</span> <span class="n">END</span>
</span><span id="__span-15-5"><a href="#__codelineno-15-5" id="__codelineno-15-5" name="__codelineno-15-5"></a><span class="kn">from</span><span class="w"> </span><span class="nn">langgraph.graph</span><span class="w"> </span><span class="kn">import</span> <span class="n">StateGraph</span>
</span><span id="__span-15-6"><a href="#__codelineno-15-6" id="__codelineno-15-6" name="__codelineno-15-6"></a><span class="kn">from</span><span class="w"> </span><span class="nn">langgraph.types</span><span class="w"> </span><span class="kn">import</span> <span class="n">interrupt</span><span class="p">,</span> <span class="n">Command</span>
</span><span id="__span-15-7"><a href="#__codelineno-15-7" id="__codelineno-15-7" name="__codelineno-15-7"></a><span class="kn">from</span><span class="w"> </span><span class="nn">langgraph.checkpoint.memory</span><span class="w"> </span><span class="kn">import</span> <span class="n">MemorySaver</span>
</span><span id="__span-15-8"><a href="#__codelineno-15-8" id="__codelineno-15-8" name="__codelineno-15-8"></a>
</span><span id="__span-15-9"><a href="#__codelineno-15-9" id="__codelineno-15-9" name="__codelineno-15-9"></a><span class="c1"># Define graph state</span>
</span><span id="__span-15-10"><a href="#__codelineno-15-10" id="__codelineno-15-10" name="__codelineno-15-10"></a><span class="k">class</span><span class="w"> </span><span class="nc">State</span><span class="p">(</span><span class="n">TypedDict</span><span class="p">):</span>
</span><span id="__span-15-11"><a href="#__codelineno-15-11" id="__codelineno-15-11" name="__codelineno-15-11"></a>    <span class="n">age</span><span class="p">:</span> <span class="nb">int</span>
</span><span id="__span-15-12"><a href="#__codelineno-15-12" id="__codelineno-15-12" name="__codelineno-15-12"></a>
</span><span id="__span-15-13"><a href="#__codelineno-15-13" id="__codelineno-15-13" name="__codelineno-15-13"></a><span class="c1"># Node that asks for human input and validates it</span>
</span><span id="__span-15-14"><a href="#__codelineno-15-14" id="__codelineno-15-14" name="__codelineno-15-14"></a><span class="k">def</span><span class="w"> </span><span class="nf">get_valid_age</span><span class="p">(</span><span class="n">state</span><span class="p">:</span> <span class="n">State</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">State</span><span class="p">:</span>
</span><span id="__span-15-15"><a href="#__codelineno-15-15" id="__codelineno-15-15" name="__codelineno-15-15"></a>    <span class="n">prompt</span> <span class="o">=</span> <span class="s2">"Please enter your age (must be a non-negative integer)."</span>
</span><span id="__span-15-16"><a href="#__codelineno-15-16" id="__codelineno-15-16" name="__codelineno-15-16"></a>
</span><span id="__span-15-17"><a href="#__codelineno-15-17" id="__codelineno-15-17" name="__codelineno-15-17"></a>    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span><span id="__span-15-18"><a href="#__codelineno-15-18" id="__codelineno-15-18" name="__codelineno-15-18"></a>        <span class="n">user_input</span> <span class="o">=</span> <span class="n">interrupt</span><span class="p">(</span><span class="n">prompt</span><span class="p">)</span>
</span><span id="__span-15-19"><a href="#__codelineno-15-19" id="__codelineno-15-19" name="__codelineno-15-19"></a>
</span><span id="__span-15-20"><a href="#__codelineno-15-20" id="__codelineno-15-20" name="__codelineno-15-20"></a>        <span class="c1"># Validate the input</span>
</span><span id="__span-15-21"><a href="#__codelineno-15-21" id="__codelineno-15-21" name="__codelineno-15-21"></a>        <span class="k">try</span><span class="p">:</span>
</span><span id="__span-15-22"><a href="#__codelineno-15-22" id="__codelineno-15-22" name="__codelineno-15-22"></a>            <span class="n">age</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">user_input</span><span class="p">)</span>
</span><span id="__span-15-23"><a href="#__codelineno-15-23" id="__codelineno-15-23" name="__codelineno-15-23"></a>            <span class="k">if</span> <span class="n">age</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span id="__span-15-24"><a href="#__codelineno-15-24" id="__codelineno-15-24" name="__codelineno-15-24"></a>                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">"Age must be non-negative."</span><span class="p">)</span>
</span><span id="__span-15-25"><a href="#__codelineno-15-25" id="__codelineno-15-25" name="__codelineno-15-25"></a>            <span class="k">break</span>  <span class="c1"># Valid input received</span>
</span><span id="__span-15-26"><a href="#__codelineno-15-26" id="__codelineno-15-26" name="__codelineno-15-26"></a>        <span class="k">except</span> <span class="p">(</span><span class="ne">ValueError</span><span class="p">,</span> <span class="ne">TypeError</span><span class="p">):</span>
</span><span id="__span-15-27"><a href="#__codelineno-15-27" id="__codelineno-15-27" name="__codelineno-15-27"></a>            <span class="n">prompt</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"'</span><span class="si">{</span><span class="n">user_input</span><span class="si">}</span><span class="s2">' is not valid. Please enter a non-negative integer for age."</span>
</span><span id="__span-15-28"><a href="#__codelineno-15-28" id="__codelineno-15-28" name="__codelineno-15-28"></a>
</span><span id="__span-15-29"><a href="#__codelineno-15-29" id="__codelineno-15-29" name="__codelineno-15-29"></a>    <span class="k">return</span> <span class="p">{</span><span class="s2">"age"</span><span class="p">:</span> <span class="n">age</span><span class="p">}</span>
</span><span id="__span-15-30"><a href="#__codelineno-15-30" id="__codelineno-15-30" name="__codelineno-15-30"></a>
</span><span id="__span-15-31"><a href="#__codelineno-15-31" id="__codelineno-15-31" name="__codelineno-15-31"></a><span class="c1"># Node that uses the valid input</span>
</span><span id="__span-15-32"><a href="#__codelineno-15-32" id="__codelineno-15-32" name="__codelineno-15-32"></a><span class="k">def</span><span class="w"> </span><span class="nf">report_age</span><span class="p">(</span><span class="n">state</span><span class="p">:</span> <span class="n">State</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">State</span><span class="p">:</span>
</span><span id="__span-15-33"><a href="#__codelineno-15-33" id="__codelineno-15-33" name="__codelineno-15-33"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"✅ Human is </span><span class="si">{</span><span class="n">state</span><span class="p">[</span><span class="s1">'age'</span><span class="p">]</span><span class="si">}</span><span class="s2"> years old."</span><span class="p">)</span>
</span><span id="__span-15-34"><a href="#__codelineno-15-34" id="__codelineno-15-34" name="__codelineno-15-34"></a>    <span class="k">return</span> <span class="n">state</span>
</span><span id="__span-15-35"><a href="#__codelineno-15-35" id="__codelineno-15-35" name="__codelineno-15-35"></a>
</span><span id="__span-15-36"><a href="#__codelineno-15-36" id="__codelineno-15-36" name="__codelineno-15-36"></a><span class="c1"># Build the graph</span>
</span><span id="__span-15-37"><a href="#__codelineno-15-37" id="__codelineno-15-37" name="__codelineno-15-37"></a><span class="n">builder</span> <span class="o">=</span> <span class="n">StateGraph</span><span class="p">(</span><span class="n">State</span><span class="p">)</span>
</span><span id="__span-15-38"><a href="#__codelineno-15-38" id="__codelineno-15-38" name="__codelineno-15-38"></a><span class="n">builder</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">"get_valid_age"</span><span class="p">,</span> <span class="n">get_valid_age</span><span class="p">)</span>
</span><span id="__span-15-39"><a href="#__codelineno-15-39" id="__codelineno-15-39" name="__codelineno-15-39"></a><span class="n">builder</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">"report_age"</span><span class="p">,</span> <span class="n">report_age</span><span class="p">)</span>
</span><span id="__span-15-40"><a href="#__codelineno-15-40" id="__codelineno-15-40" name="__codelineno-15-40"></a>
</span><span id="__span-15-41"><a href="#__codelineno-15-41" id="__codelineno-15-41" name="__codelineno-15-41"></a><span class="n">builder</span><span class="o">.</span><span class="n">set_entry_point</span><span class="p">(</span><span class="s2">"get_valid_age"</span><span class="p">)</span>
</span><span id="__span-15-42"><a href="#__codelineno-15-42" id="__codelineno-15-42" name="__codelineno-15-42"></a><span class="n">builder</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="s2">"get_valid_age"</span><span class="p">,</span> <span class="s2">"report_age"</span><span class="p">)</span>
</span><span id="__span-15-43"><a href="#__codelineno-15-43" id="__codelineno-15-43" name="__codelineno-15-43"></a><span class="n">builder</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="s2">"report_age"</span><span class="p">,</span> <span class="n">END</span><span class="p">)</span>
</span><span id="__span-15-44"><a href="#__codelineno-15-44" id="__codelineno-15-44" name="__codelineno-15-44"></a>
</span><span id="__span-15-45"><a href="#__codelineno-15-45" id="__codelineno-15-45" name="__codelineno-15-45"></a><span class="c1"># Create the graph with a memory checkpointer</span>
</span><span id="__span-15-46"><a href="#__codelineno-15-46" id="__codelineno-15-46" name="__codelineno-15-46"></a><span class="n">checkpointer</span> <span class="o">=</span> <span class="n">MemorySaver</span><span class="p">()</span>
</span><span id="__span-15-47"><a href="#__codelineno-15-47" id="__codelineno-15-47" name="__codelineno-15-47"></a><span class="n">graph</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">checkpointer</span><span class="o">=</span><span class="n">checkpointer</span><span class="p">)</span>
</span><span id="__span-15-48"><a href="#__codelineno-15-48" id="__codelineno-15-48" name="__codelineno-15-48"></a>
</span><span id="__span-15-49"><a href="#__codelineno-15-49" id="__codelineno-15-49" name="__codelineno-15-49"></a><span class="c1"># Run the graph until the first interrupt</span>
</span><span id="__span-15-50"><a href="#__codelineno-15-50" id="__codelineno-15-50" name="__codelineno-15-50"></a><span class="n">config</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"configurable"</span><span class="p">:</span> <span class="p">{</span><span class="s2">"thread_id"</span><span class="p">:</span> <span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">()}}</span>
</span><span id="__span-15-51"><a href="#__codelineno-15-51" id="__codelineno-15-51" name="__codelineno-15-51"></a><span class="n">result</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">invoke</span><span class="p">({},</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">)</span>
</span><span id="__span-15-52"><a href="#__codelineno-15-52" id="__codelineno-15-52" name="__codelineno-15-52"></a><span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s2">"__interrupt__"</span><span class="p">])</span>  <span class="c1"># First prompt: "Please enter your age..."</span>
</span><span id="__span-15-53"><a href="#__codelineno-15-53" id="__codelineno-15-53" name="__codelineno-15-53"></a>
</span><span id="__span-15-54"><a href="#__codelineno-15-54" id="__codelineno-15-54" name="__codelineno-15-54"></a><span class="c1"># Simulate an invalid input (e.g., string instead of integer)</span>
</span><span id="__span-15-55"><a href="#__codelineno-15-55" id="__codelineno-15-55" name="__codelineno-15-55"></a><span class="n">result</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">Command</span><span class="p">(</span><span class="n">resume</span><span class="o">=</span><span class="s2">"not a number"</span><span class="p">),</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">)</span>
</span><span id="__span-15-56"><a href="#__codelineno-15-56" id="__codelineno-15-56" name="__codelineno-15-56"></a><span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s2">"__interrupt__"</span><span class="p">])</span>  <span class="c1"># Follow-up prompt with validation message</span>
</span><span id="__span-15-57"><a href="#__codelineno-15-57" id="__codelineno-15-57" name="__codelineno-15-57"></a>
</span><span id="__span-15-58"><a href="#__codelineno-15-58" id="__codelineno-15-58" name="__codelineno-15-58"></a><span class="c1"># Simulate a second invalid input (e.g., negative number)</span>
</span><span id="__span-15-59"><a href="#__codelineno-15-59" id="__codelineno-15-59" name="__codelineno-15-59"></a><span class="n">result</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">Command</span><span class="p">(</span><span class="n">resume</span><span class="o">=</span><span class="s2">"-10"</span><span class="p">),</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">)</span>
</span><span id="__span-15-60"><a href="#__codelineno-15-60" id="__codelineno-15-60" name="__codelineno-15-60"></a><span class="nb">print</span><span class="p">(</span><span class="n">result</span><span class="p">[</span><span class="s2">"__interrupt__"</span><span class="p">])</span>  <span class="c1"># Another retry</span>
</span><span id="__span-15-61"><a href="#__codelineno-15-61" id="__codelineno-15-61" name="__codelineno-15-61"></a>
</span><span id="__span-15-62"><a href="#__codelineno-15-62" id="__codelineno-15-62" name="__codelineno-15-62"></a><span class="c1"># Provide valid input</span>
</span><span id="__span-15-63"><a href="#__codelineno-15-63" id="__codelineno-15-63" name="__codelineno-15-63"></a><span class="n">final_result</span> <span class="o">=</span> <span class="n">graph</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">Command</span><span class="p">(</span><span class="n">resume</span><span class="o">=</span><span class="s2">"25"</span><span class="p">),</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">)</span>
</span><span id="__span-15-64"><a href="#__codelineno-15-64" id="__codelineno-15-64" name="__codelineno-15-64"></a><span class="nb">print</span><span class="p">(</span><span class="n">final_result</span><span class="p">)</span>  <span class="c1"># Should include the valid age</span>
</span></code></pre></div>
</details>
<h2 id="debug-with-interrupts">Debug with interrupts<a class="headerlink" href="#debug-with-interrupts" title="Permanent link">¶</a></h2>
<p>To debug and test a graph, use <a href="../../../concepts/human_in_the_loop/#key-capabilities">static interrupts</a> (also known as static breakpoints) to step through the graph execution one node at a time or to pause the graph execution at specific nodes. Static interrupts are triggered at defined points either before or after a node executes. You can set static interrupts by specifying <code>interrupt_before</code> and <code>interrupt_after</code> at compile time or run time.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Static interrupts are <strong>not</strong> recommended for human-in-the-loop workflows. Use <a href="#pause-using-interrupt">dynamic interrupts</a> instead.</p>
</div>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio"><input id="__tabbed_1_2" name="__tabbed_1" type="radio"><div class="tabbed-labels"><label for="__tabbed_1_1">Compile time</label><label for="__tabbed_1_2">Run time</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-python highlight"><pre><span></span><code><span id="__span-16-1"><a href="#__codelineno-16-1" id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="hll"><span class="n">graph</span> <span class="o">=</span> <span class="n">graph_builder</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span> <span class="c1"># (1)!</span>
</span></span><span id="__span-16-2"><a href="#__codelineno-16-2" id="__codelineno-16-2" name="__codelineno-16-2"></a><span class="hll">    <span class="n">interrupt_before</span><span class="o">=</span><span class="p">[</span><span class="s2">"node_a"</span><span class="p">],</span> <span class="c1"># (2)!</span>
</span></span><span id="__span-16-3"><a href="#__codelineno-16-3" id="__codelineno-16-3" name="__codelineno-16-3"></a><span class="hll">    <span class="n">interrupt_after</span><span class="o">=</span><span class="p">[</span><span class="s2">"node_b"</span><span class="p">,</span> <span class="s2">"node_c"</span><span class="p">],</span> <span class="c1"># (3)!</span>
</span></span><span id="__span-16-4"><a href="#__codelineno-16-4" id="__codelineno-16-4" name="__codelineno-16-4"></a>    <span class="n">checkpointer</span><span class="o">=</span><span class="n">checkpointer</span><span class="p">,</span> <span class="c1"># (4)!</span>
</span><span id="__span-16-5"><a href="#__codelineno-16-5" id="__codelineno-16-5" name="__codelineno-16-5"></a><span class="p">)</span>
</span><span id="__span-16-6"><a href="#__codelineno-16-6" id="__codelineno-16-6" name="__codelineno-16-6"></a>
</span><span id="__span-16-7"><a href="#__codelineno-16-7" id="__codelineno-16-7" name="__codelineno-16-7"></a><span class="n">config</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-16-8"><a href="#__codelineno-16-8" id="__codelineno-16-8" name="__codelineno-16-8"></a>    <span class="s2">"configurable"</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-16-9"><a href="#__codelineno-16-9" id="__codelineno-16-9" name="__codelineno-16-9"></a>        <span class="s2">"thread_id"</span><span class="p">:</span> <span class="s2">"some_thread"</span>
</span><span id="__span-16-10"><a href="#__codelineno-16-10" id="__codelineno-16-10" name="__codelineno-16-10"></a>    <span class="p">}</span>
</span><span id="__span-16-11"><a href="#__codelineno-16-11" id="__codelineno-16-11" name="__codelineno-16-11"></a><span class="p">}</span>
</span><span id="__span-16-12"><a href="#__codelineno-16-12" id="__codelineno-16-12" name="__codelineno-16-12"></a>
</span><span id="__span-16-13"><a href="#__codelineno-16-13" id="__codelineno-16-13" name="__codelineno-16-13"></a><span class="c1"># Run the graph until the breakpoint</span>
</span><span id="__span-16-14"><a href="#__codelineno-16-14" id="__codelineno-16-14" name="__codelineno-16-14"></a><span class="n">graph</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">inputs</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">thread_config</span><span class="p">)</span> <span class="c1"># (5)!</span>
</span><span id="__span-16-15"><a href="#__codelineno-16-15" id="__codelineno-16-15" name="__codelineno-16-15"></a>
</span><span id="__span-16-16"><a href="#__codelineno-16-16" id="__codelineno-16-16" name="__codelineno-16-16"></a><span class="c1"># Resume the graph</span>
</span><span id="__span-16-17"><a href="#__codelineno-16-17" id="__codelineno-16-17" name="__codelineno-16-17"></a><span class="n">graph</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">thread_config</span><span class="p">)</span> <span class="c1"># (6)!</span>
</span></code></pre></div>
<ol>
<li>The breakpoints are set during <code>compile</code> time.</li>
<li><code>interrupt_before</code> specifies the nodes where execution should pause before the node is executed.</li>
<li><code>interrupt_after</code> specifies the nodes where execution should pause after the node is executed.</li>
<li>A checkpointer is required to enable breakpoints.</li>
<li>The graph is run until the first breakpoint is hit.</li>
<li>The graph is resumed by passing in <code>None</code> for the input. This will run the graph until the next breakpoint is hit.</li>
</ol>
</div>
<div class="tabbed-block">
<div class="language-python highlight"><pre><span></span><code><span id="__span-17-1"><a href="#__codelineno-17-1" id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="hll"><span class="n">graph</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span> <span class="c1"># (1)!</span>
</span></span><span id="__span-17-2"><a href="#__codelineno-17-2" id="__codelineno-17-2" name="__codelineno-17-2"></a>    <span class="n">inputs</span><span class="p">,</span> 
</span><span id="__span-17-3"><a href="#__codelineno-17-3" id="__codelineno-17-3" name="__codelineno-17-3"></a><span class="hll">    <span class="n">interrupt_before</span><span class="o">=</span><span class="p">[</span><span class="s2">"node_a"</span><span class="p">],</span> <span class="c1"># (2)!</span>
</span></span><span id="__span-17-4"><a href="#__codelineno-17-4" id="__codelineno-17-4" name="__codelineno-17-4"></a><span class="hll">    <span class="n">interrupt_after</span><span class="o">=</span><span class="p">[</span><span class="s2">"node_b"</span><span class="p">,</span> <span class="s2">"node_c"</span><span class="p">]</span> <span class="c1"># (3)!</span>
</span></span><span id="__span-17-5"><a href="#__codelineno-17-5" id="__codelineno-17-5" name="__codelineno-17-5"></a>    <span class="n">config</span><span class="o">=</span><span class="p">{</span>
</span><span id="__span-17-6"><a href="#__codelineno-17-6" id="__codelineno-17-6" name="__codelineno-17-6"></a>        <span class="s2">"configurable"</span><span class="p">:</span> <span class="p">{</span><span class="s2">"thread_id"</span><span class="p">:</span> <span class="s2">"some_thread"</span><span class="p">}</span>
</span><span id="__span-17-7"><a href="#__codelineno-17-7" id="__codelineno-17-7" name="__codelineno-17-7"></a>    <span class="p">},</span> 
</span><span id="__span-17-8"><a href="#__codelineno-17-8" id="__codelineno-17-8" name="__codelineno-17-8"></a><span class="p">)</span>
</span><span id="__span-17-9"><a href="#__codelineno-17-9" id="__codelineno-17-9" name="__codelineno-17-9"></a>
</span><span id="__span-17-10"><a href="#__codelineno-17-10" id="__codelineno-17-10" name="__codelineno-17-10"></a><span class="n">config</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-17-11"><a href="#__codelineno-17-11" id="__codelineno-17-11" name="__codelineno-17-11"></a>    <span class="s2">"configurable"</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-17-12"><a href="#__codelineno-17-12" id="__codelineno-17-12" name="__codelineno-17-12"></a>        <span class="s2">"thread_id"</span><span class="p">:</span> <span class="s2">"some_thread"</span>
</span><span id="__span-17-13"><a href="#__codelineno-17-13" id="__codelineno-17-13" name="__codelineno-17-13"></a>    <span class="p">}</span>
</span><span id="__span-17-14"><a href="#__codelineno-17-14" id="__codelineno-17-14" name="__codelineno-17-14"></a><span class="p">}</span>
</span><span id="__span-17-15"><a href="#__codelineno-17-15" id="__codelineno-17-15" name="__codelineno-17-15"></a>
</span><span id="__span-17-16"><a href="#__codelineno-17-16" id="__codelineno-17-16" name="__codelineno-17-16"></a><span class="c1"># Run the graph until the breakpoint</span>
</span><span id="__span-17-17"><a href="#__codelineno-17-17" id="__codelineno-17-17" name="__codelineno-17-17"></a><span class="n">graph</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">inputs</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">)</span> <span class="c1"># (4)!</span>
</span><span id="__span-17-18"><a href="#__codelineno-17-18" id="__codelineno-17-18" name="__codelineno-17-18"></a>
</span><span id="__span-17-19"><a href="#__codelineno-17-19" id="__codelineno-17-19" name="__codelineno-17-19"></a><span class="c1"># Resume the graph</span>
</span><span id="__span-17-20"><a href="#__codelineno-17-20" id="__codelineno-17-20" name="__codelineno-17-20"></a><span class="n">graph</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">config</span><span class="o">=</span><span class="n">config</span><span class="p">)</span> <span class="c1"># (5)!</span>
</span></code></pre></div>
<ol>
<li><code>graph.invoke</code> is called with the <code>interrupt_before</code> and <code>interrupt_after</code> parameters. This is a run-time configuration and can be changed for every invocation.</li>
<li><code>interrupt_before</code> specifies the nodes where execution should pause before the node is executed.</li>
<li><code>interrupt_after</code> specifies the nodes where execution should pause after the node is executed.</li>
<li>The graph is run until the first breakpoint is hit.</li>
<li>The graph is resumed by passing in <code>None</code> for the input. This will run the graph until the next breakpoint is hit.</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You cannot set static breakpoints at runtime for <strong>sub-graphs</strong>.
If you have a sub-graph, you must set the breakpoints at compilation time.</p>
</div>
</div>
</div>
</input></input></div>
<details class="example">
<summary>Setting static breakpoints</summary>
<div class="language-python highlight"><pre><span></span><code><span id="__span-18-1"><a href="#__codelineno-18-1" id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">IPython.display</span><span class="w"> </span><span class="kn">import</span> <span class="n">Image</span><span class="p">,</span> <span class="n">display</span>
</span><span id="__span-18-2"><a href="#__codelineno-18-2" id="__codelineno-18-2" name="__codelineno-18-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">typing_extensions</span><span class="w"> </span><span class="kn">import</span> <span class="n">TypedDict</span>
</span><span id="__span-18-3"><a href="#__codelineno-18-3" id="__codelineno-18-3" name="__codelineno-18-3"></a>
</span><span id="__span-18-4"><a href="#__codelineno-18-4" id="__codelineno-18-4" name="__codelineno-18-4"></a><span class="kn">from</span><span class="w"> </span><span class="nn">langgraph.checkpoint.memory</span><span class="w"> </span><span class="kn">import</span> <span class="n">InMemorySaver</span> 
</span><span id="__span-18-5"><a href="#__codelineno-18-5" id="__codelineno-18-5" name="__codelineno-18-5"></a><span class="kn">from</span><span class="w"> </span><span class="nn">langgraph.graph</span><span class="w"> </span><span class="kn">import</span> <span class="n">StateGraph</span><span class="p">,</span> <span class="n">START</span><span class="p">,</span> <span class="n">END</span>
</span><span id="__span-18-6"><a href="#__codelineno-18-6" id="__codelineno-18-6" name="__codelineno-18-6"></a>
</span><span id="__span-18-7"><a href="#__codelineno-18-7" id="__codelineno-18-7" name="__codelineno-18-7"></a>
</span><span id="__span-18-8"><a href="#__codelineno-18-8" id="__codelineno-18-8" name="__codelineno-18-8"></a><span class="k">class</span><span class="w"> </span><span class="nc">State</span><span class="p">(</span><span class="n">TypedDict</span><span class="p">):</span>
</span><span id="__span-18-9"><a href="#__codelineno-18-9" id="__codelineno-18-9" name="__codelineno-18-9"></a>    <span class="nb">input</span><span class="p">:</span> <span class="nb">str</span>
</span><span id="__span-18-10"><a href="#__codelineno-18-10" id="__codelineno-18-10" name="__codelineno-18-10"></a>
</span><span id="__span-18-11"><a href="#__codelineno-18-11" id="__codelineno-18-11" name="__codelineno-18-11"></a>
</span><span id="__span-18-12"><a href="#__codelineno-18-12" id="__codelineno-18-12" name="__codelineno-18-12"></a><span class="k">def</span><span class="w"> </span><span class="nf">step_1</span><span class="p">(</span><span class="n">state</span><span class="p">):</span>
</span><span id="__span-18-13"><a href="#__codelineno-18-13" id="__codelineno-18-13" name="__codelineno-18-13"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">"---Step 1---"</span><span class="p">)</span>
</span><span id="__span-18-14"><a href="#__codelineno-18-14" id="__codelineno-18-14" name="__codelineno-18-14"></a>    <span class="k">pass</span>
</span><span id="__span-18-15"><a href="#__codelineno-18-15" id="__codelineno-18-15" name="__codelineno-18-15"></a>
</span><span id="__span-18-16"><a href="#__codelineno-18-16" id="__codelineno-18-16" name="__codelineno-18-16"></a>
</span><span id="__span-18-17"><a href="#__codelineno-18-17" id="__codelineno-18-17" name="__codelineno-18-17"></a><span class="k">def</span><span class="w"> </span><span class="nf">step_2</span><span class="p">(</span><span class="n">state</span><span class="p">):</span>
</span><span id="__span-18-18"><a href="#__codelineno-18-18" id="__codelineno-18-18" name="__codelineno-18-18"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">"---Step 2---"</span><span class="p">)</span>
</span><span id="__span-18-19"><a href="#__codelineno-18-19" id="__codelineno-18-19" name="__codelineno-18-19"></a>    <span class="k">pass</span>
</span><span id="__span-18-20"><a href="#__codelineno-18-20" id="__codelineno-18-20" name="__codelineno-18-20"></a>
</span><span id="__span-18-21"><a href="#__codelineno-18-21" id="__codelineno-18-21" name="__codelineno-18-21"></a>
</span><span id="__span-18-22"><a href="#__codelineno-18-22" id="__codelineno-18-22" name="__codelineno-18-22"></a><span class="k">def</span><span class="w"> </span><span class="nf">step_3</span><span class="p">(</span><span class="n">state</span><span class="p">):</span>
</span><span id="__span-18-23"><a href="#__codelineno-18-23" id="__codelineno-18-23" name="__codelineno-18-23"></a>    <span class="nb">print</span><span class="p">(</span><span class="s2">"---Step 3---"</span><span class="p">)</span>
</span><span id="__span-18-24"><a href="#__codelineno-18-24" id="__codelineno-18-24" name="__codelineno-18-24"></a>    <span class="k">pass</span>
</span><span id="__span-18-25"><a href="#__codelineno-18-25" id="__codelineno-18-25" name="__codelineno-18-25"></a>
</span><span id="__span-18-26"><a href="#__codelineno-18-26" id="__codelineno-18-26" name="__codelineno-18-26"></a>
</span><span id="__span-18-27"><a href="#__codelineno-18-27" id="__codelineno-18-27" name="__codelineno-18-27"></a><span class="n">builder</span> <span class="o">=</span> <span class="n">StateGraph</span><span class="p">(</span><span class="n">State</span><span class="p">)</span>
</span><span id="__span-18-28"><a href="#__codelineno-18-28" id="__codelineno-18-28" name="__codelineno-18-28"></a><span class="n">builder</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">"step_1"</span><span class="p">,</span> <span class="n">step_1</span><span class="p">)</span>
</span><span id="__span-18-29"><a href="#__codelineno-18-29" id="__codelineno-18-29" name="__codelineno-18-29"></a><span class="n">builder</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">"step_2"</span><span class="p">,</span> <span class="n">step_2</span><span class="p">)</span>
</span><span id="__span-18-30"><a href="#__codelineno-18-30" id="__codelineno-18-30" name="__codelineno-18-30"></a><span class="n">builder</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">"step_3"</span><span class="p">,</span> <span class="n">step_3</span><span class="p">)</span>
</span><span id="__span-18-31"><a href="#__codelineno-18-31" id="__codelineno-18-31" name="__codelineno-18-31"></a><span class="n">builder</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">START</span><span class="p">,</span> <span class="s2">"step_1"</span><span class="p">)</span>
</span><span id="__span-18-32"><a href="#__codelineno-18-32" id="__codelineno-18-32" name="__codelineno-18-32"></a><span class="n">builder</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="s2">"step_1"</span><span class="p">,</span> <span class="s2">"step_2"</span><span class="p">)</span>
</span><span id="__span-18-33"><a href="#__codelineno-18-33" id="__codelineno-18-33" name="__codelineno-18-33"></a><span class="n">builder</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="s2">"step_2"</span><span class="p">,</span> <span class="s2">"step_3"</span><span class="p">)</span>
</span><span id="__span-18-34"><a href="#__codelineno-18-34" id="__codelineno-18-34" name="__codelineno-18-34"></a><span class="n">builder</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="s2">"step_3"</span><span class="p">,</span> <span class="n">END</span><span class="p">)</span>
</span><span id="__span-18-35"><a href="#__codelineno-18-35" id="__codelineno-18-35" name="__codelineno-18-35"></a>
</span><span id="__span-18-36"><a href="#__codelineno-18-36" id="__codelineno-18-36" name="__codelineno-18-36"></a><span class="c1"># Set up a checkpointer </span>
</span><span id="__span-18-37"><a href="#__codelineno-18-37" id="__codelineno-18-37" name="__codelineno-18-37"></a><span class="n">checkpointer</span> <span class="o">=</span> <span class="n">InMemorySaver</span><span class="p">()</span> <span class="c1"># (1)!</span>
</span><span id="__span-18-38"><a href="#__codelineno-18-38" id="__codelineno-18-38" name="__codelineno-18-38"></a>
</span><span id="__span-18-39"><a href="#__codelineno-18-39" id="__codelineno-18-39" name="__codelineno-18-39"></a><span class="n">graph</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span>
</span><span id="__span-18-40"><a href="#__codelineno-18-40" id="__codelineno-18-40" name="__codelineno-18-40"></a>    <span class="n">checkpointer</span><span class="o">=</span><span class="n">checkpointer</span><span class="p">,</span> <span class="c1"># (2)!</span>
</span><span id="__span-18-41"><a href="#__codelineno-18-41" id="__codelineno-18-41" name="__codelineno-18-41"></a>    <span class="n">interrupt_before</span><span class="o">=</span><span class="p">[</span><span class="s2">"step_3"</span><span class="p">]</span> <span class="c1"># (3)!</span>
</span><span id="__span-18-42"><a href="#__codelineno-18-42" id="__codelineno-18-42" name="__codelineno-18-42"></a><span class="p">)</span>
</span><span id="__span-18-43"><a href="#__codelineno-18-43" id="__codelineno-18-43" name="__codelineno-18-43"></a>
</span><span id="__span-18-44"><a href="#__codelineno-18-44" id="__codelineno-18-44" name="__codelineno-18-44"></a><span class="c1"># View</span>
</span><span id="__span-18-45"><a href="#__codelineno-18-45" id="__codelineno-18-45" name="__codelineno-18-45"></a><span class="n">display</span><span class="p">(</span><span class="n">Image</span><span class="p">(</span><span class="n">graph</span><span class="o">.</span><span class="n">get_graph</span><span class="p">()</span><span class="o">.</span><span class="n">draw_mermaid_png</span><span class="p">()))</span>
</span><span id="__span-18-46"><a href="#__codelineno-18-46" id="__codelineno-18-46" name="__codelineno-18-46"></a>
</span><span id="__span-18-47"><a href="#__codelineno-18-47" id="__codelineno-18-47" name="__codelineno-18-47"></a>
</span><span id="__span-18-48"><a href="#__codelineno-18-48" id="__codelineno-18-48" name="__codelineno-18-48"></a><span class="c1"># Input</span>
</span><span id="__span-18-49"><a href="#__codelineno-18-49" id="__codelineno-18-49" name="__codelineno-18-49"></a><span class="n">initial_input</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"input"</span><span class="p">:</span> <span class="s2">"hello world"</span><span class="p">}</span>
</span><span id="__span-18-50"><a href="#__codelineno-18-50" id="__codelineno-18-50" name="__codelineno-18-50"></a>
</span><span id="__span-18-51"><a href="#__codelineno-18-51" id="__codelineno-18-51" name="__codelineno-18-51"></a><span class="c1"># Thread</span>
</span><span id="__span-18-52"><a href="#__codelineno-18-52" id="__codelineno-18-52" name="__codelineno-18-52"></a><span class="n">thread</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"configurable"</span><span class="p">:</span> <span class="p">{</span><span class="s2">"thread_id"</span><span class="p">:</span> <span class="s2">"1"</span><span class="p">}}</span>
</span><span id="__span-18-53"><a href="#__codelineno-18-53" id="__codelineno-18-53" name="__codelineno-18-53"></a>
</span><span id="__span-18-54"><a href="#__codelineno-18-54" id="__codelineno-18-54" name="__codelineno-18-54"></a><span class="c1"># Run the graph until the first interruption</span>
</span><span id="__span-18-55"><a href="#__codelineno-18-55" id="__codelineno-18-55" name="__codelineno-18-55"></a><span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">graph</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="n">initial_input</span><span class="p">,</span> <span class="n">thread</span><span class="p">,</span> <span class="n">stream_mode</span><span class="o">=</span><span class="s2">"values"</span><span class="p">):</span>
</span><span id="__span-18-56"><a href="#__codelineno-18-56" id="__codelineno-18-56" name="__codelineno-18-56"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
</span><span id="__span-18-57"><a href="#__codelineno-18-57" id="__codelineno-18-57" name="__codelineno-18-57"></a>
</span><span id="__span-18-58"><a href="#__codelineno-18-58" id="__codelineno-18-58" name="__codelineno-18-58"></a><span class="c1"># This will run until the breakpoint</span>
</span><span id="__span-18-59"><a href="#__codelineno-18-59" id="__codelineno-18-59" name="__codelineno-18-59"></a><span class="c1"># You can get the state of the graph at this point</span>
</span><span id="__span-18-60"><a href="#__codelineno-18-60" id="__codelineno-18-60" name="__codelineno-18-60"></a><span class="nb">print</span><span class="p">(</span><span class="n">graph</span><span class="o">.</span><span class="n">get_state</span><span class="p">(</span><span class="n">config</span><span class="p">))</span>
</span><span id="__span-18-61"><a href="#__codelineno-18-61" id="__codelineno-18-61" name="__codelineno-18-61"></a>
</span><span id="__span-18-62"><a href="#__codelineno-18-62" id="__codelineno-18-62" name="__codelineno-18-62"></a><span class="c1"># You can continue the graph execution by passing in `None` for the input</span>
</span><span id="__span-18-63"><a href="#__codelineno-18-63" id="__codelineno-18-63" name="__codelineno-18-63"></a><span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">graph</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">thread</span><span class="p">,</span> <span class="n">stream_mode</span><span class="o">=</span><span class="s2">"values"</span><span class="p">):</span>
</span><span id="__span-18-64"><a href="#__codelineno-18-64" id="__codelineno-18-64" name="__codelineno-18-64"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">event</span><span class="p">)</span>
</span></code></pre></div>
</details>
<h3 id="use-static-interrupts-in-langgraph-studio">Use static interrupts in LangGraph Studio<a class="headerlink" href="#use-static-interrupts-in-langgraph-studio" title="Permanent link">¶</a></h3>
<p>You can use <a href="../../../concepts/langgraph_studio/">LangGraph Studio</a> to debug your graph. You can set static breakpoints in the UI and then run the graph. You can also use the UI to inspect the graph state at any point in the execution.</p>
<p><img alt="image" src="../../../concepts/img/human_in_the_loop/static-interrupt.png" style="max-height:400px"/></p>
<p>LangGraph Studio is free with <a href="../../../tutorials/langgraph-platform/local-server/">locally deployed applications</a> using <code>langgraph dev</code>. </p>
<h2 id="considerations">Considerations<a class="headerlink" href="#considerations" title="Permanent link">¶</a></h2>
<p>When using human-in-the-loop, there are some considerations to keep in mind.</p>
<h3 id="using-with-code-with-side-effects">Using with code with side-effects<a class="headerlink" href="#using-with-code-with-side-effects" title="Permanent link">¶</a></h3>
<p>Place code with side effects, such as API calls, after the <code>interrupt</code> or in a separate node to avoid duplication, as these are re-triggered every time the node is resumed.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio"><input id="__tabbed_2_2" name="__tabbed_2" type="radio"><div class="tabbed-labels"><label for="__tabbed_2_1">Side effects after interrupt</label><label for="__tabbed_2_2">Side effects in a separate node</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="language-python highlight"><pre><span></span><code><span id="__span-19-1"><a href="#__codelineno-19-1" id="__codelineno-19-1" name="__codelineno-19-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">langgraph.types</span><span class="w"> </span><span class="kn">import</span> <span class="n">interrupt</span>
</span><span id="__span-19-2"><a href="#__codelineno-19-2" id="__codelineno-19-2" name="__codelineno-19-2"></a>
</span><span id="__span-19-3"><a href="#__codelineno-19-3" id="__codelineno-19-3" name="__codelineno-19-3"></a><span class="k">def</span><span class="w"> </span><span class="nf">human_node</span><span class="p">(</span><span class="n">state</span><span class="p">:</span> <span class="n">State</span><span class="p">):</span>
</span><span id="__span-19-4"><a href="#__codelineno-19-4" id="__codelineno-19-4" name="__codelineno-19-4"></a><span class="w">    </span><span class="sd">"""Human node with validation."""</span>
</span><span id="__span-19-5"><a href="#__codelineno-19-5" id="__codelineno-19-5" name="__codelineno-19-5"></a>
</span><span id="__span-19-6"><a href="#__codelineno-19-6" id="__codelineno-19-6" name="__codelineno-19-6"></a>    <span class="n">answer</span> <span class="o">=</span> <span class="n">interrupt</span><span class="p">(</span><span class="n">question</span><span class="p">)</span>
</span><span id="__span-19-7"><a href="#__codelineno-19-7" id="__codelineno-19-7" name="__codelineno-19-7"></a>
</span><span id="__span-19-8"><a href="#__codelineno-19-8" id="__codelineno-19-8" name="__codelineno-19-8"></a>    <span class="n">api_call</span><span class="p">(</span><span class="n">answer</span><span class="p">)</span> <span class="c1"># OK as it's after the interrupt</span>
</span></code></pre></div>
</div>
<div class="tabbed-block">
<div class="language-python highlight"><pre><span></span><code><span id="__span-20-1"><a href="#__codelineno-20-1" id="__codelineno-20-1" name="__codelineno-20-1"></a><span class="kn">from</span><span class="w"> </span><span class="nn">langgraph.types</span><span class="w"> </span><span class="kn">import</span> <span class="n">interrupt</span>
</span><span id="__span-20-2"><a href="#__codelineno-20-2" id="__codelineno-20-2" name="__codelineno-20-2"></a>
</span><span id="__span-20-3"><a href="#__codelineno-20-3" id="__codelineno-20-3" name="__codelineno-20-3"></a><span class="k">def</span><span class="w"> </span><span class="nf">human_node</span><span class="p">(</span><span class="n">state</span><span class="p">:</span> <span class="n">State</span><span class="p">):</span>
</span><span id="__span-20-4"><a href="#__codelineno-20-4" id="__codelineno-20-4" name="__codelineno-20-4"></a><span class="w">    </span><span class="sd">"""Human node with validation."""</span>
</span><span id="__span-20-5"><a href="#__codelineno-20-5" id="__codelineno-20-5" name="__codelineno-20-5"></a>
</span><span id="__span-20-6"><a href="#__codelineno-20-6" id="__codelineno-20-6" name="__codelineno-20-6"></a>    <span class="n">answer</span> <span class="o">=</span> <span class="n">interrupt</span><span class="p">(</span><span class="n">question</span><span class="p">)</span>
</span><span id="__span-20-7"><a href="#__codelineno-20-7" id="__codelineno-20-7" name="__codelineno-20-7"></a>
</span><span id="__span-20-8"><a href="#__codelineno-20-8" id="__codelineno-20-8" name="__codelineno-20-8"></a>    <span class="k">return</span> <span class="p">{</span>
</span><span id="__span-20-9"><a href="#__codelineno-20-9" id="__codelineno-20-9" name="__codelineno-20-9"></a>        <span class="s2">"answer"</span><span class="p">:</span> <span class="n">answer</span>
</span><span id="__span-20-10"><a href="#__codelineno-20-10" id="__codelineno-20-10" name="__codelineno-20-10"></a>    <span class="p">}</span>
</span><span id="__span-20-11"><a href="#__codelineno-20-11" id="__codelineno-20-11" name="__codelineno-20-11"></a>
</span><span id="__span-20-12"><a href="#__codelineno-20-12" id="__codelineno-20-12" name="__codelineno-20-12"></a><span class="k">def</span><span class="w"> </span><span class="nf">api_call_node</span><span class="p">(</span><span class="n">state</span><span class="p">:</span> <span class="n">State</span><span class="p">):</span>
</span><span id="__span-20-13"><a href="#__codelineno-20-13" id="__codelineno-20-13" name="__codelineno-20-13"></a>    <span class="n">api_call</span><span class="p">(</span><span class="o">...</span><span class="p">)</span> <span class="c1"># OK as it's in a separate node</span>
</span></code></pre></div>
</div>
</div>
</input></input></div>
<h3 id="using-with-subgraphs-called-as-functions">Using with subgraphs called as functions<a class="headerlink" href="#using-with-subgraphs-called-as-functions" title="Permanent link">¶</a></h3>
<p>When invoking a subgraph as a function, the parent graph will resume execution from the <strong>beginning of the node</strong> where the subgraph was invoked where the <code>interrupt</code> was triggered. Similarly, the <strong>subgraph</strong> will resume from the <strong>beginning of the node</strong> where the <code>interrupt()</code> function was called.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-21-1"><a href="#__codelineno-21-1" id="__codelineno-21-1" name="__codelineno-21-1"></a><span class="k">def</span><span class="w"> </span><span class="nf">node_in_parent_graph</span><span class="p">(</span><span class="n">state</span><span class="p">:</span> <span class="n">State</span><span class="p">):</span>
</span><span id="__span-21-2"><a href="#__codelineno-21-2" id="__codelineno-21-2" name="__codelineno-21-2"></a>    <span class="n">some_code</span><span class="p">()</span>  <span class="c1"># &lt;-- This will re-execute when the subgraph is resumed.</span>
</span><span id="__span-21-3"><a href="#__codelineno-21-3" id="__codelineno-21-3" name="__codelineno-21-3"></a>    <span class="c1"># Invoke a subgraph as a function.</span>
</span><span id="__span-21-4"><a href="#__codelineno-21-4" id="__codelineno-21-4" name="__codelineno-21-4"></a>    <span class="c1"># The subgraph contains an `interrupt` call.</span>
</span><span id="__span-21-5"><a href="#__codelineno-21-5" id="__codelineno-21-5" name="__codelineno-21-5"></a>    <span class="n">subgraph_result</span> <span class="o">=</span> <span class="n">subgraph</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">some_input</span><span class="p">)</span>
</span><span id="__span-21-6"><a href="#__codelineno-21-6" id="__codelineno-21-6" name="__codelineno-21-6"></a>    <span class="o">...</span>
</span></code></pre></div>
<details class="example">
<summary>Extended example: parent and subgraph execution flow</summary>
<p>Say we have a parent graph with 3 nodes:</p>
<p><strong>Parent Graph</strong>: <code>node_1</code> → <code>node_2</code> (subgraph call) → <code>node_3</code></p>
<p>And the subgraph has 3 nodes, where the second node contains an <code>interrupt</code>:</p>
<p><strong>Subgraph</strong>: <code>sub_node_1</code> → <code>sub_node_2</code> (<code>interrupt</code>) → <code>sub_node_3</code></p>
<p>When resuming the graph, the execution will proceed as follows:</p>
<ol>
<li><strong>Skip <code>node_1</code></strong> in the parent graph (already executed, graph state was saved in snapshot).</li>
<li><strong>Re-execute <code>node_2</code></strong> in the parent graph from the start.</li>
<li><strong>Skip <code>sub_node_1</code></strong> in the subgraph (already executed, graph state was saved in snapshot).</li>
<li><strong>Re-execute <code>sub_node_2</code></strong> in the subgraph from the beginning.</li>
<li>Continue with <code>sub_node_3</code> and subsequent nodes.</li>
</ol>
<p>Here is abbreviated example code that you can use to understand how subgraphs work with interrupts.
It counts the number of times each node is entered and prints the count.</p>
<div class="language-python highlight"><pre><span></span><code><span id="__span-22-1"><a href="#__codelineno-22-1" id="__codelineno-22-1" name="__codelineno-22-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">uuid</span>
</span><span id="__span-22-2"><a href="#__codelineno-22-2" id="__codelineno-22-2" name="__codelineno-22-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">TypedDict</span>
</span><span id="__span-22-3"><a href="#__codelineno-22-3" id="__codelineno-22-3" name="__codelineno-22-3"></a>
</span><span id="__span-22-4"><a href="#__codelineno-22-4" id="__codelineno-22-4" name="__codelineno-22-4"></a><span class="kn">from</span><span class="w"> </span><span class="nn">langgraph.graph</span><span class="w"> </span><span class="kn">import</span> <span class="n">StateGraph</span>
</span><span id="__span-22-5"><a href="#__codelineno-22-5" id="__codelineno-22-5" name="__codelineno-22-5"></a><span class="kn">from</span><span class="w"> </span><span class="nn">langgraph.constants</span><span class="w"> </span><span class="kn">import</span> <span class="n">START</span>
</span><span id="__span-22-6"><a href="#__codelineno-22-6" id="__codelineno-22-6" name="__codelineno-22-6"></a><span class="kn">from</span><span class="w"> </span><span class="nn">langgraph.types</span><span class="w"> </span><span class="kn">import</span> <span class="n">interrupt</span><span class="p">,</span> <span class="n">Command</span>
</span><span id="__span-22-7"><a href="#__codelineno-22-7" id="__codelineno-22-7" name="__codelineno-22-7"></a><span class="kn">from</span><span class="w"> </span><span class="nn">langgraph.checkpoint.memory</span><span class="w"> </span><span class="kn">import</span> <span class="n">MemorySaver</span>
</span><span id="__span-22-8"><a href="#__codelineno-22-8" id="__codelineno-22-8" name="__codelineno-22-8"></a>
</span><span id="__span-22-9"><a href="#__codelineno-22-9" id="__codelineno-22-9" name="__codelineno-22-9"></a>
</span><span id="__span-22-10"><a href="#__codelineno-22-10" id="__codelineno-22-10" name="__codelineno-22-10"></a><span class="k">class</span><span class="w"> </span><span class="nc">State</span><span class="p">(</span><span class="n">TypedDict</span><span class="p">):</span>
</span><span id="__span-22-11"><a href="#__codelineno-22-11" id="__codelineno-22-11" name="__codelineno-22-11"></a><span class="w">    </span><span class="sd">"""The graph state."""</span>
</span><span id="__span-22-12"><a href="#__codelineno-22-12" id="__codelineno-22-12" name="__codelineno-22-12"></a>    <span class="n">state_counter</span><span class="p">:</span> <span class="nb">int</span>
</span><span id="__span-22-13"><a href="#__codelineno-22-13" id="__codelineno-22-13" name="__codelineno-22-13"></a>
</span><span id="__span-22-14"><a href="#__codelineno-22-14" id="__codelineno-22-14" name="__codelineno-22-14"></a>
</span><span id="__span-22-15"><a href="#__codelineno-22-15" id="__codelineno-22-15" name="__codelineno-22-15"></a><span class="n">counter_node_in_subgraph</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-22-16"><a href="#__codelineno-22-16" id="__codelineno-22-16" name="__codelineno-22-16"></a>
</span><span id="__span-22-17"><a href="#__codelineno-22-17" id="__codelineno-22-17" name="__codelineno-22-17"></a><span class="k">def</span><span class="w"> </span><span class="nf">node_in_subgraph</span><span class="p">(</span><span class="n">state</span><span class="p">:</span> <span class="n">State</span><span class="p">):</span>
</span><span id="__span-22-18"><a href="#__codelineno-22-18" id="__codelineno-22-18" name="__codelineno-22-18"></a><span class="w">    </span><span class="sd">"""A node in the sub-graph."""</span>
</span><span id="__span-22-19"><a href="#__codelineno-22-19" id="__codelineno-22-19" name="__codelineno-22-19"></a>    <span class="k">global</span> <span class="n">counter_node_in_subgraph</span>
</span><span id="__span-22-20"><a href="#__codelineno-22-20" id="__codelineno-22-20" name="__codelineno-22-20"></a>    <span class="n">counter_node_in_subgraph</span> <span class="o">+=</span> <span class="mi">1</span>  <span class="c1"># This code will **NOT** run again!</span>
</span><span id="__span-22-21"><a href="#__codelineno-22-21" id="__codelineno-22-21" name="__codelineno-22-21"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Entered `node_in_subgraph` a total of </span><span class="si">{</span><span class="n">counter_node_in_subgraph</span><span class="si">}</span><span class="s2"> times"</span><span class="p">)</span>
</span><span id="__span-22-22"><a href="#__codelineno-22-22" id="__codelineno-22-22" name="__codelineno-22-22"></a>
</span><span id="__span-22-23"><a href="#__codelineno-22-23" id="__codelineno-22-23" name="__codelineno-22-23"></a><span class="n">counter_human_node</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-22-24"><a href="#__codelineno-22-24" id="__codelineno-22-24" name="__codelineno-22-24"></a>
</span><span id="__span-22-25"><a href="#__codelineno-22-25" id="__codelineno-22-25" name="__codelineno-22-25"></a><span class="k">def</span><span class="w"> </span><span class="nf">human_node</span><span class="p">(</span><span class="n">state</span><span class="p">:</span> <span class="n">State</span><span class="p">):</span>
</span><span id="__span-22-26"><a href="#__codelineno-22-26" id="__codelineno-22-26" name="__codelineno-22-26"></a>    <span class="k">global</span> <span class="n">counter_human_node</span>
</span><span id="__span-22-27"><a href="#__codelineno-22-27" id="__codelineno-22-27" name="__codelineno-22-27"></a>    <span class="n">counter_human_node</span> <span class="o">+=</span> <span class="mi">1</span> <span class="c1"># This code will run again!</span>
</span><span id="__span-22-28"><a href="#__codelineno-22-28" id="__codelineno-22-28" name="__codelineno-22-28"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Entered human_node in sub-graph a total of </span><span class="si">{</span><span class="n">counter_human_node</span><span class="si">}</span><span class="s2"> times"</span><span class="p">)</span>
</span><span id="__span-22-29"><a href="#__codelineno-22-29" id="__codelineno-22-29" name="__codelineno-22-29"></a>    <span class="n">answer</span> <span class="o">=</span> <span class="n">interrupt</span><span class="p">(</span><span class="s2">"what is your name?"</span><span class="p">)</span>
</span><span id="__span-22-30"><a href="#__codelineno-22-30" id="__codelineno-22-30" name="__codelineno-22-30"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Got an answer of </span><span class="si">{</span><span class="n">answer</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</span><span id="__span-22-31"><a href="#__codelineno-22-31" id="__codelineno-22-31" name="__codelineno-22-31"></a>
</span><span id="__span-22-32"><a href="#__codelineno-22-32" id="__codelineno-22-32" name="__codelineno-22-32"></a>
</span><span id="__span-22-33"><a href="#__codelineno-22-33" id="__codelineno-22-33" name="__codelineno-22-33"></a><span class="n">checkpointer</span> <span class="o">=</span> <span class="n">MemorySaver</span><span class="p">()</span>
</span><span id="__span-22-34"><a href="#__codelineno-22-34" id="__codelineno-22-34" name="__codelineno-22-34"></a>
</span><span id="__span-22-35"><a href="#__codelineno-22-35" id="__codelineno-22-35" name="__codelineno-22-35"></a><span class="n">subgraph_builder</span> <span class="o">=</span> <span class="n">StateGraph</span><span class="p">(</span><span class="n">State</span><span class="p">)</span>
</span><span id="__span-22-36"><a href="#__codelineno-22-36" id="__codelineno-22-36" name="__codelineno-22-36"></a><span class="n">subgraph_builder</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">"some_node"</span><span class="p">,</span> <span class="n">node_in_subgraph</span><span class="p">)</span>
</span><span id="__span-22-37"><a href="#__codelineno-22-37" id="__codelineno-22-37" name="__codelineno-22-37"></a><span class="n">subgraph_builder</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">"human_node"</span><span class="p">,</span> <span class="n">human_node</span><span class="p">)</span>
</span><span id="__span-22-38"><a href="#__codelineno-22-38" id="__codelineno-22-38" name="__codelineno-22-38"></a><span class="n">subgraph_builder</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">START</span><span class="p">,</span> <span class="s2">"some_node"</span><span class="p">)</span>
</span><span id="__span-22-39"><a href="#__codelineno-22-39" id="__codelineno-22-39" name="__codelineno-22-39"></a><span class="n">subgraph_builder</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="s2">"some_node"</span><span class="p">,</span> <span class="s2">"human_node"</span><span class="p">)</span>
</span><span id="__span-22-40"><a href="#__codelineno-22-40" id="__codelineno-22-40" name="__codelineno-22-40"></a><span class="n">subgraph</span> <span class="o">=</span> <span class="n">subgraph_builder</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">checkpointer</span><span class="o">=</span><span class="n">checkpointer</span><span class="p">)</span>
</span><span id="__span-22-41"><a href="#__codelineno-22-41" id="__codelineno-22-41" name="__codelineno-22-41"></a>
</span><span id="__span-22-42"><a href="#__codelineno-22-42" id="__codelineno-22-42" name="__codelineno-22-42"></a>
</span><span id="__span-22-43"><a href="#__codelineno-22-43" id="__codelineno-22-43" name="__codelineno-22-43"></a><span class="n">counter_parent_node</span> <span class="o">=</span> <span class="mi">0</span>
</span><span id="__span-22-44"><a href="#__codelineno-22-44" id="__codelineno-22-44" name="__codelineno-22-44"></a>
</span><span id="__span-22-45"><a href="#__codelineno-22-45" id="__codelineno-22-45" name="__codelineno-22-45"></a><span class="k">def</span><span class="w"> </span><span class="nf">parent_node</span><span class="p">(</span><span class="n">state</span><span class="p">:</span> <span class="n">State</span><span class="p">):</span>
</span><span id="__span-22-46"><a href="#__codelineno-22-46" id="__codelineno-22-46" name="__codelineno-22-46"></a><span class="w">    </span><span class="sd">"""This parent node will invoke the subgraph."""</span>
</span><span id="__span-22-47"><a href="#__codelineno-22-47" id="__codelineno-22-47" name="__codelineno-22-47"></a>    <span class="k">global</span> <span class="n">counter_parent_node</span>
</span><span id="__span-22-48"><a href="#__codelineno-22-48" id="__codelineno-22-48" name="__codelineno-22-48"></a>
</span><span id="__span-22-49"><a href="#__codelineno-22-49" id="__codelineno-22-49" name="__codelineno-22-49"></a>    <span class="n">counter_parent_node</span> <span class="o">+=</span> <span class="mi">1</span> <span class="c1"># This code will run again on resuming!</span>
</span><span id="__span-22-50"><a href="#__codelineno-22-50" id="__codelineno-22-50" name="__codelineno-22-50"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Entered `parent_node` a total of </span><span class="si">{</span><span class="n">counter_parent_node</span><span class="si">}</span><span class="s2"> times"</span><span class="p">)</span>
</span><span id="__span-22-51"><a href="#__codelineno-22-51" id="__codelineno-22-51" name="__codelineno-22-51"></a>
</span><span id="__span-22-52"><a href="#__codelineno-22-52" id="__codelineno-22-52" name="__codelineno-22-52"></a>    <span class="c1"># Please note that we're intentionally incrementing the state counter</span>
</span><span id="__span-22-53"><a href="#__codelineno-22-53" id="__codelineno-22-53" name="__codelineno-22-53"></a>    <span class="c1"># in the graph state as well to demonstrate that the subgraph update</span>
</span><span id="__span-22-54"><a href="#__codelineno-22-54" id="__codelineno-22-54" name="__codelineno-22-54"></a>    <span class="c1"># of the same key will not conflict with the parent graph (until</span>
</span><span id="__span-22-55"><a href="#__codelineno-22-55" id="__codelineno-22-55" name="__codelineno-22-55"></a>    <span class="n">subgraph_state</span> <span class="o">=</span> <span class="n">subgraph</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</span><span id="__span-22-56"><a href="#__codelineno-22-56" id="__codelineno-22-56" name="__codelineno-22-56"></a>    <span class="k">return</span> <span class="n">subgraph_state</span>
</span><span id="__span-22-57"><a href="#__codelineno-22-57" id="__codelineno-22-57" name="__codelineno-22-57"></a>
</span><span id="__span-22-58"><a href="#__codelineno-22-58" id="__codelineno-22-58" name="__codelineno-22-58"></a>
</span><span id="__span-22-59"><a href="#__codelineno-22-59" id="__codelineno-22-59" name="__codelineno-22-59"></a><span class="n">builder</span> <span class="o">=</span> <span class="n">StateGraph</span><span class="p">(</span><span class="n">State</span><span class="p">)</span>
</span><span id="__span-22-60"><a href="#__codelineno-22-60" id="__codelineno-22-60" name="__codelineno-22-60"></a><span class="n">builder</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">"parent_node"</span><span class="p">,</span> <span class="n">parent_node</span><span class="p">)</span>
</span><span id="__span-22-61"><a href="#__codelineno-22-61" id="__codelineno-22-61" name="__codelineno-22-61"></a><span class="n">builder</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">START</span><span class="p">,</span> <span class="s2">"parent_node"</span><span class="p">)</span>
</span><span id="__span-22-62"><a href="#__codelineno-22-62" id="__codelineno-22-62" name="__codelineno-22-62"></a>
</span><span id="__span-22-63"><a href="#__codelineno-22-63" id="__codelineno-22-63" name="__codelineno-22-63"></a><span class="c1"># A checkpointer must be enabled for interrupts to work!</span>
</span><span id="__span-22-64"><a href="#__codelineno-22-64" id="__codelineno-22-64" name="__codelineno-22-64"></a><span class="n">checkpointer</span> <span class="o">=</span> <span class="n">MemorySaver</span><span class="p">()</span>
</span><span id="__span-22-65"><a href="#__codelineno-22-65" id="__codelineno-22-65" name="__codelineno-22-65"></a><span class="n">graph</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">checkpointer</span><span class="o">=</span><span class="n">checkpointer</span><span class="p">)</span>
</span><span id="__span-22-66"><a href="#__codelineno-22-66" id="__codelineno-22-66" name="__codelineno-22-66"></a>
</span><span id="__span-22-67"><a href="#__codelineno-22-67" id="__codelineno-22-67" name="__codelineno-22-67"></a><span class="n">config</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-22-68"><a href="#__codelineno-22-68" id="__codelineno-22-68" name="__codelineno-22-68"></a>    <span class="s2">"configurable"</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-22-69"><a href="#__codelineno-22-69" id="__codelineno-22-69" name="__codelineno-22-69"></a>      <span class="s2">"thread_id"</span><span class="p">:</span> <span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">(),</span>
</span><span id="__span-22-70"><a href="#__codelineno-22-70" id="__codelineno-22-70" name="__codelineno-22-70"></a>    <span class="p">}</span>
</span><span id="__span-22-71"><a href="#__codelineno-22-71" id="__codelineno-22-71" name="__codelineno-22-71"></a><span class="p">}</span>
</span><span id="__span-22-72"><a href="#__codelineno-22-72" id="__codelineno-22-72" name="__codelineno-22-72"></a>
</span><span id="__span-22-73"><a href="#__codelineno-22-73" id="__codelineno-22-73" name="__codelineno-22-73"></a><span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">graph</span><span class="o">.</span><span class="n">stream</span><span class="p">({</span><span class="s2">"state_counter"</span><span class="p">:</span> <span class="mi">1</span><span class="p">},</span> <span class="n">config</span><span class="p">):</span>
</span><span id="__span-22-74"><a href="#__codelineno-22-74" id="__codelineno-22-74" name="__codelineno-22-74"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
</span><span id="__span-22-75"><a href="#__codelineno-22-75" id="__codelineno-22-75" name="__codelineno-22-75"></a>
</span><span id="__span-22-76"><a href="#__codelineno-22-76" id="__codelineno-22-76" name="__codelineno-22-76"></a><span class="nb">print</span><span class="p">(</span><span class="s1">'--- Resuming ---'</span><span class="p">)</span>
</span><span id="__span-22-77"><a href="#__codelineno-22-77" id="__codelineno-22-77" name="__codelineno-22-77"></a>
</span><span id="__span-22-78"><a href="#__codelineno-22-78" id="__codelineno-22-78" name="__codelineno-22-78"></a><span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">graph</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="n">Command</span><span class="p">(</span><span class="n">resume</span><span class="o">=</span><span class="s2">"35"</span><span class="p">),</span> <span class="n">config</span><span class="p">):</span>
</span><span id="__span-22-79"><a href="#__codelineno-22-79" id="__codelineno-22-79" name="__codelineno-22-79"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
</span></code></pre></div>
<p>This will print out</p>
<div class="language-pycon highlight"><pre><span></span><code><span id="__span-23-1"><a href="#__codelineno-23-1" id="__codelineno-23-1" name="__codelineno-23-1"></a><span class="go">Entered `parent_node` a total of 1 times</span>
</span><span id="__span-23-2"><a href="#__codelineno-23-2" id="__codelineno-23-2" name="__codelineno-23-2"></a><span class="go">Entered `node_in_subgraph` a total of 1 times</span>
</span><span id="__span-23-3"><a href="#__codelineno-23-3" id="__codelineno-23-3" name="__codelineno-23-3"></a><span class="go">Entered human_node in sub-graph a total of 1 times</span>
</span><span id="__span-23-4"><a href="#__codelineno-23-4" id="__codelineno-23-4" name="__codelineno-23-4"></a><span class="go">{'__interrupt__': (Interrupt(value='what is your name?', resumable=True, ns=['parent_node:4c3a0248-21f0-1287-eacf-3002bc304db4', 'human_node:2fe86d52-6f70-2a3f-6b2f-b1eededd6348'], when='during'),)}</span>
</span><span id="__span-23-5"><a href="#__codelineno-23-5" id="__codelineno-23-5" name="__codelineno-23-5"></a><span class="go">--- Resuming ---</span>
</span><span id="__span-23-6"><a href="#__codelineno-23-6" id="__codelineno-23-6" name="__codelineno-23-6"></a><span class="go">Entered `parent_node` a total of 2 times</span>
</span><span id="__span-23-7"><a href="#__codelineno-23-7" id="__codelineno-23-7" name="__codelineno-23-7"></a><span class="go">Entered human_node in sub-graph a total of 2 times</span>
</span><span id="__span-23-8"><a href="#__codelineno-23-8" id="__codelineno-23-8" name="__codelineno-23-8"></a><span class="go">Got an answer of 35</span>
</span><span id="__span-23-9"><a href="#__codelineno-23-9" id="__codelineno-23-9" name="__codelineno-23-9"></a><span class="go">{'parent_node': {'state_counter': 1}}</span>
</span></code></pre></div>
</details>
<h3 id="using-multiple-interrupts">Using multiple interrupts<a class="headerlink" href="#using-multiple-interrupts" title="Permanent link">¶</a></h3>
<p>Using multiple interrupts within a <strong>single</strong> node can be helpful for patterns like <a href="#validate-human-input">validating human input</a>. However, using multiple interrupts in the same node can lead to unexpected behavior if not handled carefully.</p>
<p>When a node contains multiple interrupt calls, LangGraph keeps a list of resume values specific to the task executing the node. Whenever execution resumes, it starts at the beginning of the node. For each interrupt encountered, LangGraph checks if a matching value exists in the task's resume list. Matching is <strong>strictly index-based</strong>, so the order of interrupt calls within the node is critical.</p>
<p>To avoid issues, refrain from dynamically changing the node's structure between executions. This includes adding, removing, or reordering interrupt calls, as such changes can result in mismatched indices. These problems often arise from unconventional patterns, such as mutating state via <code>Command(resume=..., update=SOME_STATE_MUTATION)</code> or relying on global variables to modify the node’s structure dynamically.</p>
<details class="example">
<summary>Extended example: incorrect code that introduces non-determinism</summary>
<div class="language-python highlight"><pre><span></span><code><span id="__span-24-1"><a href="#__codelineno-24-1" id="__codelineno-24-1" name="__codelineno-24-1"></a><span class="kn">import</span><span class="w"> </span><span class="nn">uuid</span>
</span><span id="__span-24-2"><a href="#__codelineno-24-2" id="__codelineno-24-2" name="__codelineno-24-2"></a><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">TypedDict</span><span class="p">,</span> <span class="n">Optional</span>
</span><span id="__span-24-3"><a href="#__codelineno-24-3" id="__codelineno-24-3" name="__codelineno-24-3"></a>
</span><span id="__span-24-4"><a href="#__codelineno-24-4" id="__codelineno-24-4" name="__codelineno-24-4"></a><span class="kn">from</span><span class="w"> </span><span class="nn">langgraph.graph</span><span class="w"> </span><span class="kn">import</span> <span class="n">StateGraph</span>
</span><span id="__span-24-5"><a href="#__codelineno-24-5" id="__codelineno-24-5" name="__codelineno-24-5"></a><span class="kn">from</span><span class="w"> </span><span class="nn">langgraph.constants</span><span class="w"> </span><span class="kn">import</span> <span class="n">START</span> 
</span><span id="__span-24-6"><a href="#__codelineno-24-6" id="__codelineno-24-6" name="__codelineno-24-6"></a><span class="kn">from</span><span class="w"> </span><span class="nn">langgraph.types</span><span class="w"> </span><span class="kn">import</span> <span class="n">interrupt</span><span class="p">,</span> <span class="n">Command</span>
</span><span id="__span-24-7"><a href="#__codelineno-24-7" id="__codelineno-24-7" name="__codelineno-24-7"></a><span class="kn">from</span><span class="w"> </span><span class="nn">langgraph.checkpoint.memory</span><span class="w"> </span><span class="kn">import</span> <span class="n">MemorySaver</span>
</span><span id="__span-24-8"><a href="#__codelineno-24-8" id="__codelineno-24-8" name="__codelineno-24-8"></a>
</span><span id="__span-24-9"><a href="#__codelineno-24-9" id="__codelineno-24-9" name="__codelineno-24-9"></a>
</span><span id="__span-24-10"><a href="#__codelineno-24-10" id="__codelineno-24-10" name="__codelineno-24-10"></a><span class="k">class</span><span class="w"> </span><span class="nc">State</span><span class="p">(</span><span class="n">TypedDict</span><span class="p">):</span>
</span><span id="__span-24-11"><a href="#__codelineno-24-11" id="__codelineno-24-11" name="__codelineno-24-11"></a><span class="w">    </span><span class="sd">"""The graph state."""</span>
</span><span id="__span-24-12"><a href="#__codelineno-24-12" id="__codelineno-24-12" name="__codelineno-24-12"></a>
</span><span id="__span-24-13"><a href="#__codelineno-24-13" id="__codelineno-24-13" name="__codelineno-24-13"></a>    <span class="n">age</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</span><span id="__span-24-14"><a href="#__codelineno-24-14" id="__codelineno-24-14" name="__codelineno-24-14"></a>    <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
</span><span id="__span-24-15"><a href="#__codelineno-24-15" id="__codelineno-24-15" name="__codelineno-24-15"></a>
</span><span id="__span-24-16"><a href="#__codelineno-24-16" id="__codelineno-24-16" name="__codelineno-24-16"></a>
</span><span id="__span-24-17"><a href="#__codelineno-24-17" id="__codelineno-24-17" name="__codelineno-24-17"></a><span class="k">def</span><span class="w"> </span><span class="nf">human_node</span><span class="p">(</span><span class="n">state</span><span class="p">:</span> <span class="n">State</span><span class="p">):</span>
</span><span id="__span-24-18"><a href="#__codelineno-24-18" id="__codelineno-24-18" name="__codelineno-24-18"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">state</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'name'</span><span class="p">):</span>
</span><span id="__span-24-19"><a href="#__codelineno-24-19" id="__codelineno-24-19" name="__codelineno-24-19"></a>        <span class="n">name</span> <span class="o">=</span> <span class="n">interrupt</span><span class="p">(</span><span class="s2">"what is your name?"</span><span class="p">)</span>
</span><span id="__span-24-20"><a href="#__codelineno-24-20" id="__codelineno-24-20" name="__codelineno-24-20"></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="__span-24-21"><a href="#__codelineno-24-21" id="__codelineno-24-21" name="__codelineno-24-21"></a>        <span class="n">name</span> <span class="o">=</span> <span class="s2">"N/A"</span>
</span><span id="__span-24-22"><a href="#__codelineno-24-22" id="__codelineno-24-22" name="__codelineno-24-22"></a>
</span><span id="__span-24-23"><a href="#__codelineno-24-23" id="__codelineno-24-23" name="__codelineno-24-23"></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">state</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">'age'</span><span class="p">):</span>
</span><span id="__span-24-24"><a href="#__codelineno-24-24" id="__codelineno-24-24" name="__codelineno-24-24"></a>        <span class="n">age</span> <span class="o">=</span> <span class="n">interrupt</span><span class="p">(</span><span class="s2">"what is your age?"</span><span class="p">)</span>
</span><span id="__span-24-25"><a href="#__codelineno-24-25" id="__codelineno-24-25" name="__codelineno-24-25"></a>    <span class="k">else</span><span class="p">:</span>
</span><span id="__span-24-26"><a href="#__codelineno-24-26" id="__codelineno-24-26" name="__codelineno-24-26"></a>        <span class="n">age</span> <span class="o">=</span> <span class="s2">"N/A"</span>
</span><span id="__span-24-27"><a href="#__codelineno-24-27" id="__codelineno-24-27" name="__codelineno-24-27"></a>
</span><span id="__span-24-28"><a href="#__codelineno-24-28" id="__codelineno-24-28" name="__codelineno-24-28"></a>    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Name: </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s2">. Age: </span><span class="si">{</span><span class="n">age</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</span><span id="__span-24-29"><a href="#__codelineno-24-29" id="__codelineno-24-29" name="__codelineno-24-29"></a>
</span><span id="__span-24-30"><a href="#__codelineno-24-30" id="__codelineno-24-30" name="__codelineno-24-30"></a>    <span class="k">return</span> <span class="p">{</span>
</span><span id="__span-24-31"><a href="#__codelineno-24-31" id="__codelineno-24-31" name="__codelineno-24-31"></a>        <span class="s2">"age"</span><span class="p">:</span> <span class="n">age</span><span class="p">,</span>
</span><span id="__span-24-32"><a href="#__codelineno-24-32" id="__codelineno-24-32" name="__codelineno-24-32"></a>        <span class="s2">"name"</span><span class="p">:</span> <span class="n">name</span><span class="p">,</span>
</span><span id="__span-24-33"><a href="#__codelineno-24-33" id="__codelineno-24-33" name="__codelineno-24-33"></a>    <span class="p">}</span>
</span><span id="__span-24-34"><a href="#__codelineno-24-34" id="__codelineno-24-34" name="__codelineno-24-34"></a>
</span><span id="__span-24-35"><a href="#__codelineno-24-35" id="__codelineno-24-35" name="__codelineno-24-35"></a>
</span><span id="__span-24-36"><a href="#__codelineno-24-36" id="__codelineno-24-36" name="__codelineno-24-36"></a><span class="n">builder</span> <span class="o">=</span> <span class="n">StateGraph</span><span class="p">(</span><span class="n">State</span><span class="p">)</span>
</span><span id="__span-24-37"><a href="#__codelineno-24-37" id="__codelineno-24-37" name="__codelineno-24-37"></a><span class="n">builder</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="s2">"human_node"</span><span class="p">,</span> <span class="n">human_node</span><span class="p">)</span>
</span><span id="__span-24-38"><a href="#__codelineno-24-38" id="__codelineno-24-38" name="__codelineno-24-38"></a><span class="n">builder</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">START</span><span class="p">,</span> <span class="s2">"human_node"</span><span class="p">)</span>
</span><span id="__span-24-39"><a href="#__codelineno-24-39" id="__codelineno-24-39" name="__codelineno-24-39"></a>
</span><span id="__span-24-40"><a href="#__codelineno-24-40" id="__codelineno-24-40" name="__codelineno-24-40"></a><span class="c1"># A checkpointer must be enabled for interrupts to work!</span>
</span><span id="__span-24-41"><a href="#__codelineno-24-41" id="__codelineno-24-41" name="__codelineno-24-41"></a><span class="n">checkpointer</span> <span class="o">=</span> <span class="n">MemorySaver</span><span class="p">()</span>
</span><span id="__span-24-42"><a href="#__codelineno-24-42" id="__codelineno-24-42" name="__codelineno-24-42"></a><span class="n">graph</span> <span class="o">=</span> <span class="n">builder</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="n">checkpointer</span><span class="o">=</span><span class="n">checkpointer</span><span class="p">)</span>
</span><span id="__span-24-43"><a href="#__codelineno-24-43" id="__codelineno-24-43" name="__codelineno-24-43"></a>
</span><span id="__span-24-44"><a href="#__codelineno-24-44" id="__codelineno-24-44" name="__codelineno-24-44"></a><span class="n">config</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="__span-24-45"><a href="#__codelineno-24-45" id="__codelineno-24-45" name="__codelineno-24-45"></a>    <span class="s2">"configurable"</span><span class="p">:</span> <span class="p">{</span>
</span><span id="__span-24-46"><a href="#__codelineno-24-46" id="__codelineno-24-46" name="__codelineno-24-46"></a>        <span class="s2">"thread_id"</span><span class="p">:</span> <span class="n">uuid</span><span class="o">.</span><span class="n">uuid4</span><span class="p">(),</span>
</span><span id="__span-24-47"><a href="#__codelineno-24-47" id="__codelineno-24-47" name="__codelineno-24-47"></a>    <span class="p">}</span>
</span><span id="__span-24-48"><a href="#__codelineno-24-48" id="__codelineno-24-48" name="__codelineno-24-48"></a><span class="p">}</span>
</span><span id="__span-24-49"><a href="#__codelineno-24-49" id="__codelineno-24-49" name="__codelineno-24-49"></a>
</span><span id="__span-24-50"><a href="#__codelineno-24-50" id="__codelineno-24-50" name="__codelineno-24-50"></a><span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">graph</span><span class="o">.</span><span class="n">stream</span><span class="p">({</span><span class="s2">"age"</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span> <span class="s2">"name"</span><span class="p">:</span> <span class="kc">None</span><span class="p">},</span> <span class="n">config</span><span class="p">):</span>
</span><span id="__span-24-51"><a href="#__codelineno-24-51" id="__codelineno-24-51" name="__codelineno-24-51"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
</span><span id="__span-24-52"><a href="#__codelineno-24-52" id="__codelineno-24-52" name="__codelineno-24-52"></a>
</span><span id="__span-24-53"><a href="#__codelineno-24-53" id="__codelineno-24-53" name="__codelineno-24-53"></a><span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">graph</span><span class="o">.</span><span class="n">stream</span><span class="p">(</span><span class="n">Command</span><span class="p">(</span><span class="n">resume</span><span class="o">=</span><span class="s2">"John"</span><span class="p">,</span> <span class="n">update</span><span class="o">=</span><span class="p">{</span><span class="s2">"name"</span><span class="p">:</span> <span class="s2">"foo"</span><span class="p">}),</span> <span class="n">config</span><span class="p">):</span>
</span><span id="__span-24-54"><a href="#__codelineno-24-54" id="__codelineno-24-54" name="__codelineno-24-54"></a>    <span class="nb">print</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
</span></code></pre></div>
<div class="language-pycon highlight"><pre><span></span><code><span id="__span-25-1"><a href="#__codelineno-25-1" id="__codelineno-25-1" name="__codelineno-25-1"></a><span class="go">{'__interrupt__': (Interrupt(value='what is your name?', resumable=True, ns=['human_node:3a007ef9-c30d-c357-1ec1-86a1a70d8fba'], when='during'),)}</span>
</span><span id="__span-25-2"><a href="#__codelineno-25-2" id="__codelineno-25-2" name="__codelineno-25-2"></a><span class="go">Name: N/A. Age: John</span>
</span><span id="__span-25-3"><a href="#__codelineno-25-3" id="__codelineno-25-3" name="__codelineno-25-3"></a><span class="go">{'human_node': {'age': 'John', 'name': 'N/A'}}</span>
</span></code></pre></div>
</details>
</article>
</div>
<script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
<button class="md-top md-icon" data-md-component="top" hidden="" type="button">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  Back to top
</button>
</main>
<footer class="md-footer">
<nav aria-label="Footer" class="md-footer__inner md-grid">
<a aria-label="Previous: Overview" class="md-footer__link md-footer__link--prev" href="../../../concepts/human_in_the_loop/">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</div>
<div class="md-footer__title">
<span class="md-footer__direction">
                Previous
              </span>
<div class="md-ellipsis">
                Overview
              </div>
</div>
</a>
<a aria-label="Next: Use Server API" class="md-footer__link md-footer__link--next" href="../../../cloud/how-tos/add-human-in-the-loop/">
<div class="md-footer__title">
<span class="md-footer__direction">
                Next
              </span>
<div class="md-ellipsis">
                Use Server API
              </div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
<div class="md-copyright__highlight">
      Copyright © 2025 LangChain, Inc | <a href="#__consent">Consent Preferences</a>
</div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
<div class="md-social">
<a class="md-social__link" href="https://langchain-ai.github.io/langgraphjs/" rel="noopener" target="_blank" title="langchain-ai.github.io">
<svg viewbox="0 0 448 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M0 32v448h448V32zm243.8 349.4c0 43.6-25.6 63.5-62.9 63.5-33.7 0-53.2-17.4-63.2-38.5l34.3-20.7c6.6 11.7 12.6 21.6 27.1 21.6 13.8 0 22.6-5.4 22.6-26.5V237.7h42.1zm99.6 63.5c-39.1 0-64.4-18.6-76.7-43l34.3-19.8c9 14.7 20.8 25.6 41.5 25.6 17.4 0 28.6-8.7 28.6-20.8 0-14.4-11.4-19.5-30.7-28l-10.5-4.5c-30.4-12.9-50.5-29.2-50.5-63.5 0-31.6 24.1-55.6 61.6-55.6 26.8 0 46 9.3 59.8 33.7L368 290c-7.2-12.9-15-18-27.1-18-12.3 0-20.1 7.8-20.1 18 0 12.6 7.8 17.7 25.9 25.6l10.5 4.5c35.8 15.3 55.9 31 55.9 66.2 0 37.8-29.8 58.6-69.7 58.6"></path></svg>
</a>
<a class="md-social__link" href="https://github.com/langchain-ai/langgraph" rel="noopener" target="_blank" title="github.com">
<svg viewbox="0 0 496 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
</a>
<a class="md-social__link" href="https://twitter.com/LangChainAI" rel="noopener" target="_blank" title="twitter.com">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253"></path></svg>
</a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<div class="md-progress" data-md-component="progress" role="progressbar"></div>
<script id="__config" type="application/json">{"base": "../../..", "features": ["announce.dismiss", "content.code.annotate", "content.code.copy", "content.code.select", "content.tabs.link", "content.action.edit", "content.tooltips", "navigation.indexes", "navigation.footer", "navigation.instant", "navigation.sections", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.path", "navigation.tabs", "navigation.top", "navigation.prune", "navigation.tracking", "search.highlight", "search.share", "search.suggest"], "search": "../../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
<script src="../../../assets/javascripts/bundle.56ea9cef.min.js"></script>
</body>
</html>